<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Housen Chu" />


<title>Site selection</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Site selection</h1>
<h4 class="author">Housen Chu</h4>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(amerifluxr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pander)</span></code></pre></div>
<p>amerifluxr is a programmatic interface to the <a href="https://ameriflux.lbl.gov/">AmeriFlux</a>. This vignette demonstrates examples to query a list of target sites based on sites’ general information and availability of metadata and data. A companion vignette for <a href="data_import.html">Data import</a> is available as well.</p>
<div id="get-a-site-list-with-general-info" class="section level2">
<h2>Get a site list with general info</h2>
<p>AmeriFlux data are organized by individual sites. Typically, data query begins with site search and selection. A full list of AmeriFlux sites with general info can be obtained using the amf_site_info() function.</p>
<p>Convert the site list to a data.table for easier manipulation. Also see <a href="https://ameriflux.lbl.gov/data/badm/badm-standards/">link</a> for variable definition.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get a full list of sites with general info</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>sites <span class="ot">&lt;-</span> <span class="fu">amf_site_info</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>sites_dt <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">as.data.table</span>(sites)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(sites_dt[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>), ])</span></code></pre></div>
<table style="width:100%;">
<caption>Table continues below</caption>
<colgroup>
<col width="13%" />
<col width="39%" />
<col width="16%" />
<col width="20%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">SITE_ID</th>
<th align="center">SITE_NAME</th>
<th align="center">COUNTRY</th>
<th align="center">STATE</th>
<th align="center">IGBP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">AR-CCa</td>
<td align="center">Carlos Casares agriculture</td>
<td align="center">Argentina</td>
<td align="center">Buenos Aires</td>
<td align="center">CRO</td>
</tr>
<tr class="even">
<td align="center">AR-CCg</td>
<td align="center">Carlos Casares grassland</td>
<td align="center">Argentina</td>
<td align="center">Buenos Aires</td>
<td align="center">GRA</td>
</tr>
<tr class="odd">
<td align="center">AR-TF1</td>
<td align="center">Rio Moat bog</td>
<td align="center">Argentina</td>
<td align="center">NA</td>
<td align="center">WET</td>
</tr>
</tbody>
</table>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="18%" />
<col width="65%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">TOWER_BEGAN</th>
<th align="center">URL_AMERIFLUX</th>
<th align="center">TOWER_END</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">2012</td>
<td align="center"><a href="https://ameriflux.lbl.gov/sites/siteinfo/AR-CCa" class="uri">https://ameriflux.lbl.gov/sites/siteinfo/AR-CCa</a></td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">2018</td>
<td align="center"><a href="https://ameriflux.lbl.gov/sites/siteinfo/AR-CCg" class="uri">https://ameriflux.lbl.gov/sites/siteinfo/AR-CCg</a></td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">2016</td>
<td align="center"><a href="https://ameriflux.lbl.gov/sites/siteinfo/AR-TF1" class="uri">https://ameriflux.lbl.gov/sites/siteinfo/AR-TF1</a></td>
<td align="center">2018</td>
</tr>
</tbody>
</table>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="18%" />
<col width="20%" />
<col width="20%" />
<col width="22%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">LOCATION_LAT</th>
<th align="center">LOCATION_LONG</th>
<th align="center">LOCATION_ELEV</th>
<th align="center">CLIMATE_KOEPPEN</th>
<th align="center">MAT</th>
<th align="center">MAP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">-35.62</td>
<td align="center">-61.32</td>
<td align="center">83</td>
<td align="center">Cfa</td>
<td align="center">16.1</td>
<td align="center">1060</td>
</tr>
<tr class="even">
<td align="center">-35.92</td>
<td align="center">-61.19</td>
<td align="center">84</td>
<td align="center">Cfa</td>
<td align="center">16.1</td>
<td align="center">1060</td>
</tr>
<tr class="odd">
<td align="center">-54.97</td>
<td align="center">-66.73</td>
<td align="center">40</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
</tbody>
</table>
<table style="width:56%;">
<colgroup>
<col width="19%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">DATA_POLICY</th>
<th align="center">DATA_START</th>
<th align="center">DATA_END</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">LEGACY</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">LEGACY</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">CCBY4.0</td>
<td align="center">2016</td>
<td align="center">2018</td>
</tr>
</tbody>
</table>
<p>The site list provides a quick summary of all registered sites and sites with available data.</p>
<p>It’s often important to understand the data use policy under which the data are shared. In 2021, the AmeriFlux community moved to the AmeriFlux CC-BY-4.0 License. Most site PIs now share their sites’ data under the CC-BY-4.0 license. Data for some sites are shared under the historical AmeriFlux data-sharing policy, now called the AmeriFlux Legacy Data Policy.</p>
<p>Check <a href="https://ameriflux.lbl.gov/data/data-policy/#data-use">link</a> for data use policy and attribution guidelines.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># total number of registered sites</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(sites_dt[, .N])</span></code></pre></div>
<table style="width:8%;">
<colgroup>
<col width="8%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="center">562</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># total number of sites with available data</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(sites_dt[<span class="sc">!</span><span class="fu">is.na</span>(DATA_START), .N])</span></code></pre></div>
<table style="width:8%;">
<colgroup>
<col width="8%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="center">410</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># get number of sites with available data, grouped by data use policy</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(sites_dt[<span class="sc">!</span><span class="fu">is.na</span>(DATA_START), .N, <span class="at">by =</span> .(DATA_POLICY)])</span></code></pre></div>
<table style="width:28%;">
<colgroup>
<col width="19%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">DATA_POLICY</th>
<th align="center">N</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">CCBY4.0</td>
<td align="center">305</td>
</tr>
<tr class="even">
<td align="center">LEGACY</td>
<td align="center">105</td>
</tr>
</tbody>
</table>
<p>Further group sites based on <a href="https://ameriflux.lbl.gov/data/badm/badm-standards/IGBP">IGBP</a>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get a summary table of sites grouped by IGBP</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(sites_dt[, .N, <span class="at">by =</span> <span class="st">&quot;IGBP&quot;</span>])</span></code></pre></div>
<table style="width:19%;">
<colgroup>
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">IGBP</th>
<th align="center">N</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">CRO</td>
<td align="center">110</td>
</tr>
<tr class="even">
<td align="center">GRA</td>
<td align="center">79</td>
</tr>
<tr class="odd">
<td align="center">WET</td>
<td align="center">94</td>
</tr>
<tr class="even">
<td align="center">DNF</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">EBF</td>
<td align="center">10</td>
</tr>
<tr class="even">
<td align="center">WSA</td>
<td align="center">9</td>
</tr>
<tr class="odd">
<td align="center">ENF</td>
<td align="center">99</td>
</tr>
<tr class="even">
<td align="center">DBF</td>
<td align="center">58</td>
</tr>
<tr class="odd">
<td align="center">MF</td>
<td align="center">14</td>
</tr>
<tr class="even">
<td align="center">OSH</td>
<td align="center">39</td>
</tr>
<tr class="odd">
<td align="center">WAT</td>
<td align="center">9</td>
</tr>
<tr class="even">
<td align="center">CSH</td>
<td align="center">12</td>
</tr>
<tr class="odd">
<td align="center">URB</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">BSV</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">SAV</td>
<td align="center">8</td>
</tr>
<tr class="even">
<td align="center">CVM</td>
<td align="center">5</td>
</tr>
<tr class="odd">
<td align="center">SNO</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># get a summary table of sites with available data, &amp; grouped by IGBP</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(sites_dt[<span class="sc">!</span><span class="fu">is.na</span>(DATA_START), .N, <span class="at">by =</span> <span class="st">&quot;IGBP&quot;</span>])</span></code></pre></div>
<table style="width:19%;">
<colgroup>
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">IGBP</th>
<th align="center">N</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">WET</td>
<td align="center">50</td>
</tr>
<tr class="even">
<td align="center">DNF</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">WSA</td>
<td align="center">7</td>
</tr>
<tr class="even">
<td align="center">EBF</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">ENF</td>
<td align="center">93</td>
</tr>
<tr class="even">
<td align="center">DBF</td>
<td align="center">54</td>
</tr>
<tr class="odd">
<td align="center">MF</td>
<td align="center">12</td>
</tr>
<tr class="even">
<td align="center">CRO</td>
<td align="center">63</td>
</tr>
<tr class="odd">
<td align="center">GRA</td>
<td align="center">61</td>
</tr>
<tr class="even">
<td align="center">OSH</td>
<td align="center">31</td>
</tr>
<tr class="odd">
<td align="center">CSH</td>
<td align="center">11</td>
</tr>
<tr class="even">
<td align="center">BSV</td>
<td align="center">4</td>
</tr>
<tr class="odd">
<td align="center">CVM</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">SAV</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">URB</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">WAT</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">SNO</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># get a summary table of sites with available data, </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  &amp; grouped by data use policy &amp; IGBP</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(sites_dt[<span class="sc">!</span><span class="fu">is.na</span>(DATA_START), .N, <span class="at">by =</span> .(IGBP, DATA_POLICY)][<span class="fu">order</span>(IGBP)])</span></code></pre></div>
<table style="width:36%;">
<colgroup>
<col width="9%" />
<col width="19%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">IGBP</th>
<th align="center">DATA_POLICY</th>
<th align="center">N</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">BSV</td>
<td align="center">CCBY4.0</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">BSV</td>
<td align="center">LEGACY</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">CRO</td>
<td align="center">CCBY4.0</td>
<td align="center">49</td>
</tr>
<tr class="even">
<td align="center">CRO</td>
<td align="center">LEGACY</td>
<td align="center">14</td>
</tr>
<tr class="odd">
<td align="center">CSH</td>
<td align="center">LEGACY</td>
<td align="center">5</td>
</tr>
<tr class="even">
<td align="center">CSH</td>
<td align="center">CCBY4.0</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">CVM</td>
<td align="center">CCBY4.0</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">DBF</td>
<td align="center">CCBY4.0</td>
<td align="center">48</td>
</tr>
<tr class="odd">
<td align="center">DBF</td>
<td align="center">LEGACY</td>
<td align="center">6</td>
</tr>
<tr class="even">
<td align="center">DNF</td>
<td align="center">CCBY4.0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">EBF</td>
<td align="center">LEGACY</td>
<td align="center">4</td>
</tr>
<tr class="even">
<td align="center">EBF</td>
<td align="center">CCBY4.0</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">ENF</td>
<td align="center">CCBY4.0</td>
<td align="center">68</td>
</tr>
<tr class="even">
<td align="center">ENF</td>
<td align="center">LEGACY</td>
<td align="center">25</td>
</tr>
<tr class="odd">
<td align="center">GRA</td>
<td align="center">LEGACY</td>
<td align="center">15</td>
</tr>
<tr class="even">
<td align="center">GRA</td>
<td align="center">CCBY4.0</td>
<td align="center">46</td>
</tr>
<tr class="odd">
<td align="center">MF</td>
<td align="center">CCBY4.0</td>
<td align="center">7</td>
</tr>
<tr class="even">
<td align="center">MF</td>
<td align="center">LEGACY</td>
<td align="center">5</td>
</tr>
<tr class="odd">
<td align="center">OSH</td>
<td align="center">LEGACY</td>
<td align="center">9</td>
</tr>
<tr class="even">
<td align="center">OSH</td>
<td align="center">CCBY4.0</td>
<td align="center">22</td>
</tr>
<tr class="odd">
<td align="center">SAV</td>
<td align="center">CCBY4.0</td>
<td align="center">6</td>
</tr>
<tr class="even">
<td align="center">SNO</td>
<td align="center">CCBY4.0</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">URB</td>
<td align="center">LEGACY</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">WAT</td>
<td align="center">CCBY4.0</td>
<td align="center">6</td>
</tr>
<tr class="odd">
<td align="center">WET</td>
<td align="center">CCBY4.0</td>
<td align="center">34</td>
</tr>
<tr class="even">
<td align="center">WET</td>
<td align="center">LEGACY</td>
<td align="center">16</td>
</tr>
<tr class="odd">
<td align="center">WSA</td>
<td align="center">CCBY4.0</td>
<td align="center">5</td>
</tr>
<tr class="even">
<td align="center">WSA</td>
<td align="center">LEGACY</td>
<td align="center">2</td>
</tr>
</tbody>
</table>
<p>Once decided, users can query a target site list based on the desired criteria, e.g., IGBP, data availability, data policy, geolocation.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># get a list of cropland and grassland sites with available data,</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  shared under CC-BY-4.0 data policy,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  located within 30-50 degree N in latitude,</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># returned a site list with site ID, name, data starting/ending year</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>crop_ls <span class="ot">&lt;-</span> sites_dt[IGBP <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CRO&quot;</span>, <span class="st">&quot;GRA&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">!</span><span class="fu">is.na</span>(DATA_START) <span class="sc">&amp;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>                      LOCATION_LAT <span class="sc">&gt;</span> <span class="dv">30</span> <span class="sc">&amp;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>                      LOCATION_LAT <span class="sc">&lt;</span> <span class="dv">50</span> <span class="sc">&amp;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>                      DATA_POLICY <span class="sc">==</span> <span class="st">&quot;CCBY4.0&quot;</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>                    .(SITE_ID, SITE_NAME, DATA_START, DATA_END)]</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(crop_ls[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),])</span></code></pre></div>
<table style="width:92%;">
<colgroup>
<col width="13%" />
<col width="41%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">SITE_ID</th>
<th align="center">SITE_NAME</th>
<th align="center">DATA_START</th>
<th align="center">DATA_END</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">CA-ER1</td>
<td align="center">Elora Research Station</td>
<td align="center">2015</td>
<td align="center">2021</td>
</tr>
<tr class="even">
<td align="center">US-A32</td>
<td align="center">ARM-SGP Medford hay pasture</td>
<td align="center">2015</td>
<td align="center">2017</td>
</tr>
<tr class="odd">
<td align="center">US-A74</td>
<td align="center">ARM SGP milo field</td>
<td align="center">2015</td>
<td align="center">2017</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">ARM USDA UNL OSU Woodward Switchgrass 1</td>
<td align="center">2009</td>
<td align="center">2012</td>
</tr>
<tr class="odd">
<td align="center">US-AR2</td>
<td align="center">ARM USDA UNL OSU Woodward Switchgrass 2</td>
<td align="center">2009</td>
<td align="center">2012</td>
</tr>
<tr class="even">
<td align="center">US-ARM</td>
<td align="center">ARM Southern Great Plains site- Lamont</td>
<td align="center">2003</td>
<td align="center">2021</td>
</tr>
<tr class="odd">
<td align="center">US-BMM</td>
<td align="center">Bangtail Mountain Meadow</td>
<td align="center">2016</td>
<td align="center">2019</td>
</tr>
<tr class="even">
<td align="center">US-BRG</td>
<td align="center">Bayles Road Grassland Tower</td>
<td align="center">2016</td>
<td align="center">2020</td>
</tr>
<tr class="odd">
<td align="center">US-Bi1</td>
<td align="center">Bouldin Island Alfalfa</td>
<td align="center">2016</td>
<td align="center">2021</td>
</tr>
<tr class="even">
<td align="center">US-Bi2</td>
<td align="center">Bouldin Island corn</td>
<td align="center">2017</td>
<td align="center">2021</td>
</tr>
</tbody>
</table>
</div>
<div id="get-metadata-availability" class="section level2">
<h2>Get metadata availability</h2>
<p>In some cases, users may want to know if certain types of metadata are available for the selected sites. The amf_list_metadata() function provides a quick summary of metadata availability before actually downloading the data and metadata.</p>
<p>By default, amf_list_metadata() returns a full site list with the available entries (i.e., counts) for all BADM groups. Check <a href="https://ameriflux.lbl.gov/data/badm/badm-basics/">AmeriFlux webpage</a> for definitions of all BADM groups.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get data availability for selected sites</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>metadata_aval <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">as.data.table</span>(<span class="fu">amf_list_metadata</span>())</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(metadata_aval[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)])</span></code></pre></div>
<table style="width:100%;">
<caption>Table continues below</caption>
<colgroup>
<col width="12%" />
<col width="27%" />
<col width="18%" />
<col width="17%" />
<col width="24%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">SITE_ID</th>
<th align="center">GRP_ACKNOWLEDGEMENT</th>
<th align="center">GRP_CLIM_AVG</th>
<th align="center">GRP_COUNTRY</th>
<th align="center">GRP_DOM_DIST_MGMT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">AR-CCa</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">AR-CCg</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">AR-TF1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col width="28%" />
<col width="15%" />
<col width="13%" />
<col width="25%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">GRP_FLUX_MEASUREMENTS</th>
<th align="center">GRP_HEADER</th>
<th align="center">GRP_IGBP</th>
<th align="center">GRP_LAND_OWNERSHIP</th>
<th align="center">GRP_LOCATION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>The site_set parameter of the amf_list_metadata() can be used to subset the sites of interest.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>metadata_aval_sub <span class="ot">&lt;-</span> <span class="fu">as.data.table</span>(<span class="fu">amf_list_metadata</span>(<span class="at">site_set =</span> crop_ls<span class="sc">$</span>SITE_ID))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># down-select cropland &amp; grassland sites by interested BADM group,</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  e.g., canopy height (GRP_HEIGHTC)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>crop_ls2 <span class="ot">&lt;-</span> metadata_aval_sub[GRP_HEIGHTC <span class="sc">&gt;</span> <span class="dv">0</span>, .(SITE_ID, GRP_HEIGHTC)][<span class="fu">order</span>(<span class="sc">-</span>GRP_HEIGHTC)]</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(crop_ls2[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), ])</span></code></pre></div>
<table style="width:33%;">
<colgroup>
<col width="13%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">SITE_ID</th>
<th align="center">GRP_HEIGHTC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">196</td>
</tr>
<tr class="even">
<td align="center">US-Tw3</td>
<td align="center">162</td>
</tr>
<tr class="odd">
<td align="center">US-Twt</td>
<td align="center">133</td>
</tr>
<tr class="even">
<td align="center">US-Ne3</td>
<td align="center">128</td>
</tr>
<tr class="odd">
<td align="center">US-Ne1</td>
<td align="center">119</td>
</tr>
<tr class="even">
<td align="center">US-Bi1</td>
<td align="center">112</td>
</tr>
<tr class="odd">
<td align="center">US-Var</td>
<td align="center">105</td>
</tr>
<tr class="even">
<td align="center">US-Snd</td>
<td align="center">70</td>
</tr>
<tr class="odd">
<td align="center">US-Bi2</td>
<td align="center">54</td>
</tr>
<tr class="even">
<td align="center">US-ARM</td>
<td align="center">45</td>
</tr>
</tbody>
</table>
</div>
<div id="get-data-availability" class="section level2">
<h2>Get data availability</h2>
<p>Users can use amf_list_data() to query the availability of specific variables in the data (i.e., flux/met data, so-called BASE data product). The amf_list_data() provides a quick summary of variable availability (per site/year) before downloading the data.</p>
<p>By default, amf_list_data() returns a full site list of variable availability (data percentages per year) for all variables. The site_set parameter of amf_list_data() can be used to subset the sites of interest.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get data availability for selected sites</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>data_aval <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">as.data.table</span>(<span class="fu">amf_list_data</span>(<span class="at">site_set =</span> crop_ls2<span class="sc">$</span>SITE_ID))</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(data_aval[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), ])</span></code></pre></div>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="12%" />
<col width="14%" />
<col width="14%" />
<col width="16%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">SITE_ID</th>
<th align="center">VARIABLE</th>
<th align="center">BASENAME</th>
<th align="center">GAP_FILLED</th>
<th align="center">Y1990</th>
<th align="center">Y1991</th>
<th align="center">Y1992</th>
<th align="center">Y1993</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">CO2</td>
<td align="center">CO2</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">FC</td>
<td align="center">FC</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">G</td>
<td align="center">G</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">H</td>
<td align="center">H</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">H2O</td>
<td align="center">H2O</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">LE</td>
<td align="center">LE</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">LW_IN</td>
<td align="center">LW_IN</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">LW_OUT</td>
<td align="center">LW_OUT</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">US-AR1</td>
<td align="center">NETRAD</td>
<td align="center">NETRAD</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">US-AR1</td>
<td align="center">P</td>
<td align="center">P</td>
<td align="center">FALSE</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<caption>Table continues below</caption>
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Y1994</th>
<th align="center">Y1995</th>
<th align="center">Y1996</th>
<th align="center">Y1997</th>
<th align="center">Y1998</th>
<th align="center">Y1999</th>
<th align="center">Y2000</th>
<th align="center">Y2001</th>
<th align="center">Y2002</th>
<th align="center">Y2003</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Y2004</th>
<th align="center">Y2005</th>
<th align="center">Y2006</th>
<th align="center">Y2007</th>
<th align="center">Y2008</th>
<th align="center">Y2009</th>
<th align="center">Y2010</th>
<th align="center">Y2011</th>
<th align="center">Y2012</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.5905</td>
<td align="center">0.9866</td>
<td align="center">0.9941</td>
<td align="center">0.6654</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6082</td>
<td align="center">0.976</td>
<td align="center">0.9886</td>
<td align="center">0.6621</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6421</td>
<td align="center">0.9965</td>
<td align="center">0.9999</td>
<td align="center">0.9961</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6123</td>
<td align="center">0.9867</td>
<td align="center">0.9938</td>
<td align="center">0.6666</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6092</td>
<td align="center">0.971</td>
<td align="center">0.9792</td>
<td align="center">0.6633</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6101</td>
<td align="center">0.9816</td>
<td align="center">0.9936</td>
<td align="center">0.6647</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6416</td>
<td align="center">0.9965</td>
<td align="center">0.9999</td>
<td align="center">0.9961</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6416</td>
<td align="center">0.9965</td>
<td align="center">0.9999</td>
<td align="center">0.9961</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.5447</td>
<td align="center">0.9964</td>
<td align="center">0.9996</td>
<td align="center">0.996</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.6422</td>
<td align="center">0.9965</td>
<td align="center">0.9999</td>
<td align="center">0.9961</td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Y2013</th>
<th align="center">Y2014</th>
<th align="center">Y2015</th>
<th align="center">Y2016</th>
<th align="center">Y2017</th>
<th align="center">Y2018</th>
<th align="center">Y2019</th>
<th align="center">Y2020</th>
<th align="center">Y2021</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
<p>The variable availability can be used to subset sites that have certain variables in specific years. The BASENAME column indicates the variable’s base name (i.e., ignoring position qualifier), and can be used to get a coarse-level variable availability.</p>
<p>See <a href="https://ameriflux.lbl.gov/data/aboutdata/data-variables/">AmeriFlux website</a> for definitions of base names and qualifiers.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># down-select cropland &amp; grassland sites based on the available wind speed (WS) and </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># friction velocity (USTAR) data in 2015-2018, regardless their qualifiers</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>data_aval_sub <span class="ot">&lt;-</span> data_aval[data_aval<span class="sc">$</span>BASENAME <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;WS&quot;</span>,<span class="st">&quot;USTAR&quot;</span>),</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                           .(SITE_ID, BASENAME, Y2015, Y2016, Y2017, Y2018)]</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate mean availability of WS and USTAR in each site and each year</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>data_aval_sub <span class="ot">&lt;-</span> data_aval_sub[, <span class="fu">lapply</span>(.SD, mean), </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                               by <span class="ot">=</span> .(SITE_ID),</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                               .SDcols <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Y2015&quot;</span>, <span class="st">&quot;Y2016&quot;</span>, <span class="st">&quot;Y2017&quot;</span>, <span class="st">&quot;Y2018&quot;</span>)]</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co"># sub-select sites that have WS and USTAR data for &gt; 75%</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">#  during 2015-2018</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>crop_ls3 <span class="ot">&lt;-</span> data_aval_sub[(Y2015 <span class="sc">+</span> Y2016 <span class="sc">+</span> Y2017 <span class="sc">+</span> Y2018) <span class="sc">/</span> <span class="dv">4</span> <span class="sc">&gt;</span> <span class="fl">0.75</span>]</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(crop_ls3)</span></code></pre></div>
<table style="width:64%;">
<colgroup>
<col width="13%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">SITE_ID</th>
<th align="center">Y2015</th>
<th align="center">Y2016</th>
<th align="center">Y2017</th>
<th align="center">Y2018</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">US-ARM</td>
<td align="center">0.5772</td>
<td align="center">0.9871</td>
<td align="center">0.9683</td>
<td align="center">0.9826</td>
</tr>
<tr class="even">
<td align="center">US-Ne1</td>
<td align="center">0.77</td>
<td align="center">0.7861</td>
<td align="center">0.756</td>
<td align="center">0.7167</td>
</tr>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">0.7636</td>
<td align="center">0.7878</td>
<td align="center">0.7594</td>
<td align="center">0.7442</td>
</tr>
<tr class="even">
<td align="center">US-SRG</td>
<td align="center">0.9669</td>
<td align="center">0.9851</td>
<td align="center">0.9775</td>
<td align="center">0.9997</td>
</tr>
<tr class="odd">
<td align="center">US-Tw3</td>
<td align="center">0.9689</td>
<td align="center">0.9569</td>
<td align="center">0.9763</td>
<td align="center">0.4005</td>
</tr>
<tr class="even">
<td align="center">US-Var</td>
<td align="center">0.9983</td>
<td align="center">1</td>
<td align="center">0.9455</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">US-Wkg</td>
<td align="center">0.9973</td>
<td align="center">0.9909</td>
<td align="center">0.9965</td>
<td align="center">0.9848</td>
</tr>
</tbody>
</table>
<p>Last, sometimes users would look for sites with multiple measurements of similar variables (e.g., multilevel wind speed, soil temperature). The VARIABLE column in the variable availability can be used to get a fine-level variable availability.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># down-select cropland &amp; grassland sites by available wind speed (WS) data,</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  mean availability of WS during 2015-2018</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>data_aval_sub2 <span class="ot">&lt;-</span> data_aval[data_aval<span class="sc">$</span>BASENAME <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;WS&quot;</span>),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                            .(SITE_ID, VARIABLE, <span class="at">Y2015_2018 =</span> (Y2015 <span class="sc">+</span> Y2016 <span class="sc">+</span> Y2017 <span class="sc">+</span> Y2018)<span class="sc">/</span><span class="dv">4</span>)]</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate number of WS variables per site, for sites that </span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  have any WS data during 2015-2018</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>data_aval_sub2 <span class="ot">&lt;-</span> data_aval_sub2[Y2015_2018 <span class="sc">&gt;</span> <span class="dv">0</span>, .(.N, <span class="at">Y2015_2018 =</span> <span class="fu">mean</span>(Y2015_2018)), .(SITE_ID)]</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(crop_ls4 <span class="ot">&lt;-</span> data_aval_sub2[N <span class="sc">&gt;</span> <span class="dv">1</span>, ])</span></code></pre></div>
<table style="width:38%;">
<colgroup>
<col width="13%" />
<col width="5%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">SITE_ID</th>
<th align="center">N</th>
<th align="center">Y2015_2018</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">US-ARM</td>
<td align="center">3</td>
<td align="center">0.8766</td>
</tr>
<tr class="even">
<td align="center">US-Ne1</td>
<td align="center">4</td>
<td align="center">0.7027</td>
</tr>
<tr class="odd">
<td align="center">US-Ne2</td>
<td align="center">4</td>
<td align="center">0.709</td>
</tr>
<tr class="even">
<td align="center">US-Ne3</td>
<td align="center">4</td>
<td align="center">0.7287</td>
</tr>
<tr class="odd">
<td align="center">US-Wkg</td>
<td align="center">2</td>
<td align="center">0.9942</td>
</tr>
</tbody>
</table>
<p>A companion function amf_plot_datayear() can be used for visualizing the data availability in an interactive figure. However, it is strongly advised to subset the sites, variables, and/or years for faster processing and better visualization.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### not evaluated so to reduce vignette size</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot data availability for WS &amp; USTAR</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  for selected sites in 2015-2018</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">amf_plot_datayear</span>(</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">site_set =</span> crop_ls4<span class="sc">$</span>SITE_ID,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_set =</span> <span class="fu">c</span>(<span class="st">&quot;WS&quot;</span>, <span class="st">&quot;USTAR&quot;</span>),</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">nonfilled_only =</span> <span class="cn">TRUE</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">year_set =</span> <span class="fu">c</span>(<span class="dv">2015</span><span class="sc">:</span><span class="dv">2018</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="get-data-summary" class="section level2">
<h2>Get data summary</h2>
<p>In addition, users can use amf_summarize_data() to query the summary statistics of specific variables in the BASE data. The amf_summarize_data() provides summary statistics for each variable (e.g., percentiles) before downloading the data.</p>
<p>By default, amf_summarize_data() returns variable summary (selected percentiles) for all variables and sites. The site_set and var_set parameters can be used to subset the sites or variables of interest.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">## get data summary for selected sites &amp; variables</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data_sum <span class="ot">&lt;-</span> <span class="fu">amf_summarize_data</span>(<span class="at">site_set =</span> crop_ls3<span class="sc">$</span>SITE_ID,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">var_set =</span> <span class="fu">c</span>(<span class="st">&quot;WS&quot;</span>, <span class="st">&quot;USTAR&quot;</span>))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>pander<span class="sc">::</span><span class="fu">pandoc.table</span>(data_sum[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), ])</span></code></pre></div>
<table style="width:100%;">
<caption>Table continues below</caption>
<colgroup>
<col width="15%" />
<col width="13%" />
<col width="19%" />
<col width="15%" />
<col width="17%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">SITE_ID</th>
<th align="center">VARIABLE</th>
<th align="center">BASENAME</th>
<th align="center">GAP_FILLED</th>
<th align="center">DATA_RECORD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>3595</strong></td>
<td align="center">US-ARM</td>
<td align="center">WS_1_1_1</td>
<td align="center">WS</td>
<td align="center">FALSE</td>
<td align="center">324084</td>
</tr>
<tr class="even">
<td align="center"><strong>3598</strong></td>
<td align="center">US-ARM</td>
<td align="center">USTAR_1_1_1</td>
<td align="center">USTAR</td>
<td align="center">FALSE</td>
<td align="center">324084</td>
</tr>
<tr class="odd">
<td align="center"><strong>3651</strong></td>
<td align="center">US-ARM</td>
<td align="center">WS_1_2_1</td>
<td align="center">WS</td>
<td align="center">FALSE</td>
<td align="center">324084</td>
</tr>
<tr class="even">
<td align="center"><strong>3654</strong></td>
<td align="center">US-ARM</td>
<td align="center">USTAR_1_2_1</td>
<td align="center">USTAR</td>
<td align="center">FALSE</td>
<td align="center">324084</td>
</tr>
<tr class="odd">
<td align="center"><strong>3678</strong></td>
<td align="center">US-ARM</td>
<td align="center">WS_1_3_1</td>
<td align="center">WS</td>
<td align="center">FALSE</td>
<td align="center">324084</td>
</tr>
<tr class="even">
<td align="center"><strong>3681</strong></td>
<td align="center">US-ARM</td>
<td align="center">USTAR_1_3_1</td>
<td align="center">USTAR</td>
<td align="center">FALSE</td>
<td align="center">324084</td>
</tr>
<tr class="odd">
<td align="center"><strong>8686</strong></td>
<td align="center">US-Ne1</td>
<td align="center">USTAR_1_1_1</td>
<td align="center">USTAR</td>
<td align="center">FALSE</td>
<td align="center">175320</td>
</tr>
<tr class="even">
<td align="center"><strong>8758</strong></td>
<td align="center">US-Ne1</td>
<td align="center">WS_1_1_1</td>
<td align="center">WS</td>
<td align="center">FALSE</td>
<td align="center">175320</td>
</tr>
<tr class="odd">
<td align="center"><strong>8759</strong></td>
<td align="center">US-Ne1</td>
<td align="center">WS_1_2_1</td>
<td align="center">WS</td>
<td align="center">FALSE</td>
<td align="center">175320</td>
</tr>
<tr class="even">
<td align="center"><strong>8760</strong></td>
<td align="center">US-Ne1</td>
<td align="center">WS_1_3_1</td>
<td align="center">WS</td>
<td align="center">FALSE</td>
<td align="center">175320</td>
</tr>
</tbody>
</table>
<table>
<caption>Table continues below</caption>
<colgroup>
<col width="14%" />
<col width="20%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">DATA_MISSING</th>
<th align="center">Q01</th>
<th align="center">Q05</th>
<th align="center">Q10</th>
<th align="center">Q15</th>
<th align="center">Q20</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>3595</strong></td>
<td align="center">22376</td>
<td align="center">0.5105</td>
<td align="center">1.064</td>
<td align="center">1.451</td>
<td align="center">1.757</td>
<td align="center">2.027</td>
</tr>
<tr class="even">
<td align="center"><strong>3598</strong></td>
<td align="center">21995</td>
<td align="center">0.02875</td>
<td align="center">0.0533</td>
<td align="center">0.07737</td>
<td align="center">0.1022</td>
<td align="center">0.1279</td>
</tr>
<tr class="odd">
<td align="center"><strong>3651</strong></td>
<td align="center">31002</td>
<td align="center">0.8269</td>
<td align="center">1.728</td>
<td align="center">2.395</td>
<td align="center">2.903</td>
<td align="center">3.342</td>
</tr>
<tr class="even">
<td align="center"><strong>3654</strong></td>
<td align="center">30042</td>
<td align="center">0.03132</td>
<td align="center">0.05613</td>
<td align="center">0.07933</td>
<td align="center">0.1022</td>
<td align="center">0.1266</td>
</tr>
<tr class="odd">
<td align="center"><strong>3678</strong></td>
<td align="center">49875</td>
<td align="center">0.9939</td>
<td align="center">2.136</td>
<td align="center">3.012</td>
<td align="center">3.704</td>
<td align="center">4.292</td>
</tr>
<tr class="even">
<td align="center"><strong>3681</strong></td>
<td align="center">44634</td>
<td align="center">0.03308</td>
<td align="center">0.05806</td>
<td align="center">0.08016</td>
<td align="center">0.1015</td>
<td align="center">0.1244</td>
</tr>
<tr class="odd">
<td align="center"><strong>8686</strong></td>
<td align="center">15578</td>
<td align="center">0.024</td>
<td align="center">0.049</td>
<td align="center">0.071</td>
<td align="center">0.093</td>
<td align="center">0.116</td>
</tr>
<tr class="even">
<td align="center"><strong>8758</strong></td>
<td align="center">118560</td>
<td align="center">0.55</td>
<td align="center">0.94</td>
<td align="center">1.19</td>
<td align="center">1.37</td>
<td align="center">1.53</td>
</tr>
<tr class="odd">
<td align="center"><strong>8759</strong></td>
<td align="center">10493</td>
<td align="center">0.8</td>
<td align="center">1.2</td>
<td align="center">1.49</td>
<td align="center">1.72</td>
<td align="center">1.95</td>
</tr>
<tr class="even">
<td align="center"><strong>8760</strong></td>
<td align="center">11666</td>
<td align="center">0.52</td>
<td align="center">0.77</td>
<td align="center">0.99</td>
<td align="center">1.19</td>
<td align="center">1.39</td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<caption>Table continues below</caption>
<colgroup>
<col width="14%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Q25</th>
<th align="center">Q30</th>
<th align="center">Q35</th>
<th align="center">Q40</th>
<th align="center">Q45</th>
<th align="center">Q50</th>
<th align="center">Q55</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>3595</strong></td>
<td align="center">2.281</td>
<td align="center">2.539</td>
<td align="center">2.805</td>
<td align="center">3.083</td>
<td align="center">3.37</td>
<td align="center">3.678</td>
<td align="center">4.008</td>
</tr>
<tr class="even">
<td align="center"><strong>3598</strong></td>
<td align="center">0.1542</td>
<td align="center">0.1803</td>
<td align="center">0.2061</td>
<td align="center">0.2314</td>
<td align="center">0.2566</td>
<td align="center">0.2819</td>
<td align="center">0.3076</td>
</tr>
<tr class="odd">
<td align="center"><strong>3651</strong></td>
<td align="center">3.741</td>
<td align="center">4.12</td>
<td align="center">4.484</td>
<td align="center">4.844</td>
<td align="center">5.211</td>
<td align="center">5.579</td>
<td align="center">5.958</td>
</tr>
<tr class="even">
<td align="center"><strong>3654</strong></td>
<td align="center">0.1525</td>
<td align="center">0.1796</td>
<td align="center">0.2063</td>
<td align="center">0.2332</td>
<td align="center">0.2604</td>
<td align="center">0.2874</td>
<td align="center">0.3145</td>
</tr>
<tr class="odd">
<td align="center"><strong>3678</strong></td>
<td align="center">4.817</td>
<td align="center">5.31</td>
<td align="center">5.786</td>
<td align="center">6.254</td>
<td align="center">6.711</td>
<td align="center">7.169</td>
<td align="center">7.64</td>
</tr>
<tr class="even">
<td align="center"><strong>3681</strong></td>
<td align="center">0.1499</td>
<td align="center">0.1782</td>
<td align="center">0.2072</td>
<td align="center">0.237</td>
<td align="center">0.2666</td>
<td align="center">0.2959</td>
<td align="center">0.326</td>
</tr>
<tr class="odd">
<td align="center"><strong>8686</strong></td>
<td align="center">0.14</td>
<td align="center">0.164</td>
<td align="center">0.188</td>
<td align="center">0.213</td>
<td align="center">0.238</td>
<td align="center">0.263</td>
<td align="center">0.289</td>
</tr>
<tr class="even">
<td align="center"><strong>8758</strong></td>
<td align="center">1.68</td>
<td align="center">1.81</td>
<td align="center">1.96</td>
<td align="center">2.1</td>
<td align="center">2.26</td>
<td align="center">2.44</td>
<td align="center">2.63</td>
</tr>
<tr class="odd">
<td align="center"><strong>8759</strong></td>
<td align="center">2.17</td>
<td align="center">2.4</td>
<td align="center">2.64</td>
<td align="center">2.89</td>
<td align="center">3.16</td>
<td align="center">3.44</td>
<td align="center">3.75</td>
</tr>
<tr class="even">
<td align="center"><strong>8760</strong></td>
<td align="center">1.59</td>
<td align="center">1.79</td>
<td align="center">2</td>
<td align="center">2.22</td>
<td align="center">2.45</td>
<td align="center">2.71</td>
<td align="center">3.01</td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<caption>Table continues below</caption>
<colgroup>
<col width="14%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Q60</th>
<th align="center">Q65</th>
<th align="center">Q70</th>
<th align="center">Q75</th>
<th align="center">Q80</th>
<th align="center">Q85</th>
<th align="center">Q90</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>3595</strong></td>
<td align="center">4.362</td>
<td align="center">4.743</td>
<td align="center">5.162</td>
<td align="center">5.635</td>
<td align="center">6.176</td>
<td align="center">6.837</td>
<td align="center">7.696</td>
</tr>
<tr class="even">
<td align="center"><strong>3598</strong></td>
<td align="center">0.334</td>
<td align="center">0.3621</td>
<td align="center">0.3927</td>
<td align="center">0.4261</td>
<td align="center">0.4644</td>
<td align="center">0.5097</td>
<td align="center">0.5673</td>
</tr>
<tr class="odd">
<td align="center"><strong>3651</strong></td>
<td align="center">6.346</td>
<td align="center">6.766</td>
<td align="center">7.227</td>
<td align="center">7.75</td>
<td align="center">8.373</td>
<td align="center">9.129</td>
<td align="center">10.16</td>
</tr>
<tr class="even">
<td align="center"><strong>3654</strong></td>
<td align="center">0.3422</td>
<td align="center">0.3712</td>
<td align="center">0.4013</td>
<td align="center">0.434</td>
<td align="center">0.4713</td>
<td align="center">0.5144</td>
<td align="center">0.569</td>
</tr>
<tr class="odd">
<td align="center"><strong>3678</strong></td>
<td align="center">8.12</td>
<td align="center">8.606</td>
<td align="center">9.112</td>
<td align="center">9.653</td>
<td align="center">10.25</td>
<td align="center">10.97</td>
<td align="center">11.94</td>
</tr>
<tr class="even">
<td align="center"><strong>3681</strong></td>
<td align="center">0.3572</td>
<td align="center">0.3891</td>
<td align="center">0.4231</td>
<td align="center">0.4599</td>
<td align="center">0.5007</td>
<td align="center">0.549</td>
<td align="center">0.6108</td>
</tr>
<tr class="odd">
<td align="center"><strong>8686</strong></td>
<td align="center">0.315</td>
<td align="center">0.343</td>
<td align="center">0.373</td>
<td align="center">0.406</td>
<td align="center">0.4438</td>
<td align="center">0.49</td>
<td align="center">0.551</td>
</tr>
<tr class="even">
<td align="center"><strong>8758</strong></td>
<td align="center">2.85</td>
<td align="center">3.1</td>
<td align="center">3.38</td>
<td align="center">3.69</td>
<td align="center">4.04</td>
<td align="center">4.48</td>
<td align="center">5.06</td>
</tr>
<tr class="odd">
<td align="center"><strong>8759</strong></td>
<td align="center">4.1</td>
<td align="center">4.49</td>
<td align="center">4.93</td>
<td align="center">5.42</td>
<td align="center">6</td>
<td align="center">6.7</td>
<td align="center">7.62</td>
</tr>
<tr class="even">
<td align="center"><strong>8760</strong></td>
<td align="center">3.34</td>
<td align="center">3.73</td>
<td align="center">4.17</td>
<td align="center">4.69</td>
<td align="center">5.28</td>
<td align="center">5.98</td>
<td align="center">6.87</td>
</tr>
</tbody>
</table>
<table style="width:40%;">
<colgroup>
<col width="15%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">Q95</th>
<th align="center">Q99</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>3595</strong></td>
<td align="center">8.947</td>
<td align="center">11.25</td>
</tr>
<tr class="even">
<td align="center"><strong>3598</strong></td>
<td align="center">0.6527</td>
<td align="center">0.828</td>
</tr>
<tr class="odd">
<td align="center"><strong>3651</strong></td>
<td align="center">11.7</td>
<td align="center">14.44</td>
</tr>
<tr class="even">
<td align="center"><strong>3654</strong></td>
<td align="center">0.6505</td>
<td align="center">0.8178</td>
</tr>
<tr class="odd">
<td align="center"><strong>3678</strong></td>
<td align="center">13.42</td>
<td align="center">16.29</td>
</tr>
<tr class="even">
<td align="center"><strong>3681</strong></td>
<td align="center">0.7058</td>
<td align="center">0.9155</td>
</tr>
<tr class="odd">
<td align="center"><strong>8686</strong></td>
<td align="center">0.645</td>
<td align="center">0.852</td>
</tr>
<tr class="even">
<td align="center"><strong>8758</strong></td>
<td align="center">5.93</td>
<td align="center">7.61</td>
</tr>
<tr class="odd">
<td align="center"><strong>8759</strong></td>
<td align="center">9.01</td>
<td align="center">11.65</td>
</tr>
<tr class="even">
<td align="center"><strong>8760</strong></td>
<td align="center">8.19</td>
<td align="center">10.61</td>
</tr>
</tbody>
</table>
<p>Alternatively, a companion function amf_plot_datasummary() provides interactive visualization to the data summary.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### not evaluated so to reduce vignette size</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="do">## plot data summary of USTAR for selected sites, </span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">amf_plot_datasummary</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">site_set =</span> crop_ls3<span class="sc">$</span>SITE_ID,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_set =</span> <span class="fu">c</span>(<span class="st">&quot;USTAR&quot;</span>)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### not evaluated so to reduce vignette size</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="do">## plot data summary of WS for selected sites, </span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  including clustering information</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">amf_plot_datasummary</span>(</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">site_set =</span> crop_ls3<span class="sc">$</span>SITE_ID,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">var_set =</span> <span class="fu">c</span>(<span class="st">&quot;WS&quot;</span>),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_cluster =</span> <span class="cn">TRUE</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Once having a target site list, users can download these sites’ data and metadata using the site IDs. See <a href="data_import.html">Data import</a> for data download and import examples.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
