<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Creating an OCCDS ADaM</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Creating an OCCDS ADaM</h1>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This article describes creating an OCCDS ADaM. Examples are currently
presented and tested in the context of <code>ADAE</code>. However, the
examples could be applied to other OCCDS ADaMs such as
<code>ADCM</code>, <code>ADMH</code>, <code>ADDV</code>, etc.</p>
<p><strong>Note</strong>: <em>All examples assume CDISC SDTM and/or ADaM
format as input unless otherwise specified.</em></p>
</div>
<div id="programming-workflow" class="section level1">
<h1>Programming Workflow</h1>
<ul>
<li><a href="#readdata">Read in Data</a></li>
<li><a href="#datetime">Derive/Impute End and Start Analysis Date/time
and Relative Day</a></li>
<li><a href="#duration">Derive Durations</a></li>
<li><a href="#atc">Derive ATC variables</a></li>
<li><a href="#trtpa">Derive Planned and Actual Treatment</a></li>
<li><a href="#last_dose">Derive Date/Date-time of Last Dose</a></li>
<li><a href="#dose_unit">Derive Treatment Dose and Unit</a></li>
<li><a href="#severity">Derive Severity, Causality, and Toxicity
Grade</a></li>
<li><a href="#trtflag">Derive Treatment Emergent Flag</a></li>
<li><a href="#occflag">Derive Occurrence Flags</a></li>
<li><a href="#query">Derive Query Variables</a></li>
<li><a href="#adsl_vars">Add ADSL variables</a></li>
<li><a href="#aseq">Derive Analysis Sequence Number</a></li>
<li><a href="#attributes">Add Labels and Attributes</a></li>
</ul>
<div id="readdata" class="section level2">
<h2>Read in Data</h2>
<p>To start, all data frames needed for the creation of
<code>ADAE</code> should be read into the environment. This will be a
company specific process. Some of the data frames needed may be
<code>AE</code> and <code>ADSL</code></p>
<p>For example purpose, the CDISC Pilot SDTM and ADaM datasets —which
are included in <code>{pharmaversesdtm}</code>— are used.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(admiral)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(pharmaversesdtm)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>ae <span class="ot">&lt;-</span> pharmaversesdtm<span class="sc">::</span>ae</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> admiral<span class="sc">::</span>admiral_adsl</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>ex_single <span class="ot">&lt;-</span> admiral<span class="sc">::</span>ex_single</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>ae <span class="ot">&lt;-</span> <span class="fu">convert_blanks_to_na</span>(ae)</span></code></pre></div>
<p>At this step, it may be useful to join <code>ADSL</code> to your
<code>AE</code> domain as well. Only the <code>ADSL</code> variables
used for derivations are selected at this step. The rest of the relevant
<code>ADSL</code> variables would be added later.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>adsl_vars <span class="ot">&lt;-</span> <span class="fu">exprs</span>(TRTSDT, TRTEDT, TRT01A, TRT01P, DTHDT, EOSDT)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>adae <span class="ot">&lt;-</span> <span class="fu">derive_vars_merged</span>(</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  ae,</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="at">dataset_add =</span> adsl,</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  <span class="at">new_vars =</span> adsl_vars,</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">exprs</span>(STUDYID, USUBJID)</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>)</span></code></pre></div>
<table>
<colgroup>
<col width="8%" />
<col width="4%" />
<col width="25%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="13%" />
<col width="13%" />
<col width="4%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="right">AESEQ</th>
<th align="left">AETERM</th>
<th align="left">AESTDTC</th>
<th align="left">TRTSDT</th>
<th align="left">TRTEDT</th>
<th align="left">TRT01A</th>
<th align="left">TRT01P</th>
<th align="left">DTHDT</th>
<th align="left">EOSDT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="right">1</td>
<td align="left">APPLICATION SITE ERYTHEMA</td>
<td align="left">2014-01-03</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">NA</td>
<td align="left">2014-07-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="right">2</td>
<td align="left">APPLICATION SITE PRURITUS</td>
<td align="left">2014-01-03</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">NA</td>
<td align="left">2014-07-02</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="right">3</td>
<td align="left">DIARRHOEA</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">NA</td>
<td align="left">2014-07-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="right">3</td>
<td align="left">ATRIOVENTRICULAR BLOCK SECOND DEGREE</td>
<td align="left">2012-08-26</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-01</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">NA</td>
<td align="left">2012-09-02</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="right">1</td>
<td align="left">ERYTHEMA</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-01</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">NA</td>
<td align="left">2012-09-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="right">2</td>
<td align="left">ERYTHEMA</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-01</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">NA</td>
<td align="left">2012-09-02</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="right">4</td>
<td align="left">ERYTHEMA</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-01</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">NA</td>
<td align="left">2012-09-02</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="right">1</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="left">2012-09-13</td>
<td align="left">2012-09-02</td>
<td align="left">2012-12-04</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">NA</td>
<td align="left">2012-12-24</td>
</tr>
<tr class="odd">
<td align="left">01-703-1086</td>
<td align="right">2</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="left">2012-09-13</td>
<td align="left">2012-09-02</td>
<td align="left">2012-12-04</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">NA</td>
<td align="left">2012-12-24</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="right">3</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="left">2012-09-13</td>
<td align="left">2012-09-02</td>
<td align="left">2012-12-04</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">NA</td>
<td align="left">2012-12-24</td>
</tr>
</tbody>
</table>
</div>
<div id="datetime" class="section level2">
<h2>Derive/Impute End and Start Analysis Date/time and Relative Day</h2>
<p>This part derives <code>ASTDTM</code>, <code>ASTDT</code>,
<code>ASTDY</code>, <code>AENDTM</code>, <code>AENDT</code>, and
<code>AENDY</code>. The function <code>derive_vars_dtm()</code> can be
used to derive <code>ASTDTM</code> and <code>AENDTM</code> where
<code>ASTDTM</code> could be company-specific. <code>ASTDT</code> and
<code>AENDT</code> can be derived from <code>ASTDTM</code> and
<code>AENDTM</code>, respectively, using function
<code>derive_vars_dtm_to_dt()</code>. <code>derive_vars_dy()</code> can
be used to create <code>ASTDY</code> and <code>AENDY</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>adae <span class="ot">&lt;-</span> adae <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">derive_vars_dtm</span>(</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>    <span class="at">dtc =</span> AESTDTC,</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    <span class="at">new_vars_prefix =</span> <span class="st">&quot;AST&quot;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    <span class="at">min_dates =</span> <span class="fu">exprs</span>(TRTSDT)</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  <span class="fu">derive_vars_dtm</span>(</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>    <span class="at">dtc =</span> AEENDTC,</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>    <span class="at">new_vars_prefix =</span> <span class="st">&quot;AEN&quot;</span>,</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>    <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span>,</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>    <span class="at">date_imputation =</span> <span class="st">&quot;last&quot;</span>,</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>    <span class="at">time_imputation =</span> <span class="st">&quot;last&quot;</span>,</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>    <span class="at">max_dates =</span> <span class="fu">exprs</span>(DTHDT, EOSDT)</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>  <span class="fu">derive_vars_dtm_to_dt</span>(<span class="fu">exprs</span>(ASTDTM, AENDTM)) <span class="sc">%&gt;%</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>  <span class="fu">derive_vars_dy</span>(</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>    <span class="at">reference_date =</span> TRTSDT,</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>    <span class="at">source_vars =</span> <span class="fu">exprs</span>(ASTDT, AENDT)</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="12%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="6%" />
<col width="20%" />
<col width="11%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">AESTDTC</th>
<th align="left">AEENDTC</th>
<th align="left">ASTDTM</th>
<th align="left">ASTDT</th>
<th align="right">ASTDY</th>
<th align="left">AENDTM</th>
<th align="left">AENDT</th>
<th align="right">AENDY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
<td align="left">2014-01-03</td>
<td align="right">2</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
<td align="left">2014-01-03</td>
<td align="right">2</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-11</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-09</td>
<td align="right">8</td>
<td align="left">2014-01-11 23:59:59</td>
<td align="left">2014-01-11</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-26</td>
<td align="left">NA</td>
<td align="left">2012-08-26</td>
<td align="left">2012-08-26</td>
<td align="right">22</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-07</td>
<td align="right">3</td>
<td align="left">2012-08-30 23:59:59</td>
<td align="left">2012-08-30</td>
<td align="right">26</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-07</td>
<td align="right">3</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-07</td>
<td align="right">3</td>
<td align="left">2012-08-30 23:59:59</td>
<td align="left">2012-08-30</td>
<td align="right">26</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2012-09-13</td>
<td align="right">12</td>
<td align="left">2013-01-02 23:59:59</td>
<td align="left">2013-01-02</td>
<td align="right">123</td>
</tr>
<tr class="odd">
<td align="left">01-703-1086</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2012-09-13</td>
<td align="right">12</td>
<td align="left">2013-01-02 23:59:59</td>
<td align="left">2013-01-02</td>
<td align="right">123</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2012-09-13</td>
<td align="right">12</td>
<td align="left">2013-01-02 23:59:59</td>
<td align="left">2013-01-02</td>
<td align="right">123</td>
</tr>
</tbody>
</table>
<p>See also <a href="imputation.html">Date and Time Imputation</a>.</p>
</div>
<div id="duration" class="section level2">
<h2>Derive Durations</h2>
<p>The function <code>derive_vars_duration()</code> can be used to
create the variables <code>ADURN</code> and <code>ADURU</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>adae <span class="ot">&lt;-</span> adae <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="fu">derive_vars_duration</span>(</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>    <span class="at">new_var =</span> ADURN,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="at">new_var_unit =</span> ADURU,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="at">start_date =</span> ASTDT,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    <span class="at">end_date =</span> AENDT</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="17%" />
<col width="16%" />
<col width="16%" />
<col width="16%" />
<col width="16%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">AESTDTC</th>
<th align="left">AEENDTC</th>
<th align="left">ASTDT</th>
<th align="left">AENDT</th>
<th align="right">ADURN</th>
<th align="left">ADURU</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-11</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-11</td>
<td align="right">3</td>
<td align="left">DAYS</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-26</td>
<td align="left">NA</td>
<td align="left">2012-08-26</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="right">24</td>
<td align="left">DAYS</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="right">24</td>
<td align="left">DAYS</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="right">112</td>
<td align="left">DAYS</td>
</tr>
<tr class="odd">
<td align="left">01-703-1086</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="right">112</td>
<td align="left">DAYS</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="right">112</td>
<td align="left">DAYS</td>
</tr>
</tbody>
</table>
</div>
<div id="atc" class="section level2">
<h2>Derive ATC variables</h2>
<p>The function <code>derive_vars_atc()</code> can be used to derive ATC
Class Variables.</p>
<p>It helps to add Anatomical Therapeutic Chemical class variables from
<code>FACM</code> to <code>ADCM</code>.</p>
<p>The expected result is the input dataset with ATC variables
added.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>cm <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="sc">~</span>STUDYID,  <span class="sc">~</span>USUBJID,       <span class="sc">~</span>CMGRPID, <span class="sc">~</span>CMREFID,  <span class="sc">~</span>CMDECOD,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;14&quot;</span>,     <span class="st">&quot;1192056&quot;</span>, <span class="st">&quot;PARACETAMOL&quot;</span>,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;18&quot;</span>,     <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;SOLUMEDROL&quot;</span>,</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1002&quot;</span>, <span class="st">&quot;19&quot;</span>,     <span class="st">&quot;2791596&quot;</span>, <span class="st">&quot;SPIRONOLACTONE&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>facm <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="sc">~</span>STUDYID,  <span class="sc">~</span>USUBJID,       <span class="sc">~</span>FAGRPID, <span class="sc">~</span>FAREFID,  <span class="sc">~</span>FATESTCD,  <span class="sc">~</span>FASTRESC,</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;1192056&quot;</span>, <span class="st">&quot;CMATC1CD&quot;</span>, <span class="st">&quot;N&quot;</span>,</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;1192056&quot;</span>, <span class="st">&quot;CMATC2CD&quot;</span>, <span class="st">&quot;N02&quot;</span>,</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;1192056&quot;</span>, <span class="st">&quot;CMATC3CD&quot;</span>, <span class="st">&quot;N02B&quot;</span>,</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;1192056&quot;</span>, <span class="st">&quot;CMATC4CD&quot;</span>, <span class="st">&quot;N02BE&quot;</span>,</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC1CD&quot;</span>, <span class="st">&quot;D&quot;</span>,</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC2CD&quot;</span>, <span class="st">&quot;D10&quot;</span>,</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC3CD&quot;</span>, <span class="st">&quot;D10A&quot;</span>,</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC4CD&quot;</span>, <span class="st">&quot;D10AA&quot;</span>,</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;2&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC1CD&quot;</span>, <span class="st">&quot;D&quot;</span>,</span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;2&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC2CD&quot;</span>, <span class="st">&quot;D07&quot;</span>,</span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;2&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC3CD&quot;</span>, <span class="st">&quot;D07A&quot;</span>,</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;2&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC4CD&quot;</span>, <span class="st">&quot;D07AA&quot;</span>,</span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;3&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC1CD&quot;</span>, <span class="st">&quot;H&quot;</span>,</span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;3&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC2CD&quot;</span>, <span class="st">&quot;H02&quot;</span>,</span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;3&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC3CD&quot;</span>, <span class="st">&quot;H02A&quot;</span>,</span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;3&quot;</span>,      <span class="st">&quot;2007001&quot;</span>, <span class="st">&quot;CMATC4CD&quot;</span>, <span class="st">&quot;H02AB&quot;</span>,</span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1002&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;2791596&quot;</span>, <span class="st">&quot;CMATC1CD&quot;</span>, <span class="st">&quot;C&quot;</span>,</span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1002&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;2791596&quot;</span>, <span class="st">&quot;CMATC2CD&quot;</span>, <span class="st">&quot;C03&quot;</span>,</span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1002&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;2791596&quot;</span>, <span class="st">&quot;CMATC3CD&quot;</span>, <span class="st">&quot;C03D&quot;</span>,</span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a>  <span class="st">&quot;STUDY01&quot;</span>, <span class="st">&quot;BP40257-1002&quot;</span>, <span class="st">&quot;1&quot;</span>,      <span class="st">&quot;2791596&quot;</span>, <span class="st">&quot;CMATC4CD&quot;</span>, <span class="st">&quot;C03DA&quot;</span></span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a>)</span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a><span class="fu">derive_vars_atc</span>(cm, <span class="at">dataset_facm =</span> facm, <span class="at">id_vars =</span> <span class="fu">exprs</span>(FAGRPID))</span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 9</span></span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a><span class="co">#&gt;   STUDYID USUBJID      CMGRPID CMREFID CMDECOD       ATC1CD ATC2CD ATC3CD ATC4CD</span></span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; </span></span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a><span class="co">#&gt; 1 STUDY01 BP40257-1001 14      1192056 PARACETAMOL   N      N02    N02B   N02BE </span></span>
<span id="cb5-36"><a href="#cb5-36" tabindex="-1"></a><span class="co">#&gt; 2 STUDY01 BP40257-1001 18      2007001 SOLUMEDROL    D      D10    D10A   D10AA </span></span>
<span id="cb5-37"><a href="#cb5-37" tabindex="-1"></a><span class="co">#&gt; 3 STUDY01 BP40257-1001 18      2007001 SOLUMEDROL    D      D07    D07A   D07AA </span></span>
<span id="cb5-38"><a href="#cb5-38" tabindex="-1"></a><span class="co">#&gt; 4 STUDY01 BP40257-1001 18      2007001 SOLUMEDROL    H      H02    H02A   H02AB </span></span>
<span id="cb5-39"><a href="#cb5-39" tabindex="-1"></a><span class="co">#&gt; 5 STUDY01 BP40257-1002 19      2791596 SPIRONOLACTO… C      C03    C03D   C03DA</span></span></code></pre></div>
</div>
<div id="trtpa" class="section level2">
<h2>Derive Planned and Actual Treatment</h2>
<p><code>TRTA</code> and <code>TRTP</code> must match at least one value
of the character treatment variables in ADSL (e.g.,
<code>TRTxxA</code>/<code>TRTxxP</code>,
<code>TRTSEQA</code>/<code>TRTSEQP</code>,
<code>TRxxAGy</code>/<code>TRxxPGy</code>).</p>
<p>An example of a simple implementation for a study without periods
could be:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>adae <span class="ot">&lt;-</span> <span class="fu">mutate</span>(adae, <span class="at">TRTP =</span> TRT01P, <span class="at">TRTA =</span> TRT01A)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">count</span>(adae, TRTP, TRTA, TRT01P, TRT01A)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">#&gt;   TRTP                TRTA                TRT01P              TRT01A           n</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;               &lt;chr&gt;               &lt;chr&gt;               &lt;chr&gt;        &lt;int&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#&gt; 1 Placebo             Placebo             Placebo             Placebo         10</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt; 2 Xanomeline Low Dose Xanomeline Low Dose Xanomeline Low Dose Xanomeline …     6</span></span></code></pre></div>
<p>For studies with periods see the <a href="visits_periods.html#treatment_bds">“Visit and Period Variables”
vignette</a>.</p>
</div>
<div id="last_dose" class="section level2">
<h2>Derive Date/Date-time of Last Dose</h2>
<p>The function <code>derive_vars_joined()</code> can be used to derive
the last dose date before the start of the event.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>ex_single <span class="ot">&lt;-</span> <span class="fu">derive_vars_dtm</span>(</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  ex_single,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="at">dtc =</span> EXSTDTC,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="at">new_vars_prefix =</span> <span class="st">&quot;EXST&quot;</span>,</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="at">flag_imputation =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>adae <span class="ot">&lt;-</span> <span class="fu">derive_vars_joined</span>(</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>  adae,</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>  ex_single,</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>  <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>  <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">LDOSEDTM =</span> EXSTDTM),</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>  <span class="at">join_vars =</span> <span class="fu">exprs</span>(EXSTDTM),</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>  <span class="at">join_type =</span> <span class="st">&quot;all&quot;</span>,</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>  <span class="at">order =</span> <span class="fu">exprs</span>(EXSTDTM),</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>  <span class="at">filter_add =</span> (EXDOSE <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">|</span> (EXDOSE <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;PLACEBO&quot;</span>, EXTRT))) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(EXSTDTM),</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>  <span class="at">filter_join =</span> EXSTDTM <span class="sc">&lt;=</span> ASTDTM,</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">&quot;last&quot;</span></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="10%" />
<col width="33%" />
<col width="5%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">AEDECOD</th>
<th align="right">AESEQ</th>
<th align="left">AESTDTC</th>
<th align="left">AEENDTC</th>
<th align="left">ASTDT</th>
<th align="left">AENDT</th>
<th align="left">LDOSEDTM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">APPLICATION SITE ERYTHEMA</td>
<td align="right">1</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="left">APPLICATION SITE PRURITUS</td>
<td align="right">2</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">DIARRHOEA</td>
<td align="right">3</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-11</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-11</td>
<td align="left">2014-01-09</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">ATRIOVENTRICULAR BLOCK SECOND DEGREE</td>
<td align="right">3</td>
<td align="left">2012-08-26</td>
<td align="left">NA</td>
<td align="left">2012-08-26</td>
<td align="left">NA</td>
<td align="left">2012-08-26</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">ERYTHEMA</td>
<td align="right">1</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">ERYTHEMA</td>
<td align="right">2</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="left">2012-08-07</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">ERYTHEMA</td>
<td align="right">4</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="right">1</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
</tr>
<tr class="odd">
<td align="left">01-703-1086</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="right">2</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="right">3</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
</tr>
</tbody>
</table>
</div>
<div id="dose_unit" class="section level2">
<h2>Derive Treatment Dose and Unit</h2>
<p>In a similar manner, you could derive the treatment dose and unit at
the time of the event. Please note that it is assumed that the dosing
intervals do not overlap. If this case occurs, the
<code>derive_vars_joined()</code> call below will throw an error as
handling this case is study-specific.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>ex_single <span class="ot">&lt;-</span> <span class="fu">derive_vars_dtm</span>(</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  ex_single,</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="at">dtc =</span> EXENDTC,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="at">new_vars_prefix =</span> <span class="st">&quot;EXEN&quot;</span>,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="at">time_imputation =</span> <span class="st">&quot;last&quot;</span>,</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="at">flag_imputation =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>adae <span class="ot">&lt;-</span> <span class="fu">derive_vars_joined</span>(</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>  adae,</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  ex_single,</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>  <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>  <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">DOSEON =</span> EXDOSE, <span class="at">DOSEU =</span> EXDOSU),</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>  <span class="at">join_vars =</span> <span class="fu">exprs</span>(EXSTDTM, EXENDTM),</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>  <span class="at">join_type =</span> <span class="st">&quot;all&quot;</span>,</span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>  <span class="at">filter_add =</span> (EXDOSE <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">|</span> (EXDOSE <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;PLACEBO&quot;</span>, EXTRT))) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(EXSTDTM),</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>  <span class="at">filter_join =</span> EXSTDTM <span class="sc">&lt;=</span> ASTDTM <span class="sc">&amp;</span> (ASTDTM <span class="sc">&lt;=</span> EXENDTM <span class="sc">|</span> <span class="fu">is.na</span>(EXENDTM))</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>)</span></code></pre></div>
<table>
<colgroup>
<col width="10%" />
<col width="33%" />
<col width="5%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="6%" />
<col width="5%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">AEDECOD</th>
<th align="right">AESEQ</th>
<th align="left">AESTDTC</th>
<th align="left">AEENDTC</th>
<th align="left">ASTDT</th>
<th align="left">AENDT</th>
<th align="right">DOSEON</th>
<th align="left">DOSEU</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">APPLICATION SITE ERYTHEMA</td>
<td align="right">1</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="left">mg</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="left">APPLICATION SITE PRURITUS</td>
<td align="right">2</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="left">mg</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">DIARRHOEA</td>
<td align="right">3</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-11</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-11</td>
<td align="right">0</td>
<td align="left">mg</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">ATRIOVENTRICULAR BLOCK SECOND DEGREE</td>
<td align="right">3</td>
<td align="left">2012-08-26</td>
<td align="left">NA</td>
<td align="left">2012-08-26</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="left">mg</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">ERYTHEMA</td>
<td align="right">1</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="right">0</td>
<td align="left">mg</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">ERYTHEMA</td>
<td align="right">2</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="right">0</td>
<td align="left">mg</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">ERYTHEMA</td>
<td align="right">4</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-30</td>
<td align="right">0</td>
<td align="left">mg</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="right">1</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="right">54</td>
<td align="left">mg</td>
</tr>
<tr class="odd">
<td align="left">01-703-1086</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="right">2</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="right">54</td>
<td align="left">mg</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="right">3</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="left">2012-09-13</td>
<td align="left">2013-01-02</td>
<td align="right">54</td>
<td align="left">mg</td>
</tr>
</tbody>
</table>
</div>
<div id="severity" class="section level2">
<h2>Derive Severity, Causality, and Toxicity Grade</h2>
<p>The variables <code>ASEV</code>, <code>AREL</code>, and
<code>ATOXGR</code> can be added using simple
<code>dplyr::mutate()</code> assignments, if no imputation is
required.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>adae <span class="ot">&lt;-</span> adae <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>    <span class="at">ASEV =</span> AESEV,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="at">AREL =</span> AEREL</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="trtflag" class="section level2">
<h2>Derive Treatment Emergent Flag</h2>
<p>To derive the treatment emergent flag <code>TRTEMFL</code>, one can
call <code>derive_var_trtemfl()</code>. In the example below, we use 30
days in the flag derivation.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>adae <span class="ot">&lt;-</span> adae <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">derive_var_trtemfl</span>(</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>    <span class="at">trt_start_date =</span> TRTSDT,</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    <span class="at">trt_end_date =</span> TRTEDT,</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>    <span class="at">end_window =</span> <span class="dv">30</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRTSDT</th>
<th align="left">TRTEDT</th>
<th align="left">AESTDTC</th>
<th align="left">ASTDT</th>
<th align="left">TRTEMFL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="left">2014-01-03</td>
<td align="left">2014-01-03</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="left">2014-01-03</td>
<td align="left">2014-01-03</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="left">2014-01-09</td>
<td align="left">2014-01-09</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-01</td>
<td align="left">2012-08-26</td>
<td align="left">2012-08-26</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-01</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-07</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-01</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-07</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-01</td>
<td align="left">2012-08-07</td>
<td align="left">2012-08-07</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">2012-09-02</td>
<td align="left">2012-12-04</td>
<td align="left">2012-09-13</td>
<td align="left">2012-09-13</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-703-1086</td>
<td align="left">2012-09-02</td>
<td align="left">2012-12-04</td>
<td align="left">2012-09-13</td>
<td align="left">2012-09-13</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">2012-09-02</td>
<td align="left">2012-12-04</td>
<td align="left">2012-09-13</td>
<td align="left">2012-09-13</td>
<td align="left">Y</td>
</tr>
</tbody>
</table>
<p>To derive on-treatment flag (<code>ONTRTFL</code>) in an ADaM dataset
with a single occurrence date, we use
<code>derive_var_ontrtfl()</code>.</p>
<p>The expected result is the input dataset with an additional column
named <code>ONTRTFL</code> with a value of <code>&quot;Y&quot;</code> or
<code>NA</code>.</p>
<p>If you want to also check an end date, you could add the
<code>end_date</code> argument. Note that in this scenario you could set
<code>span_period = TRUE</code> if you want occurrences that started
prior to drug intake, and was ongoing or ended after this time to be
considered as on-treatment.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>bds1 <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="sc">~</span>USUBJID, <span class="sc">~</span>ADT,              <span class="sc">~</span>TRTSDT,           <span class="sc">~</span>TRTEDT,</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="st">&quot;P01&quot;</span>,    <span class="fu">ymd</span>(<span class="st">&quot;2020-02-24&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-01-01&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-03-01&quot;</span>),</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="st">&quot;P02&quot;</span>,    <span class="fu">ymd</span>(<span class="st">&quot;2020-01-01&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-01-01&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-03-01&quot;</span>),</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  <span class="st">&quot;P03&quot;</span>,    <span class="fu">ymd</span>(<span class="st">&quot;2019-12-31&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-01-01&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-03-01&quot;</span>)</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="fu">derive_var_ontrtfl</span>(</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>  bds1,</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>  <span class="at">start_date =</span> ADT,</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  <span class="at">ref_start_date =</span> TRTSDT,</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>  <span class="at">ref_end_date =</span> TRTEDT</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>)</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co">#&gt;   USUBJID ADT        TRTSDT     TRTEDT     ONTRTFL</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;  </span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="co">#&gt; 1 P01     2020-02-24 2020-01-01 2020-03-01 Y      </span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="co">#&gt; 2 P02     2020-01-01 2020-01-01 2020-03-01 Y      </span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="co">#&gt; 3 P03     2019-12-31 2020-01-01 2020-03-01 &lt;NA&gt;</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>bds2 <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a>  <span class="sc">~</span>USUBJID, <span class="sc">~</span>ADT,              <span class="sc">~</span>TRTSDT,           <span class="sc">~</span>TRTEDT,</span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>  <span class="st">&quot;P01&quot;</span>,    <span class="fu">ymd</span>(<span class="st">&quot;2020-07-01&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-01-01&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-03-01&quot;</span>),</span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a>  <span class="st">&quot;P02&quot;</span>,    <span class="fu">ymd</span>(<span class="st">&quot;2020-04-30&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-01-01&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-03-01&quot;</span>),</span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a>  <span class="st">&quot;P03&quot;</span>,    <span class="fu">ymd</span>(<span class="st">&quot;2020-03-15&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-01-01&quot;</span>), <span class="fu">ymd</span>(<span class="st">&quot;2020-03-01&quot;</span>)</span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a>)</span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a><span class="fu">derive_var_ontrtfl</span>(</span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a>  bds2,</span>
<span id="cb11-28"><a href="#cb11-28" tabindex="-1"></a>  <span class="at">start_date =</span> ADT,</span>
<span id="cb11-29"><a href="#cb11-29" tabindex="-1"></a>  <span class="at">ref_start_date =</span> TRTSDT,</span>
<span id="cb11-30"><a href="#cb11-30" tabindex="-1"></a>  <span class="at">ref_end_date =</span> TRTEDT,</span>
<span id="cb11-31"><a href="#cb11-31" tabindex="-1"></a>  <span class="at">ref_end_window =</span> <span class="dv">60</span></span>
<span id="cb11-32"><a href="#cb11-32" tabindex="-1"></a>)</span>
<span id="cb11-33"><a href="#cb11-33" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span id="cb11-34"><a href="#cb11-34" tabindex="-1"></a><span class="co">#&gt;   USUBJID ADT        TRTSDT     TRTEDT     ONTRTFL</span></span>
<span id="cb11-35"><a href="#cb11-35" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;date&gt;     &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;  </span></span>
<span id="cb11-36"><a href="#cb11-36" tabindex="-1"></a><span class="co">#&gt; 1 P01     2020-07-01 2020-01-01 2020-03-01 &lt;NA&gt;   </span></span>
<span id="cb11-37"><a href="#cb11-37" tabindex="-1"></a><span class="co">#&gt; 2 P02     2020-04-30 2020-01-01 2020-03-01 Y      </span></span>
<span id="cb11-38"><a href="#cb11-38" tabindex="-1"></a><span class="co">#&gt; 3 P03     2020-03-15 2020-01-01 2020-03-01 Y</span></span>
<span id="cb11-39"><a href="#cb11-39" tabindex="-1"></a></span>
<span id="cb11-40"><a href="#cb11-40" tabindex="-1"></a>bds3 <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb11-41"><a href="#cb11-41" tabindex="-1"></a>  <span class="sc">~</span>ADTM,              <span class="sc">~</span>TRTSDTM,           <span class="sc">~</span>TRTEDTM,           <span class="sc">~</span>TPT,</span>
<span id="cb11-42"><a href="#cb11-42" tabindex="-1"></a>  <span class="st">&quot;2020-01-02T12:00&quot;</span>, <span class="st">&quot;2020-01-01T12:00&quot;</span>, <span class="st">&quot;2020-03-01T12:00&quot;</span>, <span class="cn">NA</span>,</span>
<span id="cb11-43"><a href="#cb11-43" tabindex="-1"></a>  <span class="st">&quot;2020-01-01T12:00&quot;</span>, <span class="st">&quot;2020-01-01T12:00&quot;</span>, <span class="st">&quot;2020-03-01T12:00&quot;</span>, <span class="st">&quot;PRE&quot;</span>,</span>
<span id="cb11-44"><a href="#cb11-44" tabindex="-1"></a>  <span class="st">&quot;2019-12-31T12:00&quot;</span>, <span class="st">&quot;2020-01-01T12:00&quot;</span>, <span class="st">&quot;2020-03-01T12:00&quot;</span>, <span class="cn">NA</span></span>
<span id="cb11-45"><a href="#cb11-45" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb11-46"><a href="#cb11-46" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-47"><a href="#cb11-47" tabindex="-1"></a>    <span class="at">ADTM =</span> <span class="fu">ymd_hm</span>(ADTM),</span>
<span id="cb11-48"><a href="#cb11-48" tabindex="-1"></a>    <span class="at">TRTSDTM =</span> <span class="fu">ymd_hm</span>(TRTSDTM),</span>
<span id="cb11-49"><a href="#cb11-49" tabindex="-1"></a>    <span class="at">TRTEDTM =</span> <span class="fu">ymd_hm</span>(TRTEDTM)</span>
<span id="cb11-50"><a href="#cb11-50" tabindex="-1"></a>  )</span>
<span id="cb11-51"><a href="#cb11-51" tabindex="-1"></a><span class="fu">derive_var_ontrtfl</span>(</span>
<span id="cb11-52"><a href="#cb11-52" tabindex="-1"></a>  bds3,</span>
<span id="cb11-53"><a href="#cb11-53" tabindex="-1"></a>  <span class="at">start_date =</span> ADTM,</span>
<span id="cb11-54"><a href="#cb11-54" tabindex="-1"></a>  <span class="at">ref_start_date =</span> TRTSDTM,</span>
<span id="cb11-55"><a href="#cb11-55" tabindex="-1"></a>  <span class="at">ref_end_date =</span> TRTEDTM,</span>
<span id="cb11-56"><a href="#cb11-56" tabindex="-1"></a>  <span class="at">filter_pre_timepoint =</span> TPT <span class="sc">==</span> <span class="st">&quot;PRE&quot;</span></span>
<span id="cb11-57"><a href="#cb11-57" tabindex="-1"></a>)</span>
<span id="cb11-58"><a href="#cb11-58" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span id="cb11-59"><a href="#cb11-59" tabindex="-1"></a><span class="co">#&gt;   ADTM                TRTSDTM             TRTEDTM             TPT   ONTRTFL</span></span>
<span id="cb11-60"><a href="#cb11-60" tabindex="-1"></a><span class="co">#&gt;   &lt;dttm&gt;              &lt;dttm&gt;              &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt;  </span></span>
<span id="cb11-61"><a href="#cb11-61" tabindex="-1"></a><span class="co">#&gt; 1 2020-01-02 12:00:00 2020-01-01 12:00:00 2020-03-01 12:00:00 &lt;NA&gt;  Y      </span></span>
<span id="cb11-62"><a href="#cb11-62" tabindex="-1"></a><span class="co">#&gt; 2 2020-01-01 12:00:00 2020-01-01 12:00:00 2020-03-01 12:00:00 PRE   &lt;NA&gt;   </span></span>
<span id="cb11-63"><a href="#cb11-63" tabindex="-1"></a><span class="co">#&gt; 3 2019-12-31 12:00:00 2020-01-01 12:00:00 2020-03-01 12:00:00 &lt;NA&gt;  &lt;NA&gt;</span></span></code></pre></div>
</div>
<div id="occflag" class="section level2">
<h2>Derive Occurrence Flags</h2>
<p>The function <code>derive_var_extreme_flag()</code> can help derive
variables such as <code>AOCCIFL</code>, <code>AOCCPIFL</code>,
<code>AOCCSIFL</code>, and <code>AOCCzzFL</code>.</p>
<p>If grades were collected, the following can be used to flag first
occurrence of maximum toxicity grade.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>adae <span class="ot">&lt;-</span> adae <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="fu">restrict_derivation</span>(</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    <span class="at">derivation =</span> derive_var_extreme_flag,</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    <span class="at">args =</span> <span class="fu">params</span>(</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>      <span class="at">by_vars =</span> <span class="fu">exprs</span>(USUBJID),</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>      <span class="at">order =</span> <span class="fu">exprs</span>(<span class="fu">desc</span>(ATOXGR), ASTDTM, AESEQ),</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>      <span class="at">new_var =</span> AOCCIFL,</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>      <span class="at">mode =</span> <span class="st">&quot;first&quot;</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    ),</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>    <span class="at">filter =</span> TRTEMFL <span class="sc">==</span> <span class="st">&quot;Y&quot;</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>  )</span></code></pre></div>
<p>Similarly, <code>ASEV</code> can also be used to derive the
occurrence flags, if severity is collected. In this case, the variable
will need to be recoded to a numeric variable. Flag first occurrence of
most severe adverse event:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>adae <span class="ot">&lt;-</span> adae <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">restrict_derivation</span>(</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>    <span class="at">derivation =</span> derive_var_extreme_flag,</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="at">args =</span> <span class="fu">params</span>(</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>      <span class="at">by_vars =</span> <span class="fu">exprs</span>(USUBJID),</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>      <span class="at">order =</span> <span class="fu">exprs</span>(</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>        <span class="fu">as.integer</span>(<span class="fu">factor</span>(</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>          ASEV,</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>          <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;DEATH THREATENING&quot;</span>, <span class="st">&quot;SEVERE&quot;</span>, <span class="st">&quot;MODERATE&quot;</span>, <span class="st">&quot;MILD&quot;</span>)</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>        )),</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>        ASTDTM, AESEQ</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>      ),</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>      <span class="at">new_var =</span> AOCCIFL,</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>      <span class="at">mode =</span> <span class="st">&quot;first&quot;</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>    ),</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>    <span class="at">filter =</span> TRTEMFL <span class="sc">==</span> <span class="st">&quot;Y&quot;</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">ASTDTM</th>
<th align="left">ASEV</th>
<th align="right">AESEQ</th>
<th align="left">TRTEMFL</th>
<th align="left">AOCCIFL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-03</td>
<td align="left">MILD</td>
<td align="right">1</td>
<td align="left">Y</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="left">2014-01-03</td>
<td align="left">MILD</td>
<td align="right">2</td>
<td align="left">Y</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-09</td>
<td align="left">MILD</td>
<td align="right">3</td>
<td align="left">Y</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-07</td>
<td align="left">MODERATE</td>
<td align="right">2</td>
<td align="left">Y</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2012-08-07</td>
<td align="left">MILD</td>
<td align="right">1</td>
<td align="left">Y</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-07</td>
<td align="left">MILD</td>
<td align="right">4</td>
<td align="left">Y</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2012-08-26</td>
<td align="left">MILD</td>
<td align="right">3</td>
<td align="left">Y</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">2012-09-13</td>
<td align="left">SEVERE</td>
<td align="right">3</td>
<td align="left">Y</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-703-1086</td>
<td align="left">2012-09-13</td>
<td align="left">MODERATE</td>
<td align="right">2</td>
<td align="left">Y</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">2012-09-13</td>
<td align="left">MILD</td>
<td align="right">1</td>
<td align="left">Y</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div id="query" class="section level2">
<h2>Derive Query Variables</h2>
<p>For deriving query variables <code>SMQzzNAM</code>,
<code>SMQzzCD</code>, <code>SMQzzSC</code>, <code>SMQzzSCN</code>, or
<code>CQzzNAM</code> the <code>derive_vars_query()</code> function can
be used. As input it expects a queries dataset, which provides the
definition of the queries. See <a href="queries_dataset.html">Queries
dataset documentation</a> for a detailed description of the queries
dataset. The <code>create_query_data()</code> function can be used to
create queries datasets.</p>
<p>The following example shows how to derive query variables for
Standardized MedDRA Queries (SMQs) in ADAE.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>queries <span class="ot">&lt;-</span> admiral<span class="sc">::</span>queries</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="5%" />
<col width="31%" />
<col width="6%" />
<col width="5%" />
<col width="5%" />
<col width="6%" />
<col width="33%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">PREFIX</th>
<th align="left">GRPNAME</th>
<th align="right">GRPID</th>
<th align="left">SCOPE</th>
<th align="right">SCOPEN</th>
<th align="left">SRCVAR</th>
<th align="left">TERMCHAR</th>
<th align="right">TERMNUM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">CQ01</td>
<td align="left">Dermatologic events</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">AELLT</td>
<td align="left">APPLICATION SITE ERYTHEMA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">CQ01</td>
<td align="left">Dermatologic events</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">AELLT</td>
<td align="left">APPLICATION SITE PRURITUS</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">CQ01</td>
<td align="left">Dermatologic events</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">AELLT</td>
<td align="left">ERYTHEMA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">CQ01</td>
<td align="left">Dermatologic events</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">AELLT</td>
<td align="left">LOCALIZED ERYTHEMA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">CQ01</td>
<td align="left">Dermatologic events</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">AELLT</td>
<td align="left">GENERALIZED PRURITUS</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">SMQ02</td>
<td align="left">Immune-Mediated Hypothyroidism</td>
<td align="right">20000160</td>
<td align="left">BROAD</td>
<td align="right">1</td>
<td align="left">AEDECOD</td>
<td align="left">BIOPSY THYROID GLAND ABNORMAL</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">SMQ02</td>
<td align="left">Immune-Mediated Hypothyroidism</td>
<td align="right">20000160</td>
<td align="left">BROAD</td>
<td align="right">1</td>
<td align="left">AEDECOD</td>
<td align="left">BLOOD THYROID STIMULATING HORMONE ABNORMAL</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">SMQ02</td>
<td align="left">Immune-Mediated Hypothyroidism</td>
<td align="right">20000160</td>
<td align="left">NARROW</td>
<td align="right">2</td>
<td align="left">AEDECOD</td>
<td align="left">BIOPSY THYROID GLAND INCREASED</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">SMQ03</td>
<td align="left">Immune-Mediated Guillain-Barre Syndrome</td>
<td align="right">20000131</td>
<td align="left">NARROW</td>
<td align="right">2</td>
<td align="left">AEDECOD</td>
<td align="left">GUILLAIN-BARRE SYNDROME</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">SMQ03</td>
<td align="left">Immune-Mediated Guillain-Barre Syndrome</td>
<td align="right">20000131</td>
<td align="left">NARROW</td>
<td align="right">2</td>
<td align="left">AEDECOD</td>
<td align="left">MILLER FISHER SYNDROME</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>adae1 <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="sc">~</span>USUBJID, <span class="sc">~</span>ASTDTM, <span class="sc">~</span>AETERM, <span class="sc">~</span>AESEQ, <span class="sc">~</span>AEDECOD, <span class="sc">~</span>AELLT, <span class="sc">~</span>AELLTCD,</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  <span class="st">&quot;01&quot;</span>, <span class="st">&quot;2020-06-02 23:59:59&quot;</span>, <span class="st">&quot;ALANINE AMINOTRANSFERASE ABNORMAL&quot;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>  <span class="dv">3</span>, <span class="st">&quot;Alanine aminotransferase abnormal&quot;</span>, <span class="cn">NA_character_</span>, <span class="cn">NA_integer_</span>,</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>  <span class="st">&quot;02&quot;</span>, <span class="st">&quot;2020-06-05 23:59:59&quot;</span>, <span class="st">&quot;BASEDOW&#39;S DISEASE&quot;</span>,</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>  <span class="dv">5</span>, <span class="st">&quot;Basedow&#39;s disease&quot;</span>, <span class="cn">NA_character_</span>, <span class="dv">1</span><span class="dt">L</span>,</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>  <span class="st">&quot;03&quot;</span>, <span class="st">&quot;2020-06-07 23:59:59&quot;</span>, <span class="st">&quot;SOME TERM&quot;</span>,</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>  <span class="dv">2</span>, <span class="st">&quot;Some query&quot;</span>, <span class="st">&quot;Some term&quot;</span>, <span class="cn">NA_integer_</span>,</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>  <span class="st">&quot;05&quot;</span>, <span class="st">&quot;2020-06-09 23:59:59&quot;</span>, <span class="st">&quot;ALVEOLAR PROTEINOSIS&quot;</span>,</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>  <span class="dv">7</span>, <span class="st">&quot;Alveolar proteinosis&quot;</span>, <span class="cn">NA_character_</span>, <span class="cn">NA_integer_</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>)</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a>adae_query <span class="ot">&lt;-</span> <span class="fu">derive_vars_query</span>(<span class="at">dataset =</span> adae1, <span class="at">dataset_queries =</span> queries)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="2%" />
<col width="6%" />
<col width="11%" />
<col width="2%" />
<col width="11%" />
<col width="3%" />
<col width="2%" />
<col width="3%" />
<col width="2%" />
<col width="2%" />
<col width="3%" />
<col width="3%" />
<col width="2%" />
<col width="2%" />
<col width="3%" />
<col width="9%" />
<col width="3%" />
<col width="2%" />
<col width="3%" />
<col width="2%" />
<col width="2%" />
<col width="2%" />
<col width="8%" />
<col width="3%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">ASTDTM</th>
<th align="left">AETERM</th>
<th align="right">AESEQ</th>
<th align="left">AEDECOD</th>
<th align="left">AELLT</th>
<th align="right">AELLTCD</th>
<th align="left">SMQ02NAM</th>
<th align="right">SMQ02CD</th>
<th align="left">SMQ02SC</th>
<th align="right">SMQ02SCN</th>
<th align="left">SMQ03NAM</th>
<th align="right">SMQ03CD</th>
<th align="left">SMQ03SC</th>
<th align="right">SMQ03SCN</th>
<th align="left">SMQ05NAM</th>
<th align="right">SMQ05CD</th>
<th align="left">SMQ05SC</th>
<th align="right">SMQ05SCN</th>
<th align="left">CQ01NAM</th>
<th align="left">CQ04NAM</th>
<th align="right">CQ04CD</th>
<th align="left">CQ06NAM</th>
<th align="right">CQ06CD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">2020-06-02 23:59:59</td>
<td align="left">ALANINE AMINOTRANSFERASE ABNORMAL</td>
<td align="right">3</td>
<td align="left">Alanine aminotransferase abnormal</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">2020-06-05 23:59:59</td>
<td align="left">BASEDOW’S DISEASE</td>
<td align="right">5</td>
<td align="left">Basedow’s disease</td>
<td align="left">NA</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Immune-Mediated Colitis</td>
<td align="right">10009888</td>
</tr>
<tr class="odd">
<td align="left">03</td>
<td align="left">2020-06-07 23:59:59</td>
<td align="left">SOME TERM</td>
<td align="right">2</td>
<td align="left">Some query</td>
<td align="left">Some term</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">05</td>
<td align="left">2020-06-09 23:59:59</td>
<td align="left">ALVEOLAR PROTEINOSIS</td>
<td align="right">7</td>
<td align="left">Alveolar proteinosis</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Immune-Mediated Pneumonitis</td>
<td align="right">20000042</td>
<td align="left">NARROW</td>
<td align="right">2</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>Similarly to SMQ, the <code>derive_vars_query()</code> function can
be used to derive Standardized Drug Groupings (SDG).</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>sdg <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  <span class="sc">~</span>PREFIX, <span class="sc">~</span>GRPNAME,          <span class="sc">~</span>GRPID, <span class="sc">~</span>SCOPE,  <span class="sc">~</span>SCOPEN, <span class="sc">~</span>SRCVAR,   <span class="sc">~</span>TERMCHAR,          <span class="sc">~</span>TERMNUM,</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="st">&quot;SDG01&quot;</span>, <span class="st">&quot;Diuretics&quot;</span>,           <span class="dv">11</span>, <span class="st">&quot;BROAD&quot;</span>, <span class="dv">1</span>,       <span class="st">&quot;CMDECOD&quot;</span>, <span class="st">&quot;Diuretic 1&quot;</span>,       <span class="cn">NA</span>,</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  <span class="st">&quot;SDG01&quot;</span>, <span class="st">&quot;Diuretics&quot;</span>,           <span class="dv">11</span>, <span class="st">&quot;BROAD&quot;</span>, <span class="dv">1</span>,       <span class="st">&quot;CMDECOD&quot;</span>, <span class="st">&quot;Diuretic 2&quot;</span>,       <span class="cn">NA</span>,</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>  <span class="st">&quot;SDG02&quot;</span>, <span class="st">&quot;Costicosteroids&quot;</span>,     <span class="dv">12</span>, <span class="st">&quot;BROAD&quot;</span>, <span class="dv">1</span>,       <span class="st">&quot;CMDECOD&quot;</span>, <span class="st">&quot;Costicosteroid 1&quot;</span>, <span class="cn">NA</span>,</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>  <span class="st">&quot;SDG02&quot;</span>, <span class="st">&quot;Costicosteroids&quot;</span>,     <span class="dv">12</span>, <span class="st">&quot;BROAD&quot;</span>, <span class="dv">1</span>,       <span class="st">&quot;CMDECOD&quot;</span>, <span class="st">&quot;Costicosteroid 2&quot;</span>, <span class="cn">NA</span>,</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>  <span class="st">&quot;SDG02&quot;</span>, <span class="st">&quot;Costicosteroids&quot;</span>,     <span class="dv">12</span>, <span class="st">&quot;BROAD&quot;</span>, <span class="dv">1</span>,       <span class="st">&quot;CMDECOD&quot;</span>, <span class="st">&quot;Costicosteroid 3&quot;</span>, <span class="cn">NA</span>,</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>)</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>adcm <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>  <span class="sc">~</span>USUBJID, <span class="sc">~</span>ASTDTM,               <span class="sc">~</span>CMDECOD,</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>  <span class="st">&quot;01&quot;</span>,     <span class="st">&quot;2020-06-02 23:59:59&quot;</span>, <span class="st">&quot;Diuretic 1&quot;</span>,</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>  <span class="st">&quot;02&quot;</span>,     <span class="st">&quot;2020-06-05 23:59:59&quot;</span>, <span class="st">&quot;Diuretic 1&quot;</span>,</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>  <span class="st">&quot;03&quot;</span>,     <span class="st">&quot;2020-06-07 23:59:59&quot;</span>, <span class="st">&quot;Costicosteroid 2&quot;</span>,</span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>  <span class="st">&quot;05&quot;</span>,     <span class="st">&quot;2020-06-09 23:59:59&quot;</span>, <span class="st">&quot;Diuretic 2&quot;</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a>)</span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a>adcm_query <span class="ot">&lt;-</span> <span class="fu">derive_vars_query</span>(adcm, sdg)</span></code></pre></div>
<table>
<colgroup>
<col width="6%" />
<col width="16%" />
<col width="14%" />
<col width="8%" />
<col width="6%" />
<col width="6%" />
<col width="7%" />
<col width="13%" />
<col width="6%" />
<col width="6%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">ASTDTM</th>
<th align="left">CMDECOD</th>
<th align="left">SDG01NAM</th>
<th align="right">SDG01CD</th>
<th align="left">SDG01SC</th>
<th align="right">SDG01SCN</th>
<th align="left">SDG02NAM</th>
<th align="right">SDG02CD</th>
<th align="left">SDG02SC</th>
<th align="right">SDG02SCN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">2020-06-02 23:59:59</td>
<td align="left">Diuretic 1</td>
<td align="left">Diuretics</td>
<td align="right">11</td>
<td align="left">BROAD</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">2020-06-05 23:59:59</td>
<td align="left">Diuretic 1</td>
<td align="left">Diuretics</td>
<td align="right">11</td>
<td align="left">BROAD</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">03</td>
<td align="left">2020-06-07 23:59:59</td>
<td align="left">Costicosteroid 2</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">Costicosteroids</td>
<td align="right">12</td>
<td align="left">BROAD</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">05</td>
<td align="left">2020-06-09 23:59:59</td>
<td align="left">Diuretic 2</td>
<td align="left">Diuretics</td>
<td align="right">11</td>
<td align="left">BROAD</td>
<td align="right">1</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
<div id="adsl_vars" class="section level2">
<h2>Add the <code>ADSL</code> variables</h2>
<p>If needed, the other <code>ADSL</code> variables can now be
added:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>adae <span class="ot">&lt;-</span> adae <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>    <span class="at">dataset_add =</span> <span class="fu">select</span>(adsl, <span class="sc">!!!</span><span class="fu">negate_vars</span>(adsl_vars)),</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="11%" />
<col width="36%" />
<col width="10%" />
<col width="5%" />
<col width="10%" />
<col width="10%" />
<col width="3%" />
<col width="5%" />
<col width="3%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">AEDECOD</th>
<th align="left">ASTDTM</th>
<th align="left">DTHDT</th>
<th align="left">RFSTDTC</th>
<th align="left">RFENDTC</th>
<th align="right">AGE</th>
<th align="left">AGEU</th>
<th align="left">SEX</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">APPLICATION SITE ERYTHEMA</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="right">63</td>
<td align="left">YEARS</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="left">APPLICATION SITE PRURITUS</td>
<td align="left">2014-01-03</td>
<td align="left">NA</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="right">63</td>
<td align="left">YEARS</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">DIARRHOEA</td>
<td align="left">2014-01-09</td>
<td align="left">NA</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="right">63</td>
<td align="left">YEARS</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">ERYTHEMA</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-02</td>
<td align="right">64</td>
<td align="left">YEARS</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">ERYTHEMA</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-02</td>
<td align="right">64</td>
<td align="left">YEARS</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">ERYTHEMA</td>
<td align="left">2012-08-07</td>
<td align="left">NA</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-02</td>
<td align="right">64</td>
<td align="left">YEARS</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">ATRIOVENTRICULAR BLOCK SECOND DEGREE</td>
<td align="left">2012-08-26</td>
<td align="left">NA</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-02</td>
<td align="right">64</td>
<td align="left">YEARS</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="left">2012-09-13</td>
<td align="left">NA</td>
<td align="left">2012-09-02</td>
<td align="left">2012-12-24</td>
<td align="right">71</td>
<td align="left">YEARS</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="left">01-703-1086</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="left">2012-09-13</td>
<td align="left">NA</td>
<td align="left">2012-09-02</td>
<td align="left">2012-12-24</td>
<td align="right">71</td>
<td align="left">YEARS</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">01-703-1086</td>
<td align="left">APPLICATION SITE IRRITATION</td>
<td align="left">2012-09-13</td>
<td align="left">NA</td>
<td align="left">2012-09-02</td>
<td align="left">2012-12-24</td>
<td align="right">71</td>
<td align="left">YEARS</td>
<td align="left">M</td>
</tr>
</tbody>
</table>
</div>
<div id="aseq" class="section level2">
<h2>Derive Analysis Sequence Number</h2>
<p>The function <code>derive_var_obs_number()</code> can be used for
deriving <code>ASEQ</code> variable to ensure the uniqueness of subject
records within the dataset.</p>
<p>For example, there can be multiple records present in
<code>ADCM</code> for a single subject with the same <code>ASTDTM</code>
and <code>CMSEQ</code> variables. But these records still differ at ATC
level:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>adcm <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  <span class="sc">~</span>USUBJID,       <span class="sc">~</span>ASTDTM,          <span class="sc">~</span>CMSEQ, <span class="sc">~</span>CMDECOD,         <span class="sc">~</span>ATC1CD, <span class="sc">~</span>ATC2CD, <span class="sc">~</span>ATC3CD, <span class="sc">~</span>ATC4CD,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;2013-07-05 UTC&quot;</span>, <span class="st">&quot;14&quot;</span>,   <span class="st">&quot;PARACETAMOL&quot;</span>,    <span class="st">&quot;N&quot;</span>,     <span class="st">&quot;N02&quot;</span>,   <span class="st">&quot;N02B&quot;</span>,  <span class="st">&quot;N02BE&quot;</span>,</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>  <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;2013-08-15 UTC&quot;</span>, <span class="st">&quot;18&quot;</span>,   <span class="st">&quot;SOLUMEDROL&quot;</span>,     <span class="st">&quot;D&quot;</span>,     <span class="st">&quot;D10&quot;</span>,   <span class="st">&quot;D10A&quot;</span>,  <span class="st">&quot;D10AA&quot;</span>,</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>  <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;2013-08-15 UTC&quot;</span>, <span class="st">&quot;18&quot;</span>,   <span class="st">&quot;SOLUMEDROL&quot;</span>,     <span class="st">&quot;D&quot;</span>,     <span class="st">&quot;D07&quot;</span>,   <span class="st">&quot;D07A&quot;</span>,  <span class="st">&quot;D07AA&quot;</span>,</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>  <span class="st">&quot;BP40257-1001&quot;</span>, <span class="st">&quot;2013-08-15 UTC&quot;</span>, <span class="st">&quot;18&quot;</span>,   <span class="st">&quot;SOLUMEDROL&quot;</span>,     <span class="st">&quot;H&quot;</span>,     <span class="st">&quot;H02&quot;</span>,   <span class="st">&quot;H02A&quot;</span>,  <span class="st">&quot;H02AB&quot;</span>,</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>  <span class="st">&quot;BP40257-1002&quot;</span>, <span class="st">&quot;2012-12-15 UTC&quot;</span>, <span class="st">&quot;19&quot;</span>,   <span class="st">&quot;SPIRONOLACTONE&quot;</span>, <span class="st">&quot;C&quot;</span>,     <span class="st">&quot;C03&quot;</span>,   <span class="st">&quot;C03D&quot;</span>,  <span class="st">&quot;C03DA&quot;</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>)</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a>adcm_aseq <span class="ot">&lt;-</span> adcm <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>  <span class="fu">derive_var_obs_number</span>(</span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>    <span class="at">by_vars    =</span> <span class="fu">exprs</span>(USUBJID),</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>    <span class="at">order      =</span> <span class="fu">exprs</span>(ASTDTM, CMSEQ, ATC1CD, ATC2CD, ATC3CD, ATC4CD),</span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>    <span class="at">new_var    =</span> ASEQ,</span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a>    <span class="at">check_type =</span> <span class="st">&quot;error&quot;</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a>  )</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="15%" />
<col width="18%" />
<col width="7%" />
<col width="18%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">ASTDTM</th>
<th align="left">CMSEQ</th>
<th align="left">CMDECOD</th>
<th align="left">ATC1CD</th>
<th align="left">ATC2CD</th>
<th align="left">ATC3CD</th>
<th align="left">ATC4CD</th>
<th align="right">ASEQ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">BP40257-1001</td>
<td align="left">2013-07-05 UTC</td>
<td align="left">14</td>
<td align="left">PARACETAMOL</td>
<td align="left">N</td>
<td align="left">N02</td>
<td align="left">N02B</td>
<td align="left">N02BE</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">BP40257-1001</td>
<td align="left">2013-08-15 UTC</td>
<td align="left">18</td>
<td align="left">SOLUMEDROL</td>
<td align="left">D</td>
<td align="left">D07</td>
<td align="left">D07A</td>
<td align="left">D07AA</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">BP40257-1001</td>
<td align="left">2013-08-15 UTC</td>
<td align="left">18</td>
<td align="left">SOLUMEDROL</td>
<td align="left">D</td>
<td align="left">D10</td>
<td align="left">D10A</td>
<td align="left">D10AA</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">BP40257-1001</td>
<td align="left">2013-08-15 UTC</td>
<td align="left">18</td>
<td align="left">SOLUMEDROL</td>
<td align="left">H</td>
<td align="left">H02</td>
<td align="left">H02A</td>
<td align="left">H02AB</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">BP40257-1002</td>
<td align="left">2012-12-15 UTC</td>
<td align="left">19</td>
<td align="left">SPIRONOLACTONE</td>
<td align="left">C</td>
<td align="left">C03</td>
<td align="left">C03D</td>
<td align="left">C03DA</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
<div id="attributes" class="section level2">
<h2>Add Labels and Attributes</h2>
<p>Adding labels and attributes for SAS transport files is supported by
the following packages:</p>
<ul>
<li><p><a href="https://atorus-research.github.io/metacore/">metacore</a>:
establish a common foundation for the use of metadata within an R
session.</p></li>
<li><p><a href="https://pharmaverse.github.io/metatools/">metatools</a>:
enable the use of metacore objects. Metatools can be used to build
datasets or enhance columns in existing datasets as well as checking
datasets against the metadata.</p></li>
<li><p><a href="https://atorus-research.github.io/xportr/">xportr</a>:
functionality to associate all metadata information to a local R data
frame, perform data set level validation checks and convert into a <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/movefile/n1xbwdre0giahfn11c99yjkpi2yb.htm">transport
v5 file(xpt)</a>.</p></li>
</ul>
<p>NOTE: All these packages are in the experimental phase, but the
vision is to have them associated with an End to End pipeline under the
umbrella of the <a href="https://github.com/pharmaverse">pharmaverse</a>. An example of
applying metadata and perform associated checks can be found at the <a href="https://pharmaverse.github.io/examples/adam/adsl">pharmaverse E2E
example</a>.</p>
</div>
</div>
<div id="example-scripts" class="section level1">
<h1>Example Scripts</h1>
<table>
<thead>
<tr class="header">
<th>ADaM</th>
<th>Sourcing Command</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ADAE</td>
<td><code>use_ad_template(&quot;ADAE&quot;)</code></td>
</tr>
<tr class="even">
<td>ADCM</td>
<td><code>use_ad_template(&quot;ADCM&quot;)</code></td>
</tr>
</tbody>
</table>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
