<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Creating a BDS Time-to-Event ADaM</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Creating a BDS Time-to-Event ADaM</h1>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This article describes creating a BDS time-to-event ADaM.</p>
<p>The main part in programming a time-to-event dataset is the
definition of the events and censoring times. <code>{admiral}</code>
supports single events like death or composite events like disease
progression or death. More than one source dataset can be used for the
definition of the event and censoring times.</p>
<p><strong>Note</strong>: <em>All examples assume CDISC SDTM and/or ADaM
format as input unless otherwise specified.</em></p>
<div id="required-packages" class="section level2">
<h2>Required Packages</h2>
<p>The examples of this vignette require the following packages.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(admiral)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(pharmaversesdtm)</span></code></pre></div>
</div>
</div>
<div id="programming-workflow" class="section level1">
<h1>Programming Workflow</h1>
<ul>
<li><a href="#readdata">Read in Data</a></li>
<li><a href="#parameters">Derive Parameters (<code>CNSR</code>,
<code>ADT</code>, <code>STARTDT</code>)</a></li>
<li><a href="#aval">Derive Analysis Value (<code>AVAL</code>)</a></li>
<li><a href="#aseq">Derive Analysis Sequence Number
(<code>ASEQ</code>)</a></li>
<li><a href="#adslvars">Add ADSL Variables</a></li>
<li><a href="#attributes">Add Labels and Attributes</a></li>
</ul>
<div id="readdata" class="section level2">
<h2>Read in Data</h2>
<p>To start, all datasets needed for the creation of the time-to-event
dataset should be read into the environment. This will be a company
specific process.</p>
<p>For example purpose, the ADSL dataset—which is included in
<code>{admiral}</code>—and the SDTM datasets from
<code>{pharmaversesdtm}</code> are used.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>ae <span class="ot">&lt;-</span> pharmaversesdtm<span class="sc">::</span>ae</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> admiral<span class="sc">::</span>admiral_adsl</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>ae <span class="ot">&lt;-</span> <span class="fu">convert_blanks_to_na</span>(ae)</span></code></pre></div>
<p>The following code creates a minimally viable ADAE dataset to be used
throughout the following examples.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>adae <span class="ot">&lt;-</span> ae <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">left_join</span>(adsl, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;STUDYID&quot;</span>, <span class="st">&quot;USUBJID&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="fu">derive_vars_dt</span>(</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    <span class="at">new_vars_prefix =</span> <span class="st">&quot;AST&quot;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="at">dtc =</span> AESTDTC,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  <span class="fu">derive_vars_dt</span>(</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>    <span class="at">new_vars_prefix =</span> <span class="st">&quot;AEN&quot;</span>,</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>    <span class="at">dtc =</span> AEENDTC,</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>    <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span>,</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>    <span class="at">date_imputation =</span> <span class="st">&quot;last&quot;</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRTEMFL =</span> <span class="fu">if_else</span>(ASTDT <span class="sc">&gt;=</span> TRTSDT <span class="sc">&amp;</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>    AENDT <span class="sc">&lt;=</span> TRTEDT <span class="sc">+</span> <span class="fu">days</span>(<span class="dv">30</span>), <span class="st">&quot;Y&quot;</span>, <span class="cn">NA_character_</span>))</span></code></pre></div>
</div>
<div id="parameters" class="section level2">
<h2>Derive Parameters (<code>CNSR</code>, <code>ADT</code>,
<code>STARTDT</code>)</h2>
<p>To derive the parameter dependent variables like <code>CNSR</code>,
<code>ADT</code>, <code>STARTDT</code>, <code>EVNTDESC</code>,
<code>SRCDOM</code>, <code>PARAMCD</code>, … the
<code>derive_param_tte()</code> function can be used. It adds one
parameter to the input dataset with one observation per subject. Usually
it is called several times.</p>
<p>For each subject it is determined if an event occurred. In the
affirmative the analysis date <code>ADT</code> is set to the earliest
event date. If no event occurred, the analysis date is set to the latest
censoring date.</p>
<p>The events and censorings are defined by the
<code>event_source()</code> and the <code>censor_source()</code> class
respectively. It defines</p>
<ul>
<li>which observations (<code>filter</code> parameter) of a source
dataset (<code>dataset_name</code> parameter) are potential events or
censorings,</li>
<li>the value of the <code>CNSR</code> variable (<code>censor</code>
parameter), and</li>
<li>which variable provides the date (<code>date</code> parameter).</li>
</ul>
<p>The date can be provided as date (<code>--DT</code> variable) or
datetime (<code>--DTM</code> variable).</p>
<p>CDISC strongly recommends <code>CNSR = 0</code> for events and
positive integers for censorings. <code>{admiral}</code> enforces this
recommendation. Therefore the <code>censor</code> parameter is available
for <code>censor_source()</code> only. It is defaulted to
<code>1</code>.</p>
<p>The <code>dataset_name</code> parameter expects a character value
which is used as an identifier. The actual data which is used for the
derivation of the parameter is provided via the
<code>source_datasets</code> parameter of
<code>derive_param_tte()</code>. It expects a named list of datasets.
The names correspond to the identifiers specified for the
<code>dataset_name</code> parameter. This allows to define events and
censoring independent of the data.</p>
<div id="pre-defined-time-to-event-source-objects" class="section level3">
<h3>Pre-Defined Time-to-Event Source Objects</h3>
<p>The table below shows all pre-defined <code>tte_source</code> objects
which should cover the most common use cases.</p>
<table>
<colgroup>
<col width="8%" />
<col width="6%" />
<col width="23%" />
<col width="4%" />
<col width="3%" />
<col width="53%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">object</th>
<th align="left">dataset_name</th>
<th align="left">filter</th>
<th align="left">date</th>
<th align="right">censor</th>
<th align="left">set_values_to</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ae_gr3_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y” &amp; ATOXGR == “3”</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “GRADE 3 ADVERSE EVENT”<br>SRCDOM:
“ADAE”<br>SRCVAR: “ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="even">
<td align="left">ae_wd_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y” &amp; AEACN == “DRUG WITHDRAWN”</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “ADVERSE EVENT LEADING TO DRUG
WITHDRAWAL”<br>SRCDOM: “ADAE”<br>SRCVAR: “ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="odd">
<td align="left">ae_gr35_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y” &amp; ATOXGR %in% c(“3”, “4”, “5”)</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “GRADE 3-5 ADVERSE EVENT”<br>SRCDOM:
“ADAE”<br>SRCVAR: “ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="even">
<td align="left">lastalive_censor</td>
<td align="left">adsl</td>
<td align="left">NULL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">EVNTDESC: “ALIVE”<br>SRCDOM: “ADSL”<br>SRCVAR:
“LSTALVDT”</td>
</tr>
<tr class="odd">
<td align="left">ae_gr1_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y” &amp; ATOXGR == “1”</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “GRADE 1 ADVERSE EVENT”<br>SRCDOM:
“ADAE”<br>SRCVAR: “ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="even">
<td align="left">ae_ser_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y” &amp; AESER == “Y”</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “SERIOUS ADVERSE EVENT”<br>SRCDOM:
“ADAE”<br>SRCVAR: “ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="odd">
<td align="left">ae_gr2_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y” &amp; ATOXGR == “2”</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “GRADE 2 ADVERSE EVENT”<br>SRCDOM:
“ADAE”<br>SRCVAR: “ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="even">
<td align="left">ae_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y”</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “ADVERSE EVENT”<br>SRCDOM: “ADAE”<br>SRCVAR:
“ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="odd">
<td align="left">ae_gr4_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y” &amp; ATOXGR == “4”</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “GRADE 4 ADVERSE EVENT”<br>SRCDOM:
“ADAE”<br>SRCVAR: “ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="even">
<td align="left">ae_gr5_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y” &amp; ATOXGR == “5”</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “GRADE 5 ADVERSE EVENT”<br>SRCDOM:
“ADAE”<br>SRCVAR: “ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="odd">
<td align="left">ae_sev_event</td>
<td align="left">adae</td>
<td align="left">TRTEMFL == “Y” &amp; AESEV == “SEVERE”</td>
<td align="left">ASTDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “SEVERE ADVERSE EVENT”<br>SRCDOM:
“ADAE”<br>SRCVAR: “ASTDT”<br>SRCSEQ: AESEQ</td>
</tr>
<tr class="even">
<td align="left">death_event</td>
<td align="left">adsl</td>
<td align="left">DTHFL == “Y”</td>
<td align="left">DTHDT</td>
<td align="right">0</td>
<td align="left">EVNTDESC: “DEATH”<br>SRCDOM: “ADSL”<br>SRCVAR:
“DTHDT”</td>
</tr>
</tbody>
</table>
<p>These pre-defined objects can be passed directly to
<code>derive_param_tte()</code> to create a new time-to-event
parameter.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>adtte <span class="ot">&lt;-</span> <span class="fu">derive_param_tte</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="at">dataset_adsl =</span> adsl,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="at">start_date =</span> TRTSDT,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="at">event_conditions =</span> <span class="fu">list</span>(ae_ser_event),</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="at">censor_conditions =</span> <span class="fu">list</span>(lastalive_censor),</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>  <span class="at">source_datasets =</span> <span class="fu">list</span>(<span class="at">adsl =</span> adsl, <span class="at">adae =</span> adae),</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">PARAMCD =</span> <span class="st">&quot;TTAESER&quot;</span>, <span class="at">PARAM =</span> <span class="st">&quot;Time to First Serious AE&quot;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>)</span></code></pre></div>
<table>
<colgroup>
<col width="16%" />
<col width="11%" />
<col width="34%" />
<col width="15%" />
<col width="15%" />
<col width="6%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">PARAMCD</th>
<th align="left">PARAM</th>
<th align="left">STARTDT</th>
<th align="left">ADT</th>
<th align="right">CNSR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-02</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2013-07-19</td>
<td align="left">2014-01-14</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2014-03-18</td>
<td align="left">2014-04-14</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2014-07-01</td>
<td align="left">2014-12-30</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2013-02-12</td>
<td align="left">2013-04-07</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-701-1097</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2014-01-01</td>
<td align="left">2014-07-09</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1111</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2012-09-07</td>
<td align="left">2012-09-17</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-701-1115</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2012-11-30</td>
<td align="left">2013-01-23</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1118</td>
<td align="left">TTAESER</td>
<td align="left">Time to First Serious AE</td>
<td align="left">2014-03-12</td>
<td align="left">2014-09-09</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
<div id="single-event" class="section level3">
<h3>Single Event</h3>
<p>For example, the overall survival time could be defined from
treatment start to death. Patients alive or lost to follow-up would be
censored to the last alive date. The following call defines a death
event based on ADSL variables.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>death <span class="ot">&lt;-</span> <span class="fu">event_source</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">filter =</span> DTHFL <span class="sc">==</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="at">date =</span> DTHDT</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>)</span></code></pre></div>
<p>A corresponding censoring based on the last known alive date can be
defined by the following call.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>lstalv <span class="ot">&lt;-</span> <span class="fu">censor_source</span>(</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="at">date =</span> LSTALVDT</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>)</span></code></pre></div>
<p>The definitions can be passed to <code>derive_param_tte()</code> to
create a new time-to-event parameter.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>adtte <span class="ot">&lt;-</span> <span class="fu">derive_param_tte</span>(</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="at">dataset_adsl =</span> adsl,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="at">source_datasets =</span> <span class="fu">list</span>(<span class="at">adsl =</span> adsl),</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="at">start_date =</span> TRTSDT,</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="at">event_conditions =</span> <span class="fu">list</span>(death),</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="at">censor_conditions =</span> <span class="fu">list</span>(lstalv),</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">PARAMCD =</span> <span class="st">&quot;OS&quot;</span>, <span class="at">PARAM =</span> <span class="st">&quot;Overall Survival&quot;</span>)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">PARAMCD</th>
<th align="left">PARAM</th>
<th align="left">STARTDT</th>
<th align="left">ADT</th>
<th align="right">CNSR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-02</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2013-07-19</td>
<td align="left">2014-01-14</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2014-03-18</td>
<td align="left">2014-04-14</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2014-07-01</td>
<td align="left">2014-12-30</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2013-02-12</td>
<td align="left">2013-04-07</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-701-1097</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2014-01-01</td>
<td align="left">2014-07-09</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1111</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2012-09-07</td>
<td align="left">2012-09-17</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-701-1115</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2012-11-30</td>
<td align="left">2013-01-23</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1118</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="left">2014-03-12</td>
<td align="left">2014-09-09</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Note that in practice for efficacy parameters you might use
randomization date as the time to event origin date.</p>
</div>
<div id="add-additional-information-for-events-and-censoring-evntdesc-srcvar" class="section level3">
<h3>Add Additional Information for Events and Censoring
(<code>EVNTDESC</code>, <code>SRCVAR</code>, …)</h3>
<p>To add additional information like event or censoring description
(<code>EVNTDESC</code>) or source variable (<code>SRCVAR</code>) the
<code>set_values_to</code> parameter can be specified in the
event/censoring definition.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># define death event #</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>death <span class="ot">&lt;-</span> <span class="fu">event_source</span>(</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="at">filter =</span> DTHFL <span class="sc">==</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="at">date =</span> DTHDT,</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;DEATH&quot;</span>,</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;ADSL&quot;</span>,</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;DTHDT&quot;</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>  )</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>)</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co"># define censoring at last known alive date #</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>lstalv <span class="ot">&lt;-</span> <span class="fu">censor_source</span>(</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>  <span class="at">date =</span> LSTALVDT,</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;LAST KNOWN ALIVE DATE&quot;</span>,</span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;ADSL&quot;</span>,</span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;LSTALVDT&quot;</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>  )</span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a>)</span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a><span class="co"># derive time-to-event parameter #</span></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a>adtte <span class="ot">&lt;-</span> <span class="fu">derive_param_tte</span>(</span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a>  <span class="at">dataset_adsl =</span> adsl,</span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a>  <span class="at">source_datasets =</span> <span class="fu">list</span>(<span class="at">adsl =</span> adsl),</span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a>  <span class="at">event_conditions =</span> <span class="fu">list</span>(death),</span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a>  <span class="at">censor_conditions =</span> <span class="fu">list</span>(lstalv),</span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">PARAMCD =</span> <span class="st">&quot;OS&quot;</span>, <span class="at">PARAM =</span> <span class="st">&quot;Overall Survival&quot;</span>)</span>
<span id="cb8-31"><a href="#cb8-31" tabindex="-1"></a>)</span></code></pre></div>
<table>
<colgroup>
<col width="18%" />
<col width="33%" />
<col width="10%" />
<col width="13%" />
<col width="7%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">EVNTDESC</th>
<th align="left">SRCDOM</th>
<th align="left">SRCVAR</th>
<th align="right">CNSR</th>
<th align="left">ADT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-07-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2012-09-02</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-01-14</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-04-14</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-12-30</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2013-04-07</td>
</tr>
<tr class="odd">
<td align="left">01-701-1097</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-07-09</td>
</tr>
<tr class="even">
<td align="left">01-701-1111</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2012-09-17</td>
</tr>
<tr class="odd">
<td align="left">01-701-1115</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2013-01-23</td>
</tr>
<tr class="even">
<td align="left">01-701-1118</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-09-09</td>
</tr>
</tbody>
</table>
</div>
<div id="handling-subjects-without-assessment" class="section level3">
<h3>Handling Subjects Without Assessment</h3>
<p>If a subject has no event and has no record meeting the censoring
rule, it will not be included in the output dataset. In order to have a
record for this subject in the output dataset, another
<code>censoring_source()</code> object should be created to specify how
those patients will be censored. Therefore the <code>start</code>
censoring is defined below to achieve that subjects without data in
<code>adrs</code> are censored at the start date.</p>
<p>The ADaM IG requires that a computed date must be accompanied by
imputation flags. Thus, if the function detects a <code>--DTF</code>
and/or <code>--TMF</code> variable corresponding to
<code>start_date</code> then <code>STARTDTF</code> and
<code>STARTTMF</code> are set automatically to the values of these
variables. If a date variable from one of the event or censoring source
datasets is imputed, the imputation flag can be specified for the
<code>set_values_to</code> parameter in <code>event_source()</code> or
<code>censor_source()</code> (see definition of the <code>start</code>
censoring below).</p>
<p>As the CDISC pilot does not contain a <code>RS</code> dataset, the
following example for progression free survival uses manually created
datasets.</p>
<pre><code>View(adsl)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">DTHFL</th>
<th align="left">DTHDT</th>
<th align="left">TRTSDT</th>
<th align="left">TRTSDTF</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">Y</td>
<td align="left">2021-06-12</td>
<td align="left">2021-01-01</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">N</td>
<td align="left">NA</td>
<td align="left">2021-02-03</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">03</td>
<td align="left">Y</td>
<td align="left">2021-08-21</td>
<td align="left">2021-08-10</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">04</td>
<td align="left">N</td>
<td align="left">NA</td>
<td align="left">2021-02-03</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">05</td>
<td align="left">N</td>
<td align="left">NA</td>
<td align="left">2021-04-01</td>
<td align="left">D</td>
</tr>
</tbody>
</table>
<pre><code>View(adrs)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">AVALC</th>
<th align="left">ADT</th>
<th align="right">ASEQ</th>
<th align="left">PARAMCD</th>
<th align="left">PARAM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">SD</td>
<td align="left">2021-01-03</td>
<td align="right">1</td>
<td align="left">OVR</td>
<td align="left">Overall Response</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">PR</td>
<td align="left">2021-03-04</td>
<td align="right">2</td>
<td align="left">OVR</td>
<td align="left">Overall Response</td>
</tr>
<tr class="odd">
<td align="left">01</td>
<td align="left">PD</td>
<td align="left">2021-05-05</td>
<td align="right">3</td>
<td align="left">OVR</td>
<td align="left">Overall Response</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">PD</td>
<td align="left">2021-02-03</td>
<td align="right">1</td>
<td align="left">OVR</td>
<td align="left">Overall Response</td>
</tr>
<tr class="odd">
<td align="left">04</td>
<td align="left">SD</td>
<td align="left">2021-02-13</td>
<td align="right">1</td>
<td align="left">OVR</td>
<td align="left">Overall Response</td>
</tr>
<tr class="even">
<td align="left">04</td>
<td align="left">PR</td>
<td align="left">2021-04-14</td>
<td align="right">2</td>
<td align="left">OVR</td>
<td align="left">Overall Response</td>
</tr>
<tr class="odd">
<td align="left">04</td>
<td align="left">CR</td>
<td align="left">2021-05-15</td>
<td align="right">3</td>
<td align="left">OVR</td>
<td align="left">Overall Response</td>
</tr>
</tbody>
</table>
<p>An event for progression free survival occurs if</p>
<ul>
<li>progression of disease is observed or</li>
<li>the subject dies.</li>
</ul>
<p>Therefore two <code>event_source()</code> objects are defined:</p>
<ul>
<li><code>pd</code> for progression of disease and</li>
<li><code>death</code> for death.</li>
</ul>
<p>Some subjects may experience both events. In this case the first one
is selected by <code>derive_param_tte()</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># progressive disease event #</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>pd <span class="ot">&lt;-</span> <span class="fu">event_source</span>(</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adrs&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="at">filter =</span> AVALC <span class="sc">==</span> <span class="st">&quot;PD&quot;</span>,</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  <span class="at">date =</span> ADT,</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;PD&quot;</span>,</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;ADRS&quot;</span>,</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;ADT&quot;</span>,</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>    <span class="at">SRCSEQ =</span> ASEQ</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>  )</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>)</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co"># death event #</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>death <span class="ot">&lt;-</span> <span class="fu">event_source</span>(</span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a>  <span class="at">filter =</span> DTHFL <span class="sc">==</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a>  <span class="at">date =</span> DTHDT,</span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;DEATH&quot;</span>,</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;ADSL&quot;</span>,</span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;DTHDT&quot;</span></span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a>  )</span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a>)</span></code></pre></div>
<p>Subjects without event must be censored at the last tumor assessment.
For the censoring the <code>lastvisit</code> object is defined as
<em>all</em> tumor assessments. Please note that it is not necessary to
select the last one or exclude assessments which resulted in progression
of disease. This is handled within <code>derive_param_tte()</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># last tumor assessment censoring (CNSR = 1 by default) #</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>lastvisit <span class="ot">&lt;-</span> <span class="fu">censor_source</span>(</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adrs&quot;</span>,</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>  <span class="at">date =</span> ADT,</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;LAST TUMOR ASSESSMENT&quot;</span>,</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;ADRS&quot;</span>,</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;ADT&quot;</span>,</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    <span class="at">SRCSEQ =</span> ASEQ</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>  )</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>)</span></code></pre></div>
<p>Patients without tumor assessment should be censored at the start
date. Therefore the <code>start</code> object is defined with the
treatment start date as censoring date. It is not necessary to exclude
patient with tumor assessment in the definition of <code>start</code>
because <code>derive_param_tte()</code> selects the last date across all
<code>censor_source()</code> objects as censoring date.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># start date censoring (for patients without tumor assessment) (CNSR = 2) #</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>start <span class="ot">&lt;-</span> <span class="fu">censor_source</span>(</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="at">date =</span> TRTSDT,</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="at">censor =</span> <span class="dv">2</span>,</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;TREATMENT START&quot;</span>,</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;ADSL&quot;</span>,</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;TRTSDT&quot;</span>,</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>    <span class="at">ADTF =</span> TRTSDTF</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>  )</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>)</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="co"># derive time-to-event parameter #</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>adtte <span class="ot">&lt;-</span> <span class="fu">derive_param_tte</span>(</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>  <span class="at">dataset_adsl =</span> adsl,</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>  <span class="at">source_datasets =</span> <span class="fu">list</span>(<span class="at">adsl =</span> adsl, <span class="at">adrs =</span> adrs),</span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a>  <span class="at">start_date =</span> TRTSDT,</span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a>  <span class="at">event_conditions =</span> <span class="fu">list</span>(pd, death),</span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a>  <span class="at">censor_conditions =</span> <span class="fu">list</span>(lastvisit, start),</span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">PARAMCD =</span> <span class="st">&quot;PFS&quot;</span>, <span class="at">PARAM =</span> <span class="st">&quot;Progression Free Survival&quot;</span>)</span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">PARAMCD</th>
<th align="left">STARTDT</th>
<th align="left">ADT</th>
<th align="left">ADTF</th>
<th align="right">CNSR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">PFS</td>
<td align="left">2021-01-01</td>
<td align="left">2021-05-05</td>
<td align="left">NA</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">PFS</td>
<td align="left">2021-02-03</td>
<td align="left">2021-02-03</td>
<td align="left">NA</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">03</td>
<td align="left">PFS</td>
<td align="left">2021-08-10</td>
<td align="left">2021-08-21</td>
<td align="left">NA</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">04</td>
<td align="left">PFS</td>
<td align="left">2021-02-03</td>
<td align="left">2021-05-15</td>
<td align="left">NA</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">05</td>
<td align="left">PFS</td>
<td align="left">2021-04-01</td>
<td align="left">2021-04-01</td>
<td align="left">D</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
</div>
<div id="deriving-a-series-of-time-to-event-parameters" class="section level3">
<h3>Deriving a Series of Time-to-Event Parameters</h3>
<p>If several similar time-to-event parameters need to be derived the
<code>call_derivation()</code> function is useful.</p>
<p>In the following example parameters for time to first AE, time to
first serious AE, and time to first related AE are derived. The
censoring is the same for all three. Only the definition of the event
differs.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># define censoring #</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>observation_end <span class="ot">&lt;-</span> <span class="fu">censor_source</span>(</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">pmin</span>(TRTEDT <span class="sc">+</span> <span class="fu">days</span>(<span class="dv">30</span>), EOSDT),</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  <span class="at">censor =</span> <span class="dv">1</span>,</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;END OF TREATMENT&quot;</span>,</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;ADSL&quot;</span>,</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;TRTEDT&quot;</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>  )</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>)</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co"># define time to first AE #</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>tt_ae <span class="ot">&lt;-</span> <span class="fu">event_source</span>(</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>  <span class="at">date =</span> ASTDT,</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>  <span class="at">order =</span> <span class="fu">exprs</span>(AESEQ),</span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;ADVERSE EVENT&quot;</span>,</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;AE&quot;</span>,</span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;AESTDTC&quot;</span>,</span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>    <span class="at">SRCSEQ =</span> AESEQ</span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>  )</span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>)</span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a><span class="co"># define time to first serious AE #</span></span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a>tt_ser_ae <span class="ot">&lt;-</span> <span class="fu">event_source</span>(</span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a>  <span class="at">filter =</span> AESER <span class="sc">==</span> <span class="st">&quot;Y&quot;</span>,</span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a>  <span class="at">date =</span> ASTDT,</span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a>  <span class="at">order =</span> <span class="fu">exprs</span>(AESEQ),</span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;SERIOUS ADVERSE EVENT&quot;</span>,</span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;AE&quot;</span>,</span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;AESTDTC&quot;</span>,</span>
<span id="cb14-36"><a href="#cb14-36" tabindex="-1"></a>    <span class="at">SRCSEQ =</span> AESEQ</span>
<span id="cb14-37"><a href="#cb14-37" tabindex="-1"></a>  )</span>
<span id="cb14-38"><a href="#cb14-38" tabindex="-1"></a>)</span>
<span id="cb14-39"><a href="#cb14-39" tabindex="-1"></a></span>
<span id="cb14-40"><a href="#cb14-40" tabindex="-1"></a><span class="co"># define time to first related AE #</span></span>
<span id="cb14-41"><a href="#cb14-41" tabindex="-1"></a>tt_rel_ae <span class="ot">&lt;-</span> <span class="fu">event_source</span>(</span>
<span id="cb14-42"><a href="#cb14-42" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb14-43"><a href="#cb14-43" tabindex="-1"></a>  <span class="at">filter =</span> AEREL <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;PROBABLE&quot;</span>, <span class="st">&quot;POSSIBLE&quot;</span>, <span class="st">&quot;REMOTE&quot;</span>),</span>
<span id="cb14-44"><a href="#cb14-44" tabindex="-1"></a>  <span class="at">date =</span> ASTDT,</span>
<span id="cb14-45"><a href="#cb14-45" tabindex="-1"></a>  <span class="at">order =</span> <span class="fu">exprs</span>(AESEQ),</span>
<span id="cb14-46"><a href="#cb14-46" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb14-47"><a href="#cb14-47" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;RELATED ADVERSE EVENT&quot;</span>,</span>
<span id="cb14-48"><a href="#cb14-48" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;AE&quot;</span>,</span>
<span id="cb14-49"><a href="#cb14-49" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;AESTDTC&quot;</span>,</span>
<span id="cb14-50"><a href="#cb14-50" tabindex="-1"></a>    <span class="at">SRCSEQ =</span> AESEQ</span>
<span id="cb14-51"><a href="#cb14-51" tabindex="-1"></a>  )</span>
<span id="cb14-52"><a href="#cb14-52" tabindex="-1"></a>)</span>
<span id="cb14-53"><a href="#cb14-53" tabindex="-1"></a></span>
<span id="cb14-54"><a href="#cb14-54" tabindex="-1"></a><span class="co"># derive all three time to event parameters #</span></span>
<span id="cb14-55"><a href="#cb14-55" tabindex="-1"></a>adaette <span class="ot">&lt;-</span> <span class="fu">call_derivation</span>(</span>
<span id="cb14-56"><a href="#cb14-56" tabindex="-1"></a>  <span class="at">derivation =</span> derive_param_tte,</span>
<span id="cb14-57"><a href="#cb14-57" tabindex="-1"></a>  <span class="at">variable_params =</span> <span class="fu">list</span>(</span>
<span id="cb14-58"><a href="#cb14-58" tabindex="-1"></a>    <span class="fu">params</span>(</span>
<span id="cb14-59"><a href="#cb14-59" tabindex="-1"></a>      <span class="at">event_conditions =</span> <span class="fu">list</span>(tt_ae),</span>
<span id="cb14-60"><a href="#cb14-60" tabindex="-1"></a>      <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">PARAMCD =</span> <span class="st">&quot;TTAE&quot;</span>)</span>
<span id="cb14-61"><a href="#cb14-61" tabindex="-1"></a>    ),</span>
<span id="cb14-62"><a href="#cb14-62" tabindex="-1"></a>    <span class="fu">params</span>(</span>
<span id="cb14-63"><a href="#cb14-63" tabindex="-1"></a>      <span class="at">event_conditions =</span> <span class="fu">list</span>(tt_ser_ae),</span>
<span id="cb14-64"><a href="#cb14-64" tabindex="-1"></a>      <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">PARAMCD =</span> <span class="st">&quot;TTSERAE&quot;</span>)</span>
<span id="cb14-65"><a href="#cb14-65" tabindex="-1"></a>    ),</span>
<span id="cb14-66"><a href="#cb14-66" tabindex="-1"></a>    <span class="fu">params</span>(</span>
<span id="cb14-67"><a href="#cb14-67" tabindex="-1"></a>      <span class="at">event_conditions =</span> <span class="fu">list</span>(tt_rel_ae),</span>
<span id="cb14-68"><a href="#cb14-68" tabindex="-1"></a>      <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">PARAMCD =</span> <span class="st">&quot;TTRELAE&quot;</span>)</span>
<span id="cb14-69"><a href="#cb14-69" tabindex="-1"></a>    )</span>
<span id="cb14-70"><a href="#cb14-70" tabindex="-1"></a>  ),</span>
<span id="cb14-71"><a href="#cb14-71" tabindex="-1"></a>  <span class="at">dataset_adsl =</span> adsl,</span>
<span id="cb14-72"><a href="#cb14-72" tabindex="-1"></a>  <span class="at">source_datasets =</span> <span class="fu">list</span>(</span>
<span id="cb14-73"><a href="#cb14-73" tabindex="-1"></a>    <span class="at">adsl =</span> adsl,</span>
<span id="cb14-74"><a href="#cb14-74" tabindex="-1"></a>    <span class="at">ae =</span> <span class="fu">filter</span>(adae, TRTEMFL <span class="sc">==</span> <span class="st">&quot;Y&quot;</span>)</span>
<span id="cb14-75"><a href="#cb14-75" tabindex="-1"></a>  ),</span>
<span id="cb14-76"><a href="#cb14-76" tabindex="-1"></a>  <span class="at">censor_conditions =</span> <span class="fu">list</span>(observation_end)</span>
<span id="cb14-77"><a href="#cb14-77" tabindex="-1"></a>)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="13%" />
<col width="8%" />
<col width="12%" />
<col width="12%" />
<col width="5%" />
<col width="24%" />
<col width="7%" />
<col width="8%" />
<col width="7%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">PARAMCD</th>
<th align="left">STARTDT</th>
<th align="left">ADT</th>
<th align="right">CNSR</th>
<th align="left">EVNTDESC</th>
<th align="left">SRCDOM</th>
<th align="left">SRCVAR</th>
<th align="right">SRCSEQ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">TTAE</td>
<td align="left">2014-01-02</td>
<td align="left">2014-01-09</td>
<td align="right">0</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">AE</td>
<td align="left">AESTDTC</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="left">TTRELAE</td>
<td align="left">2014-01-02</td>
<td align="left">2014-01-09</td>
<td align="right">0</td>
<td align="left">RELATED ADVERSE EVENT</td>
<td align="left">AE</td>
<td align="left">AESTDTC</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">TTSERAE</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02</td>
<td align="right">1</td>
<td align="left">END OF TREATMENT</td>
<td align="left">ADSL</td>
<td align="left">TRTEDT</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">TTAE</td>
<td align="left">2012-08-05</td>
<td align="left">2012-08-07</td>
<td align="right">0</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">AE</td>
<td align="left">AESTDTC</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">TTRELAE</td>
<td align="left">2012-08-05</td>
<td align="left">2012-08-07</td>
<td align="right">0</td>
<td align="left">RELATED ADVERSE EVENT</td>
<td align="left">AE</td>
<td align="left">AESTDTC</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">TTSERAE</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-02</td>
<td align="right">1</td>
<td align="left">END OF TREATMENT</td>
<td align="left">ADSL</td>
<td align="left">TRTEDT</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">TTAE</td>
<td align="left">2013-07-19</td>
<td align="left">2014-01-14</td>
<td align="right">1</td>
<td align="left">END OF TREATMENT</td>
<td align="left">ADSL</td>
<td align="left">TRTEDT</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1028</td>
<td align="left">TTRELAE</td>
<td align="left">2013-07-19</td>
<td align="left">2014-01-14</td>
<td align="right">1</td>
<td align="left">END OF TREATMENT</td>
<td align="left">ADSL</td>
<td align="left">TRTEDT</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">TTSERAE</td>
<td align="left">2013-07-19</td>
<td align="left">2014-01-14</td>
<td align="right">1</td>
<td align="left">END OF TREATMENT</td>
<td align="left">ADSL</td>
<td align="left">TRTEDT</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">TTAE</td>
<td align="left">2014-03-18</td>
<td align="left">2014-04-14</td>
<td align="right">1</td>
<td align="left">END OF TREATMENT</td>
<td align="left">ADSL</td>
<td align="left">TRTEDT</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
<div id="deriving-time-to-event-parameters-using-by-groups" class="section level3">
<h3>Deriving Time-to-Event Parameters Using By Groups</h3>
<p>If time-to-event parameters need to be derived for each by group of a
source dataset, the <code>by_vars</code> parameter can be specified.
Then a time-to-event parameter is derived for each by group.</p>
<p>Please note that CDISC requires separate parameters
(<code>PARAMCD</code>, <code>PARAM</code>) for the by groups. Therefore
the variables specified for the <code>by_vars</code> parameter are not
included in the output dataset. The <code>PARAMCD</code> variable should
be specified for the <code>set_value_to</code> parameter using an
expression on the right hand side which results in a unique value for
each by group. If the values of the by variables should be included in
the output dataset, they can be stored in <code>PARCATn</code>
variables.</p>
<p>In the following example a time-to-event parameter for each preferred
term in the AE dataset is derived.</p>
<pre><code>View(adsl)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRTSDT</th>
<th align="left">EOSDT</th>
<th align="left">STUDYID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">2020-12-06</td>
<td align="left">2021-03-06</td>
<td align="left">AB42</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">2021-01-16</td>
<td align="left">2021-02-03</td>
<td align="left">AB42</td>
</tr>
</tbody>
</table>
<pre><code>View(ae)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">AESTDTC</th>
<th align="right">AESEQ</th>
<th align="left">AEDECOD</th>
<th align="left">STUDYID</th>
<th align="left">AESTDT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">2021-01-03T10:56</td>
<td align="right">1</td>
<td align="left">Flu</td>
<td align="left">AB42</td>
<td align="left">2021-01-03</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">2021-03-04</td>
<td align="right">2</td>
<td align="left">Cough</td>
<td align="left">AB42</td>
<td align="left">2021-03-04</td>
</tr>
<tr class="odd">
<td align="left">01</td>
<td align="left">2021</td>
<td align="right">3</td>
<td align="left">Flu</td>
<td align="left">AB42</td>
<td align="left">2021-01-01</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># define time to first adverse event event #</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>ttae <span class="ot">&lt;-</span> <span class="fu">event_source</span>(</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>  <span class="at">date =</span> AESTDT,</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;AE&quot;</span>,</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;AE&quot;</span>,</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;AESTDTC&quot;</span>,</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>    <span class="at">SRCSEQ =</span> AESEQ</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>  )</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>)</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a><span class="co"># define censoring at end of study #</span></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a>eos <span class="ot">&lt;-</span> <span class="fu">censor_source</span>(</span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a>  <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a>  <span class="at">date =</span> EOSDT,</span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a>    <span class="at">EVNTDESC =</span> <span class="st">&quot;END OF STUDY&quot;</span>,</span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a>    <span class="at">SRCDOM =</span> <span class="st">&quot;ADSL&quot;</span>,</span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a>    <span class="at">SRCVAR =</span> <span class="st">&quot;EOSDT&quot;</span></span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a>  )</span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a>)</span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a></span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a><span class="co"># derive time-to-event parameter #</span></span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a>adtte <span class="ot">&lt;-</span> <span class="fu">derive_param_tte</span>(</span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a>  <span class="at">dataset_adsl =</span> adsl,</span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a>  <span class="at">by_vars =</span> <span class="fu">exprs</span>(AEDECOD),</span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a>  <span class="at">start_date =</span> TRTSDT,</span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a>  <span class="at">event_conditions =</span> <span class="fu">list</span>(ttae),</span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a>  <span class="at">censor_conditions =</span> <span class="fu">list</span>(eos),</span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a>  <span class="at">source_datasets =</span> <span class="fu">list</span>(<span class="at">adsl =</span> adsl, <span class="at">ae =</span> ae),</span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a>  <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a>    <span class="at">PARAMCD =</span> <span class="fu">paste0</span>(<span class="st">&quot;TTAE&quot;</span>, <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(AEDECOD))),</span>
<span id="cb17-34"><a href="#cb17-34" tabindex="-1"></a>    <span class="at">PARAM =</span> <span class="fu">paste</span>(<span class="st">&quot;Time to First&quot;</span>, AEDECOD, <span class="st">&quot;Adverse Event&quot;</span>),</span>
<span id="cb17-35"><a href="#cb17-35" tabindex="-1"></a>    <span class="at">PARCAT1 =</span> <span class="st">&quot;TTAE&quot;</span>,</span>
<span id="cb17-36"><a href="#cb17-36" tabindex="-1"></a>    <span class="at">PARCAT2 =</span> AEDECOD</span>
<span id="cb17-37"><a href="#cb17-37" tabindex="-1"></a>  )</span>
<span id="cb17-38"><a href="#cb17-38" tabindex="-1"></a>)</span></code></pre></div>
<table>
<colgroup>
<col width="9%" />
<col width="13%" />
<col width="9%" />
<col width="40%" />
<col width="13%" />
<col width="5%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">STARTDT</th>
<th align="left">PARAMCD</th>
<th align="left">PARAM</th>
<th align="left">ADT</th>
<th align="right">CNSR</th>
<th align="right">SRCSEQ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">2020-12-06</td>
<td align="left">TTAE1</td>
<td align="left">Time to First Cough Adverse Event</td>
<td align="left">2021-03-04</td>
<td align="right">0</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">01</td>
<td align="left">2020-12-06</td>
<td align="left">TTAE2</td>
<td align="left">Time to First Flu Adverse Event</td>
<td align="left">2021-01-01</td>
<td align="right">0</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">02</td>
<td align="left">2021-01-16</td>
<td align="left">TTAE1</td>
<td align="left">Time to First Cough Adverse Event</td>
<td align="left">2021-02-03</td>
<td align="right">1</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">2021-01-16</td>
<td align="left">TTAE2</td>
<td align="left">Time to First Flu Adverse Event</td>
<td align="left">2021-02-03</td>
<td align="right">1</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="aval" class="section level2">
<h2>Derive Analysis Value (<code>AVAL</code>)</h2>
<p>The analysis value (<code>AVAL</code>) can be derived by calling
<code>derive_vars_duration()</code>.</p>
<p>This example derives the time to event in days. Other units can be
requested by the specifying the <code>out_unit</code> parameter.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>adtte <span class="ot">&lt;-</span> <span class="fu">derive_vars_duration</span>(</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  adtte,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  <span class="at">new_var =</span> AVAL,</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>  <span class="at">start_date =</span> STARTDT,</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>  <span class="at">end_date =</span> ADT</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="18%" />
<col width="5%" />
<col width="7%" />
<col width="4%" />
<col width="9%" />
<col width="9%" />
<col width="6%" />
<col width="14%" />
<col width="4%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">STUDYID</th>
<th align="left">USUBJID</th>
<th align="left">EVNTDESC</th>
<th align="left">SRCDOM</th>
<th align="left">SRCVAR</th>
<th align="right">CNSR</th>
<th align="left">ADT</th>
<th align="left">STARTDT</th>
<th align="left">PARAMCD</th>
<th align="left">PARAM</th>
<th align="right">AVAL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1015</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-07-02</td>
<td align="left">2014-01-02</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">182</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1023</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2012-09-02</td>
<td align="left">2012-08-05</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">29</td>
</tr>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1028</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-01-14</td>
<td align="left">2013-07-19</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">180</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1033</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-04-14</td>
<td align="left">2014-03-18</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">28</td>
</tr>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1034</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-12-30</td>
<td align="left">2014-07-01</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">183</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1047</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2013-04-07</td>
<td align="left">2013-02-12</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">55</td>
</tr>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1097</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-07-09</td>
<td align="left">2014-01-01</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">190</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1111</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2012-09-17</td>
<td align="left">2012-09-07</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">11</td>
</tr>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1115</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2013-01-23</td>
<td align="left">2012-11-30</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">55</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1118</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-09-09</td>
<td align="left">2014-03-12</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">182</td>
</tr>
</tbody>
</table>
</div>
<div id="aseq" class="section level2">
<h2>Derive Analysis Sequence Number (<code>ASEQ</code>)</h2>
<p>The <code>{admiral}</code> function
<code>derive_var_obs_number()</code> can be used to derive
<code>ASEQ</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>adtte <span class="ot">&lt;-</span> <span class="fu">derive_var_obs_number</span>(</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  adtte,</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  <span class="at">order =</span> <span class="fu">exprs</span>(PARAMCD),</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>  <span class="at">check_type =</span> <span class="st">&quot;error&quot;</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>)</span></code></pre></div>
<table>
<colgroup>
<col width="10%" />
<col width="9%" />
<col width="17%" />
<col width="5%" />
<col width="7%" />
<col width="4%" />
<col width="8%" />
<col width="8%" />
<col width="6%" />
<col width="13%" />
<col width="4%" />
<col width="4%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">STUDYID</th>
<th align="left">USUBJID</th>
<th align="left">EVNTDESC</th>
<th align="left">SRCDOM</th>
<th align="left">SRCVAR</th>
<th align="right">CNSR</th>
<th align="left">ADT</th>
<th align="left">STARTDT</th>
<th align="left">PARAMCD</th>
<th align="left">PARAM</th>
<th align="right">AVAL</th>
<th align="right">ASEQ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1015</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-07-02</td>
<td align="left">2014-01-02</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">182</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1023</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2012-09-02</td>
<td align="left">2012-08-05</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">29</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1028</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-01-14</td>
<td align="left">2013-07-19</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">180</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1033</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-04-14</td>
<td align="left">2014-03-18</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">28</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1034</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-12-30</td>
<td align="left">2014-07-01</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">183</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1047</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2013-04-07</td>
<td align="left">2013-02-12</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">55</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1097</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-07-09</td>
<td align="left">2014-01-01</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">190</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1111</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2012-09-17</td>
<td align="left">2012-09-07</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">11</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1115</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2013-01-23</td>
<td align="left">2012-11-30</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">55</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">CDISCPILOT01</td>
<td align="left">01-701-1118</td>
<td align="left">LAST KNOWN ALIVE DATE</td>
<td align="left">ADSL</td>
<td align="left">LSTALVDT</td>
<td align="right">1</td>
<td align="left">2014-09-09</td>
<td align="left">2014-03-12</td>
<td align="left">OS</td>
<td align="left">Overall Survival</td>
<td align="right">182</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
<div id="adslvars" class="section level2">
<h2>Add ADSL Variables</h2>
<p>Variables from ADSL which are required for time-to-event analyses,
e.g., treatment variables or covariates can be added using
<code>derive_vars_merged()</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>adtte <span class="ot">&lt;-</span> <span class="fu">derive_vars_merged</span>(</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  adtte,</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>  <span class="at">dataset_add =</span> adsl,</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>  <span class="at">new_vars =</span> <span class="fu">exprs</span>(ARMCD, ARM, ACTARMCD, ACTARM, AGE, SEX),</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>  <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID)</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">PARAMCD</th>
<th align="right">CNSR</th>
<th align="right">AVAL</th>
<th align="left">ARMCD</th>
<th align="right">AGE</th>
<th align="left">SEX</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">182</td>
<td align="left">Pbo</td>
<td align="right">63</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">29</td>
<td align="left">Pbo</td>
<td align="right">64</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">180</td>
<td align="left">Xan_Hi</td>
<td align="right">71</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">28</td>
<td align="left">Xan_Lo</td>
<td align="right">74</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">183</td>
<td align="left">Xan_Hi</td>
<td align="right">77</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">55</td>
<td align="left">Pbo</td>
<td align="right">85</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="left">01-701-1097</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">190</td>
<td align="left">Xan_Lo</td>
<td align="right">68</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">01-701-1111</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">11</td>
<td align="left">Xan_Lo</td>
<td align="right">81</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="left">01-701-1115</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">55</td>
<td align="left">Xan_Lo</td>
<td align="right">84</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">01-701-1118</td>
<td align="left">OS</td>
<td align="right">1</td>
<td align="right">182</td>
<td align="left">Pbo</td>
<td align="right">52</td>
<td align="left">M</td>
</tr>
</tbody>
</table>
</div>
<div id="attributes" class="section level2">
<h2>Add Labels and Attributes</h2>
<p>Adding labels and attributes for SAS transport files is supported by
the following packages:</p>
<ul>
<li><p><a href="https://atorus-research.github.io/metacore/">metacore</a>:
establish a common foundation for the use of metadata within an R
session.</p></li>
<li><p><a href="https://pharmaverse.github.io/metatools/">metatools</a>:
enable the use of metacore objects. Metatools can be used to build
datasets or enhance columns in existing datasets as well as checking
datasets against the metadata.</p></li>
<li><p><a href="https://atorus-research.github.io/xportr/">xportr</a>:
functionality to associate all metadata information to a local R data
frame, perform data set level validation checks and convert into a <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/movefile/n1xbwdre0giahfn11c99yjkpi2yb.htm">transport
v5 file(xpt)</a>.</p></li>
</ul>
<p>NOTE: All these packages are in the experimental phase, but the
vision is to have them associated with an End to End pipeline under the
umbrella of the <a href="https://github.com/pharmaverse">pharmaverse</a>. An example of
applying metadata and perform associated checks can be found at the <a href="https://pharmaverse.github.io/examples/adam/adsl">pharmaverse E2E
example</a>.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
