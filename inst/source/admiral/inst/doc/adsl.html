<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Creating ADSL</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Creating ADSL</h1>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This article describes creating an <code>ADSL</code> ADaM. Examples
are currently presented and tested using <code>DM</code>,
<code>EX</code> , <code>AE</code>, <code>LB</code> and <code>DS</code>
SDTM domains. However, other domains could be used.</p>
<p><strong>Note:</strong> <em>All examples assume CDISC SDTM and/or ADaM
format as input unless otherwise specified.</em></p>
</div>
<div id="programming-flow" class="section level1">
<h1>Programming Flow</h1>
<ul>
<li><a href="#readdata">Read in Data</a></li>
<li><a href="#periodvars">Derive Period, Subperiod, and Phase Variables
(e.g. <code>APxxSDT</code>, <code>APxxEDT</code>, …)</a></li>
<li><a href="#treatmentvar">Derive Treatment Variables
(<code>TRT0xP</code>, <code>TRT0xA</code>)</a></li>
<li><a href="#trtdatetime">Derive/Impute Numeric Treatment Date/Time and
Duration (<code>TRTSDT</code>, <code>TRTEDT</code>,
<code>TRTDURD</code>)</a></li>
<li><a href="#disposition">Derive Disposition Variables</a>
<ul>
<li><a href="#disposition_date">Disposition Dates
(e.g. <code>EOSDT</code>)</a></li>
<li><a href="#disposition_status">Disposition Status
(e.g. <code>EOSTT</code>)</a></li>
<li><a href="#disposition_reason">Disposition Reason(s)
(e.g. <code>DCSREAS</code>, <code>DCSREASP</code>)</a></li>
<li><a href="#randomization_date">Randomization Date
(<code>RANDDT</code>)</a></li>
</ul></li>
<li><a href="#death">Derive Death Variables</a>
<ul>
<li><a href="#death_date">Death Date (<code>DTHDT</code>)</a></li>
<li><a href="#death_cause">Cause of Death
(<code>DTHCAUS</code>)</a></li>
<li><a href="#death_other">Duration Relative to Death</a></li>
</ul></li>
<li><a href="#lstalvdt">Derive Last Known Date Alive
(<code>LSTALVDT</code>)</a></li>
<li><a href="#groupings">Derive Groupings and Populations</a>
<ul>
<li><a href="#groupings_ex">Grouping (e.g. <code>AGEGR1</code> or
<code>REGION1</code>)</a></li>
<li><a href="#popflag">Population Flags
(e.g. <code>SAFFL</code>)</a></li>
</ul></li>
<li><a href="#other">Derive Other Variables</a></li>
<li><a href="#attributes">Add Labels and Attributes</a></li>
</ul>
<div id="readdata" class="section level2">
<h2>Read in Data</h2>
<p>To start, all data frames needed for the creation of
<code>ADSL</code> should be read into the environment. This will be a
company specific process. Some of the data frames needed may be
<code>DM</code>, <code>EX</code>, <code>DS</code>, <code>AE</code>, and
<code>LB</code>.</p>
<p>For example purpose, the CDISC Pilot SDTM datasets—which are included
in <code>{pharmaversesdtm}</code>—are used.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(admiral)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(pharmaversesdtm)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>dm <span class="ot">&lt;-</span> pharmaversesdtm<span class="sc">::</span>dm</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>ds <span class="ot">&lt;-</span> pharmaversesdtm<span class="sc">::</span>ds</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>ex <span class="ot">&lt;-</span> pharmaversesdtm<span class="sc">::</span>ex</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>ae <span class="ot">&lt;-</span> pharmaversesdtm<span class="sc">::</span>ae</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>lb <span class="ot">&lt;-</span> pharmaversesdtm<span class="sc">::</span>lb</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>dm <span class="ot">&lt;-</span> <span class="fu">convert_blanks_to_na</span>(dm)</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>ds <span class="ot">&lt;-</span> <span class="fu">convert_blanks_to_na</span>(ds)</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>ex <span class="ot">&lt;-</span> <span class="fu">convert_blanks_to_na</span>(ex)</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>ae <span class="ot">&lt;-</span> <span class="fu">convert_blanks_to_na</span>(ae)</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>lb <span class="ot">&lt;-</span> <span class="fu">convert_blanks_to_na</span>(lb)</span></code></pre></div>
<p>The <code>DM</code> domain is used as the basis for
<code>ADSL</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> dm <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>DOMAIN)</span></code></pre></div>
<table>
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="7%" />
<col width="3%" />
<col width="3%" />
<col width="5%" />
<col width="20%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">RFSTDTC</th>
<th align="left">COUNTRY</th>
<th align="right">AGE</th>
<th align="left">SEX</th>
<th align="left">RACE</th>
<th align="left">ETHNIC</th>
<th align="left">ARM</th>
<th align="left">ACTARM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-02</td>
<td align="left">USA</td>
<td align="right">63</td>
<td align="left">F</td>
<td align="left">WHITE</td>
<td align="left">HISPANIC OR LATINO</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-05</td>
<td align="left">USA</td>
<td align="right">64</td>
<td align="left">M</td>
<td align="left">WHITE</td>
<td align="left">HISPANIC OR LATINO</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2013-07-19</td>
<td align="left">USA</td>
<td align="right">71</td>
<td align="left">M</td>
<td align="left">WHITE</td>
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Xanomeline High Dose</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-03-18</td>
<td align="left">USA</td>
<td align="right">74</td>
<td align="left">M</td>
<td align="left">WHITE</td>
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-07-01</td>
<td align="left">USA</td>
<td align="right">77</td>
<td align="left">F</td>
<td align="left">WHITE</td>
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Xanomeline High Dose</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-02-12</td>
<td align="left">USA</td>
<td align="right">85</td>
<td align="left">F</td>
<td align="left">WHITE</td>
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
</tr>
<tr class="odd">
<td align="left">01-701-1057</td>
<td align="left">NA</td>
<td align="left">USA</td>
<td align="right">59</td>
<td align="left">F</td>
<td align="left">WHITE</td>
<td align="left">HISPANIC OR LATINO</td>
<td align="left">Screen Failure</td>
<td align="left">Screen Failure</td>
</tr>
<tr class="even">
<td align="left">01-701-1097</td>
<td align="left">2014-01-01</td>
<td align="left">USA</td>
<td align="right">68</td>
<td align="left">M</td>
<td align="left">WHITE</td>
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
</tr>
<tr class="odd">
<td align="left">01-701-1111</td>
<td align="left">2012-09-07</td>
<td align="left">USA</td>
<td align="right">81</td>
<td align="left">F</td>
<td align="left">WHITE</td>
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
</tr>
<tr class="even">
<td align="left">01-701-1115</td>
<td align="left">2012-11-30</td>
<td align="left">USA</td>
<td align="right">84</td>
<td align="left">M</td>
<td align="left">WHITE</td>
<td align="left">NOT HISPANIC OR LATINO</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
</tr>
</tbody>
</table>
</div>
<div id="periodvars" class="section level2">
<h2>Derive Period, Subperiod, and Phase Variables
(e.g. <code>APxxSDT</code>, <code>APxxEDT</code>, …)</h2>
<p>See the <a href="visits_periods.html#periods_adsl">“Visit and Period
Variables” vignette</a> for more information.</p>
<p>If the variables are not derived based on a period reference dataset,
they may be derived at a later point of the flow. For example, phases
like “Treatment Phase” and “Follow up” could be derived based on
treatment start and end date.</p>
</div>
<div id="treatmentvar" class="section level2">
<h2>Derive Treatment Variables (<code>TRT0xP</code>,
<code>TRT0xA</code>)</h2>
<p>The mapping of the treatment variables is left to the ADaM
programmer. An example mapping for a study without periods may be:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> dm <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">TRT01P =</span> ARM, <span class="at">TRT01A =</span> ACTARM)</span></code></pre></div>
<p>For studies with periods see the <a href="visits_periods.html#treatment_adsl">“Visit and Period Variables”
vignette</a>.</p>
</div>
<div id="trtdatetime" class="section level2">
<h2>Derive/Impute Numeric Treatment Date/Time and Duration
(<code>TRTSDTM</code>, <code>TRTEDTM</code>, <code>TRTDURD</code>)</h2>
<p>The function <code>derive_vars_merged()</code> can be used to derive
the treatment start and end date/times using the <code>ex</code> domain.
A pre-processing step for <code>ex</code> is required to convert the
variable <code>EXSTDTC</code> and <code>EXSTDTC</code> to datetime
variables and impute missing date or time components. Conversion and
imputation is done by <code>derive_vars_dtm()</code>.</p>
<p>Example calls:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># impute start and end time of exposure to first and last respectively,</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co"># do not impute date</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>ex_ext <span class="ot">&lt;-</span> ex <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="fu">derive_vars_dtm</span>(</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="at">dtc =</span> EXSTDTC,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    <span class="at">new_vars_prefix =</span> <span class="st">&quot;EXST&quot;</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>  <span class="fu">derive_vars_dtm</span>(</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>    <span class="at">dtc =</span> EXENDTC,</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>    <span class="at">new_vars_prefix =</span> <span class="st">&quot;EXEN&quot;</span>,</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>    <span class="at">time_imputation =</span> <span class="st">&quot;last&quot;</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>  )</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; The default value of `ignore_seconds_flag` will change to &quot;TRUE&quot; in admiral</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; 1.4.0.</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>    <span class="at">dataset_add =</span> ex_ext,</span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>    <span class="at">filter_add =</span> (EXDOSE <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>      (EXDOSE <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>        <span class="fu">str_detect</span>(EXTRT, <span class="st">&quot;PLACEBO&quot;</span>))) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(EXSTDTM),</span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">TRTSDTM =</span> EXSTDTM, <span class="at">TRTSTMF =</span> EXSTTMF),</span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a>    <span class="at">order =</span> <span class="fu">exprs</span>(EXSTDTM, EXSEQ),</span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;first&quot;</span>,</span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID)</span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a>    <span class="at">dataset_add =</span> ex_ext,</span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a>    <span class="at">filter_add =</span> (EXDOSE <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a>      (EXDOSE <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span></span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a>        <span class="fu">str_detect</span>(EXTRT, <span class="st">&quot;PLACEBO&quot;</span>))) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(EXENDTM),</span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">TRTEDTM =</span> EXENDTM, <span class="at">TRTETMF =</span> EXENTMF),</span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a>    <span class="at">order =</span> <span class="fu">exprs</span>(EXENDTM, EXSEQ),</span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;last&quot;</span>,</span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID)</span>
<span id="cb4-36"><a href="#cb4-36" tabindex="-1"></a>  )</span></code></pre></div>
<p>This call returns the original data frame with the column
<code>TRTSDTM</code>, <code>TRTSTMF</code>, <code>TRTEDTM</code>, and
<code>TRTETMF</code> added. Exposure observations with incomplete date
and zero doses of non placebo treatments are ignored. Missing time parts
are imputed as first or last for start and end date respectively.</p>
<p>The datetime variables returned can be converted to dates using the
<code>derive_vars_dtm_to_dt()</code> function.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="fu">derive_vars_dtm_to_dt</span>(<span class="at">source_vars =</span> <span class="fu">exprs</span>(TRTSDTM, TRTEDTM))</span></code></pre></div>
<p>Now, that <code>TRTSDT</code> and <code>TRTEDT</code> are derived,
the function <code>derive_var_trtdurd()</code> can be used to calculate
the Treatment duration (<code>TRTDURD</code>).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="fu">derive_var_trtdurd</span>()</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="14%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="23%" />
<col width="13%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">RFSTDTC</th>
<th align="left">TRTSDTM</th>
<th align="left">TRTSDT</th>
<th align="left">TRTEDTM</th>
<th align="left">TRTEDT</th>
<th align="right">TRTDURD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-02</td>
<td align="left">2014-01-02</td>
<td align="left">2014-01-02</td>
<td align="left">2014-07-02 23:59:59</td>
<td align="left">2014-07-02</td>
<td align="right">182</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-05</td>
<td align="left">2012-08-05</td>
<td align="left">2012-08-05</td>
<td align="left">2012-09-01 23:59:59</td>
<td align="left">2012-09-01</td>
<td align="right">28</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2013-07-19</td>
<td align="left">2013-07-19</td>
<td align="left">2013-07-19</td>
<td align="left">2014-01-14 23:59:59</td>
<td align="left">2014-01-14</td>
<td align="right">180</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-03-18</td>
<td align="left">2014-03-18</td>
<td align="left">2014-03-18</td>
<td align="left">2014-03-31 23:59:59</td>
<td align="left">2014-03-31</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-07-01</td>
<td align="left">2014-07-01</td>
<td align="left">2014-07-01</td>
<td align="left">2014-12-30 23:59:59</td>
<td align="left">2014-12-30</td>
<td align="right">183</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-02-12</td>
<td align="left">2013-02-12</td>
<td align="left">2013-02-12</td>
<td align="left">2013-03-09 23:59:59</td>
<td align="left">2013-03-09</td>
<td align="right">26</td>
</tr>
<tr class="odd">
<td align="left">01-701-1057</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1097</td>
<td align="left">2014-01-01</td>
<td align="left">2014-01-01</td>
<td align="left">2014-01-01</td>
<td align="left">2014-07-09 23:59:59</td>
<td align="left">2014-07-09</td>
<td align="right">190</td>
</tr>
<tr class="odd">
<td align="left">01-701-1111</td>
<td align="left">2012-09-07</td>
<td align="left">2012-09-07</td>
<td align="left">2012-09-07</td>
<td align="left">2012-09-16 23:59:59</td>
<td align="left">2012-09-16</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">01-701-1115</td>
<td align="left">2012-11-30</td>
<td align="left">2012-11-30</td>
<td align="left">2012-11-30</td>
<td align="left">2013-01-23 23:59:59</td>
<td align="left">2013-01-23</td>
<td align="right">55</td>
</tr>
</tbody>
</table>
</div>
<div id="disposition" class="section level2">
<h2>Derive Disposition Variables</h2>
<div id="disposition_date" class="section level3">
<h3>Disposition Dates (e.g. <code>EOSDT</code>)</h3>
<p>The functions <code>derive_vars_dt()</code> and
<code>derive_vars_merged()</code> can be used to derive a disposition
date. First the character disposition date (<code>DS.DSSTDTC</code>) is
converted to a numeric date (<code>DSSTDT</code>) calling
<code>derive_vars_dt()</code>. The <code>DS</code> dataset is extended
by the <code>DSSTDT</code> variable because the date is required by
other derivations, e.g., <code>RANDDT</code> as well. Then the relevant
disposition date is selected by adjusting the <code>filter_add</code>
argument.</p>
<p>To add the End of Study date (<code>EOSDT</code>) to the input
dataset, a call could be:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># convert character date to numeric date without imputation</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>ds_ext <span class="ot">&lt;-</span> <span class="fu">derive_vars_dt</span>(</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  ds,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="at">dtc =</span> DSSTDTC,</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="at">new_vars_prefix =</span> <span class="st">&quot;DSST&quot;</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>    <span class="at">dataset_add =</span> ds_ext,</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">EOSDT =</span> DSSTDT),</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>    <span class="at">filter_add =</span> DSCAT <span class="sc">==</span> <span class="st">&quot;DISPOSITION EVENT&quot;</span> <span class="sc">&amp;</span> DSDECOD <span class="sc">!=</span> <span class="st">&quot;SCREEN FAILURE&quot;</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>  )</span></code></pre></div>
<p>The <code>ds_ext</code> dataset:</p>
<table>
<colgroup>
<col width="12%" />
<col width="19%" />
<col width="22%" />
<col width="22%" />
<col width="11%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">DSCAT</th>
<th align="left">DSDECOD</th>
<th align="left">DSTERM</th>
<th align="left">DSSTDT</th>
<th align="left">DSSTDTC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">PROTOCOL MILESTONE</td>
<td align="left">RANDOMIZED</td>
<td align="left">RANDOMIZED</td>
<td align="left">2014-01-02</td>
<td align="left">2014-01-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1015</td>
<td align="left">DISPOSITION EVENT</td>
<td align="left">COMPLETED</td>
<td align="left">PROTOCOL COMPLETED</td>
<td align="left">2014-07-02</td>
<td align="left">2014-07-02</td>
</tr>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">OTHER EVENT</td>
<td align="left">FINAL LAB VISIT</td>
<td align="left">FINAL LAB VISIT</td>
<td align="left">2014-07-02</td>
<td align="left">2014-07-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">PROTOCOL MILESTONE</td>
<td align="left">RANDOMIZED</td>
<td align="left">RANDOMIZED</td>
<td align="left">2012-08-05</td>
<td align="left">2012-08-05</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">DISPOSITION EVENT</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">2012-09-02</td>
<td align="left">2012-09-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">OTHER EVENT</td>
<td align="left">FINAL LAB VISIT</td>
<td align="left">FINAL LAB VISIT</td>
<td align="left">2012-09-02</td>
<td align="left">2012-09-02</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">OTHER EVENT</td>
<td align="left">FINAL RETRIEVAL VISIT</td>
<td align="left">FINAL RETRIEVAL VISIT</td>
<td align="left">2013-02-18</td>
<td align="left">2013-02-18</td>
</tr>
<tr class="even">
<td align="left">01-701-1028</td>
<td align="left">PROTOCOL MILESTONE</td>
<td align="left">RANDOMIZED</td>
<td align="left">RANDOMIZED</td>
<td align="left">2013-07-19</td>
<td align="left">2013-07-19</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">DISPOSITION EVENT</td>
<td align="left">COMPLETED</td>
<td align="left">PROTOCOL COMPLETED</td>
<td align="left">2014-01-14</td>
<td align="left">2014-01-14</td>
</tr>
<tr class="even">
<td align="left">01-701-1028</td>
<td align="left">OTHER EVENT</td>
<td align="left">FINAL LAB VISIT</td>
<td align="left">FINAL LAB VISIT</td>
<td align="left">2014-01-14</td>
<td align="left">2014-01-14</td>
</tr>
</tbody>
</table>
<p>The <code>adsl</code> dataset:</p>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">EOSDT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-07-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-09-02</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2014-01-14</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-04-14</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-12-30</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-03-29</td>
</tr>
<tr class="odd">
<td align="left">01-701-1057</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1097</td>
<td align="left">2014-07-09</td>
</tr>
<tr class="odd">
<td align="left">01-701-1111</td>
<td align="left">2012-09-17</td>
</tr>
<tr class="even">
<td align="left">01-701-1115</td>
<td align="left">2013-01-23</td>
</tr>
</tbody>
</table>
<p>The <code>derive_vars_dt()</code> function allows to impute partial
dates as well. If imputation is needed and missing days are to be
imputed to the first of the month and missing months to the first month
of the year, set <code>highest_imputation = &quot;M&quot;</code>.</p>
</div>
<div id="disposition_status" class="section level3">
<h3>Disposition Status (e.g. <code>EOSSTT</code>)</h3>
<p>The function <code>derive_vars_merged()</code> can be used to derive
the End of Study status (<code>EOSSTT</code>) based on
<code>DSCAT</code> and <code>DSDECOD</code> from <code>DS</code>. The
relevant observations are selected by adjusting the
<code>filter_add</code> argument. A function mapping
<code>DSDECOD</code> values to <code>EOSSTT</code> values can be defined
and used in the <code>new_vars</code> argument. The mapping for the call
below is</p>
<ul>
<li><code>&quot;COMPLETED&quot;</code> if <code>DSDECOD == &quot;COMPLETED&quot;</code></li>
<li><code>NA_character_</code> if <code>DSDECOD</code> is
<code>&quot;SCREEN FAILURE&quot;</code></li>
<li><code>&quot;DISCONTINUED&quot;</code> otherwise</li>
</ul>
<p>Example function <code>format_eosstt()</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>format_eosstt <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="fu">case_when</span>(</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>    x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;COMPLETED&quot;</span>) <span class="sc">~</span> <span class="st">&quot;COMPLETED&quot;</span>,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;SCREEN FAILURE&quot;</span>) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;DISCONTINUED&quot;</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  )</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>}</span></code></pre></div>
<p>The customized mapping function <code>format_eosstt()</code> can now
be passed to the main function. For subjects without a disposition event
the end of study status is set to <code>&quot;ONGOING&quot;</code> by specifying
the <code>missing_values</code> argument.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>    <span class="at">dataset_add =</span> ds,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="at">filter_add =</span> DSCAT <span class="sc">==</span> <span class="st">&quot;DISPOSITION EVENT&quot;</span>,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">EOSSTT =</span> <span class="fu">format_eosstt</span>(DSDECOD)),</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>    <span class="at">missing_values =</span> <span class="fu">exprs</span>(<span class="at">EOSSTT =</span> <span class="st">&quot;ONGOING&quot;</span>)</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">EOSDT</th>
<th align="left">EOSSTT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-07-02</td>
<td align="left">COMPLETED</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-09-02</td>
<td align="left">DISCONTINUED</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2014-01-14</td>
<td align="left">COMPLETED</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-04-14</td>
<td align="left">DISCONTINUED</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-12-30</td>
<td align="left">COMPLETED</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-03-29</td>
<td align="left">DISCONTINUED</td>
</tr>
<tr class="odd">
<td align="left">01-701-1057</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1097</td>
<td align="left">2014-07-09</td>
<td align="left">COMPLETED</td>
</tr>
<tr class="odd">
<td align="left">01-701-1111</td>
<td align="left">2012-09-17</td>
<td align="left">DISCONTINUED</td>
</tr>
<tr class="even">
<td align="left">01-701-1115</td>
<td align="left">2013-01-23</td>
<td align="left">DISCONTINUED</td>
</tr>
</tbody>
</table>
<p>This call would return the input dataset with the column
<code>EOSSTT</code> added.</p>
<p>If the derivation must be changed, the user can create his/her own
function to map <code>DSDECOD</code> to a suitable <code>EOSSTT</code>
value.</p>
</div>
<div id="disposition_reason" class="section level3">
<h3>Disposition Reason(s) (e.g. <code>DCSREAS</code>,
<code>DCSREASP</code>)</h3>
<p>The main reason for discontinuation is usually stored in
<code>DSDECOD</code> while <code>DSTERM</code> provides additional
details regarding subject’s discontinuation (e.g., description of
<code>&quot;OTHER&quot;</code>).</p>
<p>The function <code>derive_vars_merged()</code> can be used to derive
a disposition reason (along with the details, if required) at a specific
timepoint. The relevant observations are selected by adjusting the
<code>filter_add</code> argument.</p>
<p>To derive the End of Study reason(s) (<code>DCSREAS</code> and
<code>DCSREASP</code>), the function will map <code>DCSREAS</code> as
<code>DSDECOD</code>, and <code>DCSREASP</code> as <code>DSTERM</code>
if <code>DSDECOD</code> is not <code>&quot;COMPLETED&quot;</code>,
<code>&quot;SCREEN FAILURE&quot;</code>, or <code>NA</code>, <code>NA</code>
otherwise.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>    <span class="at">dataset_add =</span> ds,</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(USUBJID),</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">DCSREAS =</span> DSDECOD, <span class="at">DCSREASP =</span> DSTERM),</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>    <span class="at">filter_add =</span> DSCAT <span class="sc">==</span> <span class="st">&quot;DISPOSITION EVENT&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>      <span class="sc">!</span>(DSDECOD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;SCREEN FAILURE&quot;</span>, <span class="st">&quot;COMPLETED&quot;</span>, <span class="cn">NA</span>))</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="9%" />
<col width="8%" />
<col width="10%" />
<col width="21%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">EOSDT</th>
<th align="left">EOSSTT</th>
<th align="left">DCSREAS</th>
<th align="left">DCSREASP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-07-02</td>
<td align="left">COMPLETED</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-09-02</td>
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">ADVERSE EVENT</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2014-01-14</td>
<td align="left">COMPLETED</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-04-14</td>
<td align="left">DISCONTINUED</td>
<td align="left">STUDY TERMINATED BY SPONSOR</td>
<td align="left">SPONSOR DECISION (STUDY OR PATIENT DISCONTINUED BY THE
SPONSOR)</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-12-30</td>
<td align="left">COMPLETED</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-03-29</td>
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">ADVERSE EVENT</td>
</tr>
<tr class="odd">
<td align="left">01-701-1057</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1097</td>
<td align="left">2014-07-09</td>
<td align="left">COMPLETED</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1111</td>
<td align="left">2012-09-17</td>
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">ADVERSE EVENT</td>
</tr>
<tr class="even">
<td align="left">01-701-1115</td>
<td align="left">2013-01-23</td>
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">ADVERSE EVENT</td>
</tr>
</tbody>
</table>
<p>This call would return the input dataset with the column
<code>DCSREAS</code> and <code>DCSREASP</code> added.</p>
<p>If the derivation must be changed, the user can define that
derivation in the <code>filter_add</code> argument of the function to
map <code>DSDECOD</code> and <code>DSTERM</code> to a suitable
<code>DCSREAS</code>/<code>DCSREASP</code> value.</p>
<p>The call below maps <code>DCSREAS</code> and <code>DCREASP</code> as
follows:</p>
<ul>
<li><code>DCSREAS</code> as <code>DSDECOD</code> if <code>DSDECOD</code>
is not <code>&quot;COMPLETED&quot;</code> or <code>NA</code>, <code>NA</code>
otherwise</li>
<li><code>DCSREASP</code> as <code>DSTERM</code> if <code>DSDECOD</code>
is equal to <code>OTHER</code>, <code>NA</code> otherwise</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>    <span class="at">dataset_add =</span> ds,</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(USUBJID),</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">DCSREAS =</span> DSDECOD),</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>    <span class="at">filter_add =</span> DSCAT <span class="sc">==</span> <span class="st">&quot;DISPOSITION EVENT&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>      DSDECOD <span class="sc">%notin%</span> <span class="fu">c</span>(<span class="st">&quot;SCREEN FAILURE&quot;</span>, <span class="st">&quot;COMPLETED&quot;</span>, <span class="cn">NA</span>)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>    <span class="at">dataset_add =</span> ds,</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(USUBJID),</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">DCSREASP =</span> DSTERM),</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>    <span class="at">filter_add =</span> DSCAT <span class="sc">==</span> <span class="st">&quot;DISPOSITION EVENT&quot;</span> <span class="sc">&amp;</span> DSDECOD <span class="sc">%in%</span> <span class="st">&quot;OTHER&quot;</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="16%" />
<col width="15%" />
<col width="17%" />
<col width="38%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">EOSDT</th>
<th align="left">EOSSTT</th>
<th align="left">DCSREAS</th>
<th align="left">DCSREASP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-07-02</td>
<td align="left">COMPLETED</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-09-02</td>
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2014-01-14</td>
<td align="left">COMPLETED</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-04-14</td>
<td align="left">DISCONTINUED</td>
<td align="left">STUDY TERMINATED BY SPONSOR</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-12-30</td>
<td align="left">COMPLETED</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-03-29</td>
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1057</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1097</td>
<td align="left">2014-07-09</td>
<td align="left">COMPLETED</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-701-1111</td>
<td align="left">2012-09-17</td>
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1115</td>
<td align="left">2013-01-23</td>
<td align="left">DISCONTINUED</td>
<td align="left">ADVERSE EVENT</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div id="randomization_date" class="section level3">
<h3>Randomization Date (<code>RANDDT</code>)</h3>
<p>The function <code>derive_vars_merged()</code> can be used to derive
randomization date variable. To map Randomization Date
(<code>RANDDT</code>), the call would be:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    <span class="at">dataset_add =</span> ds_ext,</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    <span class="at">filter_add =</span> DSDECOD <span class="sc">==</span> <span class="st">&quot;RANDOMIZED&quot;</span>,</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">RANDDT =</span> DSSTDT)</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>  )</span></code></pre></div>
<p>This call would return the input dataset with the column
<code>RANDDT</code> is added.</p>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">RANDDT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-05</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2013-07-19</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-03-18</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-07-01</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-02-12</td>
</tr>
<tr class="odd">
<td align="left">01-701-1057</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-701-1097</td>
<td align="left">2014-01-01</td>
</tr>
<tr class="odd">
<td align="left">01-701-1111</td>
<td align="left">2012-09-07</td>
</tr>
<tr class="even">
<td align="left">01-701-1115</td>
<td align="left">2012-11-30</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="death" class="section level2">
<h2>Derive Death Variables</h2>
<div id="death_date" class="section level3">
<h3>Death Date (<code>DTHDT</code>)</h3>
<p>The function <code>derive_vars_dt()</code> can be used to derive
<code>DTHDT</code>. This function allows the user to impute the date as
well.</p>
<p>Example calls:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">derive_vars_dt</span>(</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>    <span class="at">new_vars_prefix =</span> <span class="st">&quot;DTH&quot;</span>,</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="at">dtc =</span> DTHDTC</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRTEDT</th>
<th align="left">DTHDTC</th>
<th align="left">DTHDT</th>
<th align="left">DTHFL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1211</td>
<td align="left">2013-01-12</td>
<td align="left">2013-01-14</td>
<td align="left">2013-01-14</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-701-1442</td>
<td align="left">2014-04-26</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-704-1445</td>
<td align="left">2014-11-01</td>
<td align="left">2014-11-01</td>
<td align="left">2014-11-01</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-705-1058</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-708-1347</td>
<td align="left">2013-06-18</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-710-1083</td>
<td align="left">2013-08-01</td>
<td align="left">2013-08-02</td>
<td align="left">2013-08-02</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-710-1235</td>
<td align="left">2013-03-27</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">01-715-1207</td>
<td align="left">2013-05-27</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">01-718-1172</td>
<td align="left">2013-11-29</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>This call would return the input dataset with the columns
<code>DTHDT</code> added and, by default, the associated date imputation
flag (<code>DTHDTF</code>) populated with the controlled terminology
outlined in the ADaM IG for date imputations. If the imputation flag is
not required, the user must set the argument
<code>flag_imputation</code> to <code>&quot;none&quot;</code>.</p>
<p>If imputation is needed and the date is to be imputed to the first
day of the month/year the call would be:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="fu">derive_vars_dt</span>(</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>    <span class="at">new_vars_prefix =</span> <span class="st">&quot;DTH&quot;</span>,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="at">dtc =</span> DTHDTC,</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>    <span class="at">date_imputation =</span> <span class="st">&quot;first&quot;</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>  )</span></code></pre></div>
<p>See also <a href="imputation.html">Date and Time Imputation</a>.</p>
</div>
<div id="death_cause" class="section level3">
<h3>Cause of Death (<code>DTHCAUS</code>)</h3>
<p>The cause of death <code>DTHCAUS</code> can be derived using the
function <code>derive_vars_extreme_event()</code>.</p>
<p>Since the cause of death could be collected/mapped in different
domains (e.g. <code>DS</code>, <code>AE</code>, <code>DD</code>), it is
important the user specifies the right source(s) to derive the cause of
death from.</p>
<p>For example, if the date of death is collected in the AE form when
the AE is Fatal, the cause of death would be set to the preferred term
(<code>AEDECOD</code>) of that Fatal AE, while if the date of death is
collected in the <code>DS</code> form, the cause of death would be set
to the disposition term (<code>DSTERM</code>). To achieve this, the
<code>event()</code> objects within
<code>derive_vars_extreme_event()</code> must be specified and defined
such that they fit the study requirement.</p>
<p>An example call to <code>derive_vars_extreme_event()</code> would
be:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="fu">derive_vars_extreme_event</span>(</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>    <span class="at">events =</span> <span class="fu">list</span>(</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>        <span class="at">condition =</span> AEOUT <span class="sc">==</span> <span class="st">&quot;FATAL&quot;</span>,</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">DTHCAUS =</span> AEDECOD),</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>      ),</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;ds&quot;</span>,</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a>        <span class="at">condition =</span> DSDECOD <span class="sc">==</span> <span class="st">&quot;DEATH&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;DEATH DUE TO&quot;</span>, DSTERM),</span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">DTHCAUS =</span> DSTERM),</span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a>      )</span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a>    ),</span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a>    <span class="at">source_datasets =</span> <span class="fu">list</span>(<span class="at">ae =</span> ae, <span class="at">ds =</span> ds),</span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a>    <span class="at">tmp_event_nr_var =</span> event_nr,</span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a>    <span class="at">order =</span> <span class="fu">exprs</span>(event_nr),</span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;first&quot;</span>,</span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(DTHCAUS)</span>
<span id="cb15-21"><a href="#cb15-21" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="17%" />
<col width="16%" />
<col width="16%" />
<col width="16%" />
<col width="32%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">EOSDT</th>
<th align="left">DTHDTC</th>
<th align="left">DTHDT</th>
<th align="left">DTHCAUS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1211</td>
<td align="left">2013-01-14</td>
<td align="left">2013-01-14</td>
<td align="left">2013-01-14</td>
<td align="left">SUDDEN DEATH</td>
</tr>
<tr class="even">
<td align="left">01-704-1445</td>
<td align="left">2014-11-01</td>
<td align="left">2014-11-01</td>
<td align="left">2014-11-01</td>
<td align="left">COMPLETED SUICIDE</td>
</tr>
<tr class="odd">
<td align="left">01-710-1083</td>
<td align="left">2013-08-02</td>
<td align="left">2013-08-02</td>
<td align="left">2013-08-02</td>
<td align="left">MYOCARDIAL INFARCTION</td>
</tr>
</tbody>
</table>
<p>The function also offers the option to add some traceability
variables (e.g. <code>DTHDOM</code> would store the domain where the
date of death is collected, and <code>DTHSEQ</code> would store the
<code>xxSEQ</code> value of that domain). The traceability variables
should be added to the <code>event()</code> calls and included in the
<code>new_vars</code> parameter of
<code>derive_vars_extreme_event()</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>DTHCAUS) <span class="sc">%&gt;%</span> <span class="co"># remove it before deriving it again</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="fu">derive_vars_extreme_event</span>(</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>    <span class="at">events =</span> <span class="fu">list</span>(</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>        <span class="at">condition =</span> AEOUT <span class="sc">==</span> <span class="st">&quot;FATAL&quot;</span>,</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">DTHCAUS =</span> AEDECOD, <span class="at">DTHDOM =</span> <span class="st">&quot;AE&quot;</span>, <span class="at">DTHSEQ =</span> AESEQ),</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>      ),</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;ds&quot;</span>,</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>        <span class="at">condition =</span> DSDECOD <span class="sc">==</span> <span class="st">&quot;DEATH&quot;</span> <span class="sc">&amp;</span> <span class="fu">grepl</span>(<span class="st">&quot;DEATH DUE TO&quot;</span>, DSTERM),</span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">DTHCAUS =</span> DSTERM, <span class="at">DTHDOM =</span> <span class="st">&quot;DS&quot;</span>, <span class="at">DTHSEQ =</span> DSSEQ),</span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a>      )</span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a>    ),</span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a>    <span class="at">source_datasets =</span> <span class="fu">list</span>(<span class="at">ae =</span> ae, <span class="at">ds =</span> ds),</span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a>    <span class="at">tmp_event_nr_var =</span> event_nr,</span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a>    <span class="at">order =</span> <span class="fu">exprs</span>(event_nr),</span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;first&quot;</span>,</span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(DTHCAUS, DTHDOM, DTHSEQ)</span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="14%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="27%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRTEDT</th>
<th align="left">DTHDTC</th>
<th align="left">DTHDT</th>
<th align="left">DTHCAUS</th>
<th align="left">DTHDOM</th>
<th align="right">DTHSEQ</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1211</td>
<td align="left">2013-01-12</td>
<td align="left">2013-01-14</td>
<td align="left">2013-01-14</td>
<td align="left">SUDDEN DEATH</td>
<td align="left">AE</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">01-704-1445</td>
<td align="left">2014-11-01</td>
<td align="left">2014-11-01</td>
<td align="left">2014-11-01</td>
<td align="left">COMPLETED SUICIDE</td>
<td align="left">AE</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">01-710-1083</td>
<td align="left">2013-08-01</td>
<td align="left">2013-08-02</td>
<td align="left">2013-08-02</td>
<td align="left">MYOCARDIAL INFARCTION</td>
<td align="left">AE</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Following the derivation of <code>DTHCAUS</code> and related
traceability variables, it is then possible to derive grouping variables
such as death categories (<code>DTHCGRx</code>) using standard tidyverse
code.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DTHCGR1 =</span> <span class="fu">case_when</span>(</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>    <span class="fu">is.na</span>(DTHDOM) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>    DTHDOM <span class="sc">==</span> <span class="st">&quot;AE&quot;</span> <span class="sc">~</span> <span class="st">&quot;ADVERSE EVENT&quot;</span>,</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>    <span class="fu">str_detect</span>(DTHCAUS, <span class="st">&quot;(PROGRESSIVE DISEASE|DISEASE RELAPSE)&quot;</span>) <span class="sc">~</span> <span class="st">&quot;PROGRESSIVE DISEASE&quot;</span>,</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;OTHER&quot;</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>  ))</span></code></pre></div>
</div>
<div id="death_other" class="section level3">
<h3>Duration Relative to Death</h3>
<p>The function <code>derive_vars_duration()</code> can be used to
derive duration relative to death like the Relative Day of Death
(<code>DTHADY</code>) or the numbers of days from last dose to death
(<code>LDDTHELD</code>).</p>
<p>Example calls:</p>
<ul>
<li>Relative Day of Death</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  <span class="fu">derive_vars_duration</span>(</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>    <span class="at">new_var =</span> DTHADY,</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>    <span class="at">start_date =</span> TRTSDT,</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>    <span class="at">end_date =</span> DTHDT</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>  )</span></code></pre></div>
<ul>
<li>Elapsed Days from Last Dose to Death</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  <span class="fu">derive_vars_duration</span>(</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>    <span class="at">new_var =</span> LDDTHELD,</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>    <span class="at">start_date =</span> TRTEDT,</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>    <span class="at">end_date =</span> DTHDT,</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="at">add_one =</span> <span class="cn">FALSE</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="14%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="26%" />
<col width="8%" />
<col width="10%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRTEDT</th>
<th align="left">DTHDTC</th>
<th align="left">DTHDT</th>
<th align="left">DTHCAUS</th>
<th align="right">DTHADY</th>
<th align="right">LDDTHELD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1211</td>
<td align="left">2013-01-12</td>
<td align="left">2013-01-14</td>
<td align="left">2013-01-14</td>
<td align="left">SUDDEN DEATH</td>
<td align="right">61</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">01-704-1445</td>
<td align="left">2014-11-01</td>
<td align="left">2014-11-01</td>
<td align="left">2014-11-01</td>
<td align="left">COMPLETED SUICIDE</td>
<td align="right">175</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">01-710-1083</td>
<td align="left">2013-08-01</td>
<td align="left">2013-08-02</td>
<td align="left">2013-08-02</td>
<td align="left">MYOCARDIAL INFARCTION</td>
<td align="right">12</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="lstalvdt" class="section level2">
<h2>Derive the Last Date Known Alive (<code>LSTALVDT</code>)</h2>
<p>Similarly as for the cause of death (<code>DTHCAUS</code>), the last
known alive date (<code>LSTALVDT</code>) can be derived from multiples
sources using <code>derive_vars_extreme_event()</code>.</p>
<p>An example could be (DTC dates are converted to numeric dates
imputing missing day and month to the first):</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  <span class="fu">derive_vars_extreme_event</span>(</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>    <span class="at">events =</span> <span class="fu">list</span>(</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>        <span class="at">order =</span> <span class="fu">exprs</span>(AESTDTC, AESEQ),</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>        <span class="at">condition =</span> <span class="sc">!</span><span class="fu">is.na</span>(AESTDTC),</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>          <span class="at">LSTALVDT =</span> <span class="fu">convert_dtc_to_dt</span>(AESTDTC, <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span>),</span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a>          <span class="at">seq =</span> AESEQ</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>        ),</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>      ),</span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a>        <span class="at">order =</span> <span class="fu">exprs</span>(AEENDTC, AESEQ),</span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a>        <span class="at">condition =</span> <span class="sc">!</span><span class="fu">is.na</span>(AEENDTC),</span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>          <span class="at">LSTALVDT =</span> <span class="fu">convert_dtc_to_dt</span>(AEENDTC, <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span>),</span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a>          <span class="at">seq =</span> AESEQ</span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a>        ),</span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a>      ),</span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb20-24"><a href="#cb20-24" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;lb&quot;</span>,</span>
<span id="cb20-25"><a href="#cb20-25" tabindex="-1"></a>        <span class="at">order =</span> <span class="fu">exprs</span>(LBDTC, LBSEQ),</span>
<span id="cb20-26"><a href="#cb20-26" tabindex="-1"></a>        <span class="at">condition =</span> <span class="sc">!</span><span class="fu">is.na</span>(LBDTC),</span>
<span id="cb20-27"><a href="#cb20-27" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb20-28"><a href="#cb20-28" tabindex="-1"></a>          <span class="at">LSTALVDT =</span> <span class="fu">convert_dtc_to_dt</span>(LBDTC, <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span>),</span>
<span id="cb20-29"><a href="#cb20-29" tabindex="-1"></a>          <span class="at">seq =</span> LBSEQ</span>
<span id="cb20-30"><a href="#cb20-30" tabindex="-1"></a>        ),</span>
<span id="cb20-31"><a href="#cb20-31" tabindex="-1"></a>      ),</span>
<span id="cb20-32"><a href="#cb20-32" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb20-33"><a href="#cb20-33" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb20-34"><a href="#cb20-34" tabindex="-1"></a>        <span class="at">condition =</span> <span class="sc">!</span><span class="fu">is.na</span>(TRTEDT),</span>
<span id="cb20-35"><a href="#cb20-35" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">LSTALVDT =</span> TRTEDT, <span class="at">seq =</span> <span class="dv">0</span>),</span>
<span id="cb20-36"><a href="#cb20-36" tabindex="-1"></a>      )</span>
<span id="cb20-37"><a href="#cb20-37" tabindex="-1"></a>    ),</span>
<span id="cb20-38"><a href="#cb20-38" tabindex="-1"></a>    <span class="at">source_datasets =</span> <span class="fu">list</span>(<span class="at">ae =</span> ae, <span class="at">lb =</span> lb, <span class="at">adsl =</span> adsl),</span>
<span id="cb20-39"><a href="#cb20-39" tabindex="-1"></a>    <span class="at">tmp_event_nr_var =</span> event_nr,</span>
<span id="cb20-40"><a href="#cb20-40" tabindex="-1"></a>    <span class="at">order =</span> <span class="fu">exprs</span>(LSTALVDT, seq, event_nr),</span>
<span id="cb20-41"><a href="#cb20-41" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;last&quot;</span>,</span>
<span id="cb20-42"><a href="#cb20-42" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(LSTALVDT)</span>
<span id="cb20-43"><a href="#cb20-43" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRTEDT</th>
<th align="left">DTHDTC</th>
<th align="left">LSTALVDT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-07-02</td>
<td align="left">NA</td>
<td align="left">2014-07-02</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-09-01</td>
<td align="left">NA</td>
<td align="left">2012-09-02</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2014-01-14</td>
<td align="left">NA</td>
<td align="left">2014-01-14</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-03-31</td>
<td align="left">NA</td>
<td align="left">2014-04-14</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-12-30</td>
<td align="left">NA</td>
<td align="left">2014-12-30</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-03-09</td>
<td align="left">NA</td>
<td align="left">2013-04-07</td>
</tr>
<tr class="odd">
<td align="left">01-701-1097</td>
<td align="left">2014-07-09</td>
<td align="left">NA</td>
<td align="left">2014-07-09</td>
</tr>
<tr class="even">
<td align="left">01-701-1111</td>
<td align="left">2012-09-16</td>
<td align="left">NA</td>
<td align="left">2012-09-17</td>
</tr>
<tr class="odd">
<td align="left">01-701-1115</td>
<td align="left">2013-01-23</td>
<td align="left">NA</td>
<td align="left">2013-01-23</td>
</tr>
<tr class="even">
<td align="left">01-701-1118</td>
<td align="left">2014-09-09</td>
<td align="left">NA</td>
<td align="left">2014-09-09</td>
</tr>
</tbody>
</table>
<p>Traceability variables can be added by specifying the variables in
the <code>set_values_to</code> parameter of the <code>event()</code>
function.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>LSTALVDT) <span class="sc">%&gt;%</span> <span class="co"># created in the previous call</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="fu">derive_vars_extreme_event</span>(</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    <span class="at">events =</span> <span class="fu">list</span>(</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>        <span class="at">order =</span> <span class="fu">exprs</span>(AESTDTC, AESEQ),</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>        <span class="at">condition =</span> <span class="sc">!</span><span class="fu">is.na</span>(AESTDTC),</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>          <span class="at">LSTALVDT =</span> <span class="fu">convert_dtc_to_dt</span>(AESTDTC, <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span>),</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>          <span class="at">LALVSEQ =</span> AESEQ,</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>          <span class="at">LALVDOM =</span> <span class="st">&quot;AE&quot;</span>,</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>          <span class="at">LALVVAR =</span> <span class="st">&quot;AESTDTC&quot;</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>        ),</span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>      ),</span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;ae&quot;</span>,</span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a>        <span class="at">order =</span> <span class="fu">exprs</span>(AEENDTC, AESEQ),</span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>        <span class="at">condition =</span> <span class="sc">!</span><span class="fu">is.na</span>(AEENDTC),</span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a>          <span class="at">LSTALVDT =</span> <span class="fu">convert_dtc_to_dt</span>(AEENDTC, <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span>),</span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a>          <span class="at">LALVSEQ =</span> AESEQ,</span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a>          <span class="at">LALVDOM =</span> <span class="st">&quot;AE&quot;</span>,</span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a>          <span class="at">LALVVAR =</span> <span class="st">&quot;AEENDTC&quot;</span></span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a>        ),</span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a>      ),</span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;lb&quot;</span>,</span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a>        <span class="at">order =</span> <span class="fu">exprs</span>(LBDTC, LBSEQ),</span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a>        <span class="at">condition =</span> <span class="sc">!</span><span class="fu">is.na</span>(LBDTC),</span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(</span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a>          <span class="at">LSTALVDT =</span> <span class="fu">convert_dtc_to_dt</span>(LBDTC, <span class="at">highest_imputation =</span> <span class="st">&quot;M&quot;</span>),</span>
<span id="cb21-34"><a href="#cb21-34" tabindex="-1"></a>          <span class="at">LALVSEQ =</span> LBSEQ,</span>
<span id="cb21-35"><a href="#cb21-35" tabindex="-1"></a>          <span class="at">LALVDOM =</span> <span class="st">&quot;LB&quot;</span>,</span>
<span id="cb21-36"><a href="#cb21-36" tabindex="-1"></a>          <span class="at">LALVVAR =</span> <span class="st">&quot;LBDTC&quot;</span></span>
<span id="cb21-37"><a href="#cb21-37" tabindex="-1"></a>        ),</span>
<span id="cb21-38"><a href="#cb21-38" tabindex="-1"></a>      ),</span>
<span id="cb21-39"><a href="#cb21-39" tabindex="-1"></a>      <span class="fu">event</span>(</span>
<span id="cb21-40"><a href="#cb21-40" tabindex="-1"></a>        <span class="at">dataset_name =</span> <span class="st">&quot;adsl&quot;</span>,</span>
<span id="cb21-41"><a href="#cb21-41" tabindex="-1"></a>        <span class="at">condition =</span> <span class="sc">!</span><span class="fu">is.na</span>(TRTEDT),</span>
<span id="cb21-42"><a href="#cb21-42" tabindex="-1"></a>        <span class="at">set_values_to =</span> <span class="fu">exprs</span>(<span class="at">LSTALVDT =</span> TRTEDT, <span class="at">LALVSEQ =</span> <span class="cn">NA_integer_</span>, <span class="at">LALVDOM =</span> <span class="st">&quot;ADSL&quot;</span>, <span class="at">LALVVAR =</span> <span class="st">&quot;TRTEDTM&quot;</span>),</span>
<span id="cb21-43"><a href="#cb21-43" tabindex="-1"></a>      )</span>
<span id="cb21-44"><a href="#cb21-44" tabindex="-1"></a>    ),</span>
<span id="cb21-45"><a href="#cb21-45" tabindex="-1"></a>    <span class="at">source_datasets =</span> <span class="fu">list</span>(<span class="at">ae =</span> ae, <span class="at">lb =</span> lb, <span class="at">adsl =</span> adsl),</span>
<span id="cb21-46"><a href="#cb21-46" tabindex="-1"></a>    <span class="at">tmp_event_nr_var =</span> event_nr,</span>
<span id="cb21-47"><a href="#cb21-47" tabindex="-1"></a>    <span class="at">order =</span> <span class="fu">exprs</span>(LSTALVDT, LALVSEQ, event_nr),</span>
<span id="cb21-48"><a href="#cb21-48" tabindex="-1"></a>    <span class="at">mode =</span> <span class="st">&quot;last&quot;</span>,</span>
<span id="cb21-49"><a href="#cb21-49" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(LSTALVDT, LALVSEQ, LALVDOM, LALVVAR)</span>
<span id="cb21-50"><a href="#cb21-50" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="18%" />
<col width="16%" />
<col width="10%" />
<col width="16%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRTEDT</th>
<th align="left">DTHDTC</th>
<th align="left">LSTALVDT</th>
<th align="left">LALVDOM</th>
<th align="right">LALVSEQ</th>
<th align="left">LALVVAR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-07-02</td>
<td align="left">NA</td>
<td align="left">2014-07-02</td>
<td align="left">ADSL</td>
<td align="right">NA</td>
<td align="left">TRTEDTM</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-09-01</td>
<td align="left">NA</td>
<td align="left">2012-09-02</td>
<td align="left">LB</td>
<td align="right">107</td>
<td align="left">LBDTC</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2014-01-14</td>
<td align="left">NA</td>
<td align="left">2014-01-14</td>
<td align="left">ADSL</td>
<td align="right">NA</td>
<td align="left">TRTEDTM</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-03-31</td>
<td align="left">NA</td>
<td align="left">2014-04-14</td>
<td align="left">LB</td>
<td align="right">107</td>
<td align="left">LBDTC</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-12-30</td>
<td align="left">NA</td>
<td align="left">2014-12-30</td>
<td align="left">ADSL</td>
<td align="right">NA</td>
<td align="left">TRTEDTM</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-03-09</td>
<td align="left">NA</td>
<td align="left">2013-04-07</td>
<td align="left">LB</td>
<td align="right">134</td>
<td align="left">LBDTC</td>
</tr>
<tr class="odd">
<td align="left">01-701-1097</td>
<td align="left">2014-07-09</td>
<td align="left">NA</td>
<td align="left">2014-07-09</td>
<td align="left">ADSL</td>
<td align="right">NA</td>
<td align="left">TRTEDTM</td>
</tr>
<tr class="even">
<td align="left">01-701-1111</td>
<td align="left">2012-09-16</td>
<td align="left">NA</td>
<td align="left">2012-09-17</td>
<td align="left">LB</td>
<td align="right">73</td>
<td align="left">LBDTC</td>
</tr>
<tr class="odd">
<td align="left">01-701-1115</td>
<td align="left">2013-01-23</td>
<td align="left">NA</td>
<td align="left">2013-01-23</td>
<td align="left">ADSL</td>
<td align="right">NA</td>
<td align="left">TRTEDTM</td>
</tr>
<tr class="even">
<td align="left">01-701-1118</td>
<td align="left">2014-09-09</td>
<td align="left">NA</td>
<td align="left">2014-09-09</td>
<td align="left">ADSL</td>
<td align="right">NA</td>
<td align="left">TRTEDTM</td>
</tr>
</tbody>
</table>
</div>
<div id="groupings" class="section level2">
<h2>Derive Groupings and Populations</h2>
<div id="groupings_ex" class="section level3">
<h3>Grouping (e.g. <code>AGEGR1</code> or <code>REGION1</code>)</h3>
<p>Numeric and categorical variables (<code>AGE</code>,
<code>RACE</code>, <code>COUNTRY</code>, etc.) may need to be grouped to
perform the required analysis. <code>{admiral}</code> provides the
<code>derive_vars_cat()</code> function to create such groups. This
function is especially useful if more than one variable needs to be
created for each condition, e.g., <code>AGEGR1</code> and
<code>AGEGR1N</code>.</p>
<p>Additionally, one needs to be careful when considering the order of
the conditions in the lookup table. The category is assigned based on
the first match. That means <em>catch-all</em> conditions must come
after specific conditions, e.g. <code>!is.na(COUNTRY)</code> must come
after <code>COUNTRY %in% c(&quot;CAN&quot;, &quot;USA&quot;)</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># create lookup tables</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>agegr1_lookup <span class="ot">&lt;-</span> <span class="fu">exprs</span>(</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>  <span class="sc">~</span>condition,           <span class="sc">~</span>AGEGR1,</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>  AGE <span class="sc">&lt;</span> <span class="dv">18</span>,               <span class="st">&quot;&lt;18&quot;</span>,</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>  <span class="fu">between</span>(AGE, <span class="dv">18</span>, <span class="dv">64</span>), <span class="st">&quot;18-64&quot;</span>,</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>  AGE <span class="sc">&gt;</span> <span class="dv">64</span>,               <span class="st">&quot;&gt;64&quot;</span>,</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>  <span class="fu">is.na</span>(AGE),         <span class="st">&quot;Missing&quot;</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a>)</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a>region1_lookup <span class="ot">&lt;-</span> <span class="fu">exprs</span>(</span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a>  <span class="sc">~</span>condition,                          <span class="sc">~</span>REGION1,</span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a>  COUNTRY <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>), <span class="st">&quot;North America&quot;</span>,</span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(COUNTRY),          <span class="st">&quot;Rest of the World&quot;</span>,</span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a>  <span class="fu">is.na</span>(COUNTRY),                     <span class="st">&quot;Missing&quot;</span></span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  <span class="fu">derive_vars_cat</span>(</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>    <span class="at">definition =</span> agegr1_lookup</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>  <span class="fu">derive_vars_cat</span>(</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>    <span class="at">definition =</span> region1_lookup</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>  )</span></code></pre></div>
<p>Alternatively, you can also solve this task with custom
functions:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>format_agegr1 <span class="ot">&lt;-</span> <span class="cf">function</span>(var_input) {</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>  <span class="fu">case_when</span>(</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>    var_input <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">&quot;&lt;18&quot;</span>,</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>    <span class="fu">between</span>(var_input, <span class="dv">18</span>, <span class="dv">64</span>) <span class="sc">~</span> <span class="st">&quot;18-64&quot;</span>,</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>    var_input <span class="sc">&gt;</span> <span class="dv">64</span> <span class="sc">~</span> <span class="st">&quot;&gt;64&quot;</span>,</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Missing&quot;</span></span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>  )</span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a>}</span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a>format_region1 <span class="ot">&lt;-</span> <span class="cf">function</span>(var_input) {</span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a>  <span class="fu">case_when</span>(</span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a>    var_input <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>) <span class="sc">~</span> <span class="st">&quot;North America&quot;</span>,</span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(var_input) <span class="sc">~</span> <span class="st">&quot;Rest of the World&quot;</span>,</span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Missing&quot;</span></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a>  )</span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a>}</span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a>adsl <span class="sc">%&gt;%</span></span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-19"><a href="#cb24-19" tabindex="-1"></a>    <span class="at">AGEGR1 =</span> <span class="fu">format_agegr1</span>(AGE),</span>
<span id="cb24-20"><a href="#cb24-20" tabindex="-1"></a>    <span class="at">REGION1 =</span> <span class="fu">format_region1</span>(COUNTRY)</span>
<span id="cb24-21"><a href="#cb24-21" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="right">AGE</th>
<th align="left">SEX</th>
<th align="left">COUNTRY</th>
<th align="left">AGEGR1</th>
<th align="left">REGION1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="right">63</td>
<td align="left">F</td>
<td align="left">USA</td>
<td align="left">18-64</td>
<td align="left">North America</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="right">64</td>
<td align="left">M</td>
<td align="left">USA</td>
<td align="left">18-64</td>
<td align="left">North America</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="right">71</td>
<td align="left">M</td>
<td align="left">USA</td>
<td align="left">&gt;64</td>
<td align="left">North America</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="right">74</td>
<td align="left">M</td>
<td align="left">USA</td>
<td align="left">&gt;64</td>
<td align="left">North America</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="right">77</td>
<td align="left">F</td>
<td align="left">USA</td>
<td align="left">&gt;64</td>
<td align="left">North America</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="right">85</td>
<td align="left">F</td>
<td align="left">USA</td>
<td align="left">&gt;64</td>
<td align="left">North America</td>
</tr>
<tr class="odd">
<td align="left">01-701-1057</td>
<td align="right">59</td>
<td align="left">F</td>
<td align="left">USA</td>
<td align="left">18-64</td>
<td align="left">North America</td>
</tr>
<tr class="even">
<td align="left">01-701-1097</td>
<td align="right">68</td>
<td align="left">M</td>
<td align="left">USA</td>
<td align="left">&gt;64</td>
<td align="left">North America</td>
</tr>
<tr class="odd">
<td align="left">01-701-1111</td>
<td align="right">81</td>
<td align="left">F</td>
<td align="left">USA</td>
<td align="left">&gt;64</td>
<td align="left">North America</td>
</tr>
<tr class="even">
<td align="left">01-701-1115</td>
<td align="right">84</td>
<td align="left">M</td>
<td align="left">USA</td>
<td align="left">&gt;64</td>
<td align="left">North America</td>
</tr>
</tbody>
</table>
</div>
<div id="popflag" class="section level3">
<h3>Population Flags (e.g. <code>SAFFL</code>)</h3>
<p>Since the populations flags are mainly company/study specific no
dedicated functions are provided, but in most cases they can easily be
derived using <code>derive_var_merged_exist_flag</code>.</p>
<p>An example of an implementation could be:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>adsl <span class="ot">&lt;-</span> adsl <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>  <span class="fu">derive_var_merged_exist_flag</span>(</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>    <span class="at">dataset_add =</span> ex,</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(STUDYID, USUBJID),</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>    <span class="at">new_var =</span> SAFFL,</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>    <span class="at">false_value =</span> <span class="st">&quot;N&quot;</span>,</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>    <span class="at">missing_value =</span> <span class="st">&quot;N&quot;</span>,</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>    <span class="at">condition =</span> (EXDOSE <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">|</span> (EXDOSE <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> <span class="fu">str_detect</span>(EXTRT, <span class="st">&quot;PLACEBO&quot;</span>)))</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>  )</span></code></pre></div>
<table>
<colgroup>
<col width="16%" />
<col width="15%" />
<col width="29%" />
<col width="29%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">TRTSDT</th>
<th align="left">ARM</th>
<th align="left">ACTARM</th>
<th align="left">SAFFL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1015</td>
<td align="left">2014-01-02</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2012-08-05</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-701-1028</td>
<td align="left">2013-07-19</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-701-1033</td>
<td align="left">2014-03-18</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-701-1034</td>
<td align="left">2014-07-01</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Xanomeline High Dose</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-701-1047</td>
<td align="left">2013-02-12</td>
<td align="left">Placebo</td>
<td align="left">Placebo</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-701-1057</td>
<td align="left">NA</td>
<td align="left">Screen Failure</td>
<td align="left">Screen Failure</td>
<td align="left">N</td>
</tr>
<tr class="even">
<td align="left">01-701-1097</td>
<td align="left">2014-01-01</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Y</td>
</tr>
<tr class="odd">
<td align="left">01-701-1111</td>
<td align="left">2012-09-07</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Y</td>
</tr>
<tr class="even">
<td align="left">01-701-1115</td>
<td align="left">2012-11-30</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Xanomeline Low Dose</td>
<td align="left">Y</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="other" class="section level2">
<h2>Derive Other Variables</h2>
<p>The users can add specific code to cover their need for the
analysis.</p>
<p>The following functions are helpful for many ADSL derivations:</p>
<ul>
<li><code>derive_vars_merged()</code> - Merge Variables from a Dataset
to the Input Dataset</li>
<li><code>derive_var_merged_exist_flag()</code> - Merge an Existence
Flag</li>
<li><code>derive_var_merged_summary()</code> - Merge Summary
Variables</li>
</ul>
<p>See also <a href="generic.html">Generic Functions</a>.</p>
</div>
<div id="attributes" class="section level2">
<h2>Add Labels and Attributes</h2>
<p>Adding labels and attributes for SAS transport files is supported by
the following packages:</p>
<ul>
<li><p><a href="https://atorus-research.github.io/metacore/">metacore</a>:
establish a common foundation for the use of metadata within an R
session.</p></li>
<li><p><a href="https://pharmaverse.github.io/metatools/">metatools</a>:
enable the use of metacore objects. Metatools can be used to build
datasets or enhance columns in existing datasets as well as checking
datasets against the metadata.</p></li>
<li><p><a href="https://atorus-research.github.io/xportr/">xportr</a>:
functionality to associate all metadata information to a local R data
frame, perform data set level validation checks and convert into a <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/movefile/n1xbwdre0giahfn11c99yjkpi2yb.htm">transport
v5 file(xpt)</a>.</p></li>
</ul>
<p>NOTE: All these packages are in the experimental phase, but the
vision is to have them associated with an End to End pipeline under the
umbrella of the <a href="https://github.com/pharmaverse">pharmaverse</a>. An example of
applying metadata and perform associated checks can be found at the <a href="https://pharmaverse.github.io/examples/adam/adsl">pharmaverse E2E
example</a>.</p>
</div>
</div>
<div id="example-script" class="section level1">
<h1>Example Script</h1>
<table>
<thead>
<tr class="header">
<th>ADaM</th>
<th>Sourcing Command</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ADSL</td>
<td><code>use_ad_template(&quot;ADSL&quot;)</code></td>
</tr>
</tbody>
</table>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
