<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Creating a Pediatrics ADVS ADaM</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Creating a Pediatrics ADVS ADaM</h1>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This article describes creating a vital signs ADaM for pediatric
clinical trials. This package creates SD scores (z-scores) and
percentiles among children and adolescents for various body measures,
such as Height, Weight, Body Mass Index (BMI), Weight-for-Length, and
Head Circumference. Among adults, standard cut-points can be used (e.g.,
a BMI &gt;= 30 for obesity), but because of the large changes that occur
during growth and development, these measures are typically expressed
relative to other children of the same sex and age. For example, the CDC
classifies obesity as a BMI-for-age &gt;= 95th percentile (a z-score of
1.645), while the WHO cut point is a weight-for-length &gt;= 3 SDs among
children under 2 years of age.</p>
<p>We advise you first consult the <code>{admiral}</code> <a href="https://pharmaverse.github.io/admiral/articles/bds_finding.html">Creating
a BDS Finding ADaM vignette</a>. The programming workflow around
creating the general set-up of an ADVS using <code>{admiral}</code>
functions is the same. We focus on only the pediatric-specific steps
here to avoid repeating information and maintaining the same content in
two places.</p>
<p><strong>Note</strong>: <em>All examples assume CDISC SDTM and/or ADaM
format as input unless otherwise specified.</em></p>
</div>
<div id="programming-workflow" class="section level1">
<h1>Programming Workflow</h1>
<ul>
<li><a href="#metadata">Metadata</a></li>
<li><a href="#advs_start">Initial ADVS Set-up</a></li>
<li><a href="#derive_vars">Derive Additional Variables for
Anthropometric indicators</a></li>
<li><a href="#derive_params">Derive Additional Parameters for
Anthropometric indicators</a></li>
<li><a href="#advs_end">Remaining ADVS Set-up</a></li>
</ul>
<div id="metadata" class="section level2">
<h2>Metadata</h2>
<p>Once the required packages have been loaded, the first step is
preparing the metadata.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(admiral)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(pharmaversesdtm, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(admiralpeds)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">library</span>(rlang)</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<p>Here, we have made some default decisions regarding which metadata to
use in the package. But you are free to replace these with any other
source you prefer (as long as you keep the structure of the dataframe
consistent - as expected by our downstream functions). For example, you
might want to use a different age range selection of WHO metadata (such
as including WHO reference data for between ages <a href="https://www.who.int/tools/growth-reference-data-for-5to19-years/indicators">5-19
years</a>) or the International Obesity Task Force reference data.</p>
<p>The selection of growth reference files we included and used as
metadata for this package are as follows:</p>
<ul>
<li><a href="https://www.cdc.gov/growthcharts/percentile_data_files.htm">2000
CDC Growth Charts</a></li>
<li>For BMI only: <a href="https://www.cdc.gov/growthcharts/extended-bmi.htm">2022 CDC
Extended BMI-for-age Growth Charts</a></li>
<li><a href="https://www.who.int/toolkits/child-growth-standards/standards">2006
WHO Growth Standards</a> - Expanded Tables: Birth to 5 years</li>
</ul>
<div id="reference-files-for-parameters-by-age" class="section level3">
<h3>Reference Files for Parameters by Age</h3>
<p>As growth rates and patterns differ by age and sex, reference values
differ by these two characteristics.</p>
<p>For the various measures, we use the WHO reference data for children
&lt;2 years of age (&lt;730.5 days) and CDC growth charts for children
&gt;=2 years of age (&gt;=730.5 days). This is in accord with the <a href="https://www.cdc.gov/growthcharts/who_charts.htm">CDC
recommendation</a>. The reference data for both charts include the LMS
parameters, in which L is the Box-Cox transformation for normality, M is
the median, and S is the coefficient of variation.</p>
<p>So, the first step is combining the metadata for each measure and
ensuring sex and age are shown consistently. We separate WHO and CDC
metadata for weight-based derivations due to (1) the WHO adjustment
(restricted application of the LMS method) and (2) the CDC extended
method for high BMIs.</p>
<p>Additionally, as the CDC growth charts only offer monthly age
intervals, on the advice of a retired CDC expert in this area, we added
interpolation code in our template to have a record for each day of age.
When converting the CDC months into days (30.4375 days in a month), we
rounded to the nearest whole number of days. Relying on the monthly
charts will result in less accurate calculations, particularly for
weight and height values among children who are 2 years of age. If you
would prefer to rely solely on the monthly chart here, then you could
remove the rounding and the call to the
<code>derive_interp_records()</code> function.</p>
<p>We do this pre-processing of the metadata using the following code
for BMI as an example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>who_bmi_for_age_boys <span class="ot">&lt;-</span> admiralpeds<span class="sc">::</span>who_bmi_for_age_boys</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>who_bmi_for_age_girls <span class="ot">&lt;-</span> admiralpeds<span class="sc">::</span>who_bmi_for_age_girls</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>cdc_bmiage <span class="ot">&lt;-</span> admiralpeds<span class="sc">::</span>cdc_bmiage</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>who_bmi_for_age <span class="ot">&lt;-</span> who_bmi_for_age_boys <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SEX =</span> <span class="st">&quot;M&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="fu">bind_rows</span>(who_bmi_for_age_girls <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">SEX =</span> <span class="st">&quot;F&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  <span class="co"># Keep patients &lt; 2 yrs old</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>  <span class="fu">filter</span>(Day <span class="sc">&lt;</span> <span class="fl">730.5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">AGE =</span> Day) <span class="sc">%&gt;%</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>  <span class="co"># AGEU is added in metadata, required for derive_params_growth_age()</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">AGEU =</span> <span class="st">&quot;DAYS&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>  <span class="fu">arrange</span>(AGE, SEX)</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>cdc_bmi_for_age <span class="ot">&lt;-</span> cdc_bmiage <span class="sc">%&gt;%</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>    <span class="at">SEX =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>      SEX <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;M&quot;</span>,</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>      SEX <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;F&quot;</span>,</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a>    ),</span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>    <span class="co"># Ensure first that Age unit is &quot;DAYS&quot;</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>    <span class="at">AGE =</span> <span class="fu">round</span>(AGE <span class="sc">*</span> <span class="fl">30.4375</span>),</span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>    <span class="at">AGEU =</span> <span class="st">&quot;DAYS&quot;</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a>  <span class="co"># Interpolate the AGE by SEX so that we get CDC metadata by day instead of</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>  <span class="co"># month in the same way as WHO metadata</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a>  <span class="fu">derive_interp_records</span>(</span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">exprs</span>(SEX),</span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a>    <span class="at">parameter =</span> <span class="st">&quot;BMI&quot;</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a>  <span class="co"># Keep patients &gt;= 2 yrs till 20 yrs - Remove duplicates for 730 Days old which</span></span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a>  <span class="co"># must come from WHO metadata only</span></span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a>  <span class="fu">filter</span>(AGE <span class="sc">&gt;=</span> <span class="fl">730.5</span> <span class="sc">&amp;</span> AGE <span class="sc">&lt;=</span> <span class="dv">7305</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a>  <span class="fu">arrange</span>(AGE, SEX)</span></code></pre></div>
<p>Here is how the first records of the WHO metadata for BMI now
look:</p>
<table>
<thead>
<tr class="header">
<th align="right">AGE</th>
<th align="left">AGEU</th>
<th align="left">SEX</th>
<th align="right">L</th>
<th align="right">M</th>
<th align="right">S</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">-0.0631</td>
<td align="right">13.3363</td>
<td align="right">0.09272</td>
</tr>
<tr class="even">
<td align="right">0</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">-0.3053</td>
<td align="right">13.4069</td>
<td align="right">0.09560</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">0.0362</td>
<td align="right">13.3185</td>
<td align="right">0.09360</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">-0.1867</td>
<td align="right">13.3976</td>
<td align="right">0.09597</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">0.1355</td>
<td align="right">13.3006</td>
<td align="right">0.09448</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">-0.0681</td>
<td align="right">13.3883</td>
<td align="right">0.09634</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">0.2347</td>
<td align="right">13.2828</td>
<td align="right">0.09535</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">0.0505</td>
<td align="right">13.3791</td>
<td align="right">0.09672</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">0.3340</td>
<td align="right">13.2649</td>
<td align="right">0.09623</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">0.1690</td>
<td align="right">13.3698</td>
<td align="right">0.09709</td>
</tr>
</tbody>
</table>
<p>Similarly, for the CDC metadata:</p>
<table>
<thead>
<tr class="header">
<th align="right">AGE</th>
<th align="left">AGEU</th>
<th align="left">SEX</th>
<th align="right">L</th>
<th align="right">M</th>
<th align="right">S</th>
<th align="right">P95</th>
<th align="right">Sigma</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">731</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">-0.9889765</td>
<td align="right">16.42119</td>
<td align="right">0.0854252</td>
<td align="right">19.10324</td>
<td align="right">1.572355</td>
</tr>
<tr class="even">
<td align="right">731</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">-2.0093806</td>
<td align="right">16.57332</td>
<td align="right">0.0805634</td>
<td align="right">19.33432</td>
<td align="right">1.376857</td>
</tr>
<tr class="odd">
<td align="right">732</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">-0.9913446</td>
<td align="right">16.41898</td>
<td align="right">0.0853985</td>
<td align="right">19.10024</td>
<td align="right">1.573310</td>
</tr>
<tr class="even">
<td align="right">732</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">-2.0075801</td>
<td align="right">16.57162</td>
<td align="right">0.0805343</td>
<td align="right">19.33062</td>
<td align="right">1.378115</td>
</tr>
<tr class="odd">
<td align="right">733</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">-0.9937126</td>
<td align="right">16.41677</td>
<td align="right">0.0853719</td>
<td align="right">19.09724</td>
<td align="right">1.574265</td>
</tr>
<tr class="even">
<td align="right">733</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">-2.0057797</td>
<td align="right">16.56992</td>
<td align="right">0.0805053</td>
<td align="right">19.32693</td>
<td align="right">1.379372</td>
</tr>
<tr class="odd">
<td align="right">734</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">-0.9960806</td>
<td align="right">16.41456</td>
<td align="right">0.0853453</td>
<td align="right">19.09424</td>
<td align="right">1.575220</td>
</tr>
<tr class="even">
<td align="right">734</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">-2.0039792</td>
<td align="right">16.56821</td>
<td align="right">0.0804762</td>
<td align="right">19.32323</td>
<td align="right">1.380629</td>
</tr>
<tr class="odd">
<td align="right">735</td>
<td align="left">DAYS</td>
<td align="left">F</td>
<td align="right">-0.9984486</td>
<td align="right">16.41235</td>
<td align="right">0.0853187</td>
<td align="right">19.09124</td>
<td align="right">1.576175</td>
</tr>
<tr class="even">
<td align="right">735</td>
<td align="left">DAYS</td>
<td align="left">M</td>
<td align="right">-2.0021787</td>
<td align="right">16.56651</td>
<td align="right">0.0804471</td>
<td align="right">19.31954</td>
<td align="right">1.381887</td>
</tr>
</tbody>
</table>
<p>For BMI in the CDC metadata, a dispersion parameter (Sigma) is used
to calculate BMI percentiles and z-scores above the sex- and
age-specific 95th percentile (P95).</p>
<p>The above example only shows the parameter BMI, but this follows
other parameters like weight and height. We can combine WHO and CDC
metadata for height as a WHO adjustment is unnecessary. Note that the
head circumference parameter metadata comes only from the WHO reference
data, as CDC provides no equivalent for children &gt; 2 years of
age.</p>
</div>
<div id="reference-files-for-weight-by-lengthheight" class="section level3">
<h3>Reference Files for Weight by Length/Height</h3>
<p>WHO provides additional reference data for weight-for-length
(recumbent length), instead of age. Again, we combined the metadata for
sex to create a single reference file.</p>
<p>There are also weight-by-height files available, but upon advice from
a retired CDC expert in this area, we chose only to include the
weight-for-length files, as once children can stand, BMI by age is a
more appropriate measure to use. However, in our template, we give the
metadata values variable a generic name, <code>HEIGHT_LENGTH</code>, so
that any user could equally choose to pass weight-for-height files if
preferred.</p>
<p>We do this using the following code:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>who_wt_for_lgth_boys <span class="ot">&lt;-</span> admiralpeds<span class="sc">::</span>who_wt_for_lgth_boys</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>who_wt_for_lgth_girls <span class="ot">&lt;-</span> admiralpeds<span class="sc">::</span>who_wt_for_lgth_girls</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>who_wt_for_lgth <span class="ot">&lt;-</span> who_wt_for_lgth_boys <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SEX =</span> <span class="st">&quot;M&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>  <span class="fu">bind_rows</span>(who_wt_for_lgth_girls <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">SEX =</span> <span class="st">&quot;F&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">HEIGHT_LENGTHU =</span> <span class="st">&quot;cm&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">HEIGHT_LENGTH =</span> Length)</span></code></pre></div>
<p>Here is how the metadata now looks for a body length of 65cm:</p>
<table>
<thead>
<tr class="header">
<th align="right">HEIGHT_LENGTH</th>
<th align="right">L</th>
<th align="right">M</th>
<th align="right">S</th>
<th align="left">SEX</th>
<th align="left">HEIGHT_LENGTHU</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">65</td>
<td align="right">-0.3521</td>
<td align="right">7.2666</td>
<td align="right">0.08223</td>
<td align="left">M</td>
<td align="left">cm</td>
</tr>
<tr class="even">
<td align="right">65</td>
<td align="right">-0.3833</td>
<td align="right">7.0812</td>
<td align="right">0.09119</td>
<td align="left">F</td>
<td align="left">cm</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="advs_start" class="section level2">
<h2>Initial ADVS Set-up</h2>
<p>The following steps are to read in the source data, merge ADSL
variables, and derive the usual ADVS analysis variables. The
<code>{admiral}</code> <a href="https://pharmaverse.github.io/admiral/articles/bds_finding.html">Creating
a BDS Finding ADaM vignette</a> gives detailed guidance on all these
steps.</p>
<p>The only difference here would be the parameter level values, which
now include the pediatrics-specific parameters as needed - for
example:</p>
<table>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th><code>PARAMCD</code></th>
<th><code>PARAM</code></th>
<th><code>PARAMN</code></th>
<th><code>PARCAT1</code></th>
<th><code>PARCAT1N</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>BMISDS</td>
<td>BMI-for-age z-score</td>
<td>9</td>
<td>Subject Characteristic</td>
<td>1</td>
</tr>
<tr class="even">
<td>BMIPCTL</td>
<td>BMI-for-age percentile</td>
<td>10</td>
<td>Subject Characteristic</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<div id="derive_vars" class="section level2">
<h2>Derive Additional Variables for Anthropometric indicators</h2>
<p>To compare against the reference files, we need to know each child’s
age and length/height at the time of each vital signs assessment. So,
these need to be first derived as variables in your ADVS.</p>
<p>Remember to ensure that the unit of these matches that of the
reference files metadata you are comparing against, i.e. “days” for age
and “cm” for length/height in our examples here.</p>
<div id="derived-variables-for-parameters-by-age" class="section level3">
<h3>Derived Variables for Parameters by Age</h3>
<p>A variable for current analysis age could be achieved using the
following code (you might first need to derive <code>BRTHDT</code> if
not already available in ADSL, including any partial date imputation
rules if those are possible in your study data collection rules):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Calculate Current Analysis Age AAGECUR and unit AAGECURU</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>advs <span class="ot">&lt;-</span> advs <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="fu">derive_vars_duration</span>(</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="at">new_var =</span> AAGECUR,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="at">new_var_unit =</span> AAGECURU,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    <span class="at">start_date =</span> BRTHDT,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="at">end_date =</span> ADT</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>  )</span></code></pre></div>
<p>Here is how these age variables look:</p>
<table>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="left">BRTHDT</th>
<th align="left">ADT</th>
<th align="right">AAGECUR</th>
<th align="left">AAGECURU</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-07-22</td>
<td align="right">718</td>
<td align="left">DAYS</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-08-05</td>
<td align="right">732</td>
<td align="left">DAYS</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-08-27</td>
<td align="right">754</td>
<td align="left">DAYS</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-09-02</td>
<td align="right">760</td>
<td align="left">DAYS</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-07-22</td>
<td align="right">718</td>
<td align="left">DAYS</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-08-05</td>
<td align="right">732</td>
<td align="left">DAYS</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-08-27</td>
<td align="right">754</td>
<td align="left">DAYS</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-09-02</td>
<td align="right">760</td>
<td align="left">DAYS</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-07-22</td>
<td align="right">718</td>
<td align="left">DAYS</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="left">2010-08-05</td>
<td align="left">2012-08-05</td>
<td align="right">732</td>
<td align="left">DAYS</td>
</tr>
</tbody>
</table>
</div>
<div id="derived-variables-for-weight-by-lengthheight" class="section level3">
<h3>Derived Variables for Weight by Length/Height</h3>
<p>Similar to the above, a variable for current analysis length/height
could be achieved using the following code:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Derive Current HEIGHT/LENGTH at each time point Temporary variable</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>advs <span class="ot">&lt;-</span> advs <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="fu">derive_vars_merged</span>(</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="at">dataset_add =</span> advs,</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    <span class="at">by_vars =</span> <span class="fu">c</span>(<span class="fu">get_admiral_option</span>(<span class="st">&quot;subject_keys&quot;</span>), <span class="fu">exprs</span>(AVISIT)),</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>    <span class="at">filter_add =</span> PARAMCD <span class="sc">==</span> <span class="st">&quot;HEIGHT&quot;</span> <span class="sc">&amp;</span> <span class="fu">toupper</span>(VSSTRESU) <span class="sc">==</span> <span class="st">&quot;CM&quot;</span>,</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>    <span class="at">new_vars =</span> <span class="fu">exprs</span>(<span class="at">HGTTMP =</span> AVAL, <span class="at">HGTTMPU =</span> VSSTRESU)</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  )</span></code></pre></div>
</div>
</div>
<div id="derive_params" class="section level2">
<h2>Derive Additional Parameters for Anthropometric indicators</h2>
<p>Now, we get to the most important section, which shows how to create
new records for each derived pediatrics parameter. Only specific
examples are included here, but you’ll find more parameters in the
example template script referenced at the bottom of this vignette.</p>
<div id="derived-parameters-by-age" class="section level3">
<h3>Derived Parameters by Age</h3>
<p>Parameters for BMI-for-age z-scores and percentiles could be achieved
using the <code>derive_params_growth_age()</code> function as
follows:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="do">## Derive Anthropometric indicators (Z-Scores/Percentiles-for-Age) based on Standard Growth Charts</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="do">## For BMI by Age</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>advs <span class="ot">&lt;-</span> advs <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="fu">slice_derivation</span>(</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="at">derivation =</span> derive_params_growth_age,</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    <span class="at">args =</span> <span class="fu">params</span>(</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>      <span class="at">sex =</span> SEX,</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>      <span class="at">age =</span> AAGECUR,</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>      <span class="at">age_unit =</span> AAGECURU,</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>      <span class="at">parameter =</span> VSTESTCD <span class="sc">==</span> <span class="st">&quot;BMI&quot;</span>,</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>      <span class="at">analysis_var =</span> AVAL,</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>      <span class="at">set_values_to_sds =</span> <span class="fu">exprs</span>(</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>        <span class="at">PARAMCD =</span> <span class="st">&quot;BMISDS&quot;</span>,</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>        <span class="at">PARAM =</span> <span class="st">&quot;BMI-for-age z-score&quot;</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>      ),</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>      <span class="at">set_values_to_pctl =</span> <span class="fu">exprs</span>(</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>        <span class="at">PARAMCD =</span> <span class="st">&quot;BMIPCTL&quot;</span>,</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>        <span class="at">PARAM =</span> <span class="st">&quot;BMI-for-age percentile&quot;</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>      )</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>    ),</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a>    <span class="fu">derivation_slice</span>(</span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>      <span class="at">filter =</span> AAGECUR <span class="sc">&lt;</span> <span class="fl">730.5</span>,</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>      <span class="at">args =</span> <span class="fu">params</span>(</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a>        <span class="at">who_correction =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>        <span class="at">meta_criteria =</span> who_bmi_for_age</span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>      )</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a>    ),</span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a>    <span class="fu">derivation_slice</span>(</span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a>      <span class="at">filter =</span> AAGECUR <span class="sc">&gt;=</span> <span class="fl">730.5</span>,</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a>      <span class="at">args =</span> <span class="fu">params</span>(</span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a>        <span class="at">bmi_cdc_correction =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>        <span class="at">meta_criteria =</span> cdc_bmi_for_age</span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>      )</span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a>    )</span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a>  )</span></code></pre></div>
<p>If only a z-score or percentile were needed, you leave out one of the
<code>set_values_to_</code> arguments.</p>
<p>Once again, it is essential to remember the importance of the
metadata being supplied to the above function via the
<code>meta_criteria</code> argument. Our default case from this package
uses WHO reference data for children &lt; 2 years of age and CDC
reference data for children &gt;= 2 years of age. As the user, you can
use other (e.g., International Obesity Task Force) reference data files
created with the LMS method.</p>
<p>For BMI only, you’ll notice from the code above that we have set
<code>bmi_cdc_correction = TRUE</code>. This is because we used the CDC
extended percentiles (&gt; 95th percentile) to monitor high BMI values
here. If you left this argument as default <code>FALSE</code> value,
only the 2000 CDC Growth Chart for BMI would be used from the CDC
metadata. In 2022, the CDC released extended percentiles (and z-scores)
for BMIs &gt; 95th percentile because the original CDC method did not
accurately characterize very high BMIs.</p>
<p>For all weight-based parameters (including BMI), you’ll also see in
the code above that we have set <code>who_correction = TRUE</code>. This
comes from the <a href="https://www.who.int/publications/i/item/924154693X">WHO Child
Growth Standards Guidelines</a> (pages 301-304). This correction is made
because the WHO used the LMS method only for weight-based measures for
which the calculated z-scores were between -3 and +3; this correction
allows for the calculation of more extreme z-scores. If you are not
using the WHO metadata (or WHO metadata for length or head
circumference), you could leave <code>who_correction = FALSE</code>, and
only the usual LMS method would be applied. WHO recommends using this
correction for all parameters that involve weight (including BMI).</p>
<p>Here is how these newly derived parameters look:</p>
<table>
<colgroup>
<col width="16%" />
<col width="11%" />
<col width="12%" />
<col width="11%" />
<col width="32%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">USUBJID</th>
<th align="right">AAGECUR</th>
<th align="left">AAGECURU</th>
<th align="left">PARAMCD</th>
<th align="left">PARAM</th>
<th align="right">AVAL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="right">718</td>
<td align="left">DAYS</td>
<td align="left">BMISDS</td>
<td align="left">BMI-for-age z-score</td>
<td align="right">0.3796861</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="right">718</td>
<td align="left">DAYS</td>
<td align="left">BMIPCTL</td>
<td align="left">BMI-for-age percentile</td>
<td align="right">64.7910777</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="right">732</td>
<td align="left">DAYS</td>
<td align="left">BMISDS</td>
<td align="left">BMI-for-age z-score</td>
<td align="right">-0.0155017</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="right">754</td>
<td align="left">DAYS</td>
<td align="left">BMISDS</td>
<td align="left">BMI-for-age z-score</td>
<td align="right">0.1112091</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="right">760</td>
<td align="left">DAYS</td>
<td align="left">BMISDS</td>
<td align="left">BMI-for-age z-score</td>
<td align="right">0.2718150</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="right">732</td>
<td align="left">DAYS</td>
<td align="left">BMIPCTL</td>
<td align="left">BMI-for-age percentile</td>
<td align="right">49.3815944</td>
</tr>
<tr class="odd">
<td align="left">01-701-1023</td>
<td align="right">754</td>
<td align="left">DAYS</td>
<td align="left">BMIPCTL</td>
<td align="left">BMI-for-age percentile</td>
<td align="right">54.4274727</td>
</tr>
<tr class="even">
<td align="left">01-701-1023</td>
<td align="right">760</td>
<td align="left">DAYS</td>
<td align="left">BMIPCTL</td>
<td align="left">BMI-for-age percentile</td>
<td align="right">60.7117857</td>
</tr>
</tbody>
</table>
<p>For height parameters by age, it should be noted that the WHO growth
chart we use for children &lt;2 years of age refers to body length,
whereas the CDC growth chart for children &gt;=2 years of age refers to
height. This is explained thoroughly in the next section.</p>
</div>
<div id="derived-weight-by-lengthheight" class="section level3">
<h3>Derived Weight by Length/Height</h3>
<p>The following code is for Weight by Length/Height z-score and
percentile for children &lt; 2 years of age, which assumes the “HEIGHT”
parameter is always collected as recumbent length.</p>
<p>You’ll notice the <code>derive_params_growth_height()</code> function
used is very similar to that used above, but now passing in height or
length instead of age.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>advs <span class="ot">&lt;-</span> advs <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="fu">restrict_derivation</span>(</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>    <span class="at">derivation =</span> derive_params_growth_height,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    <span class="at">args =</span> <span class="fu">params</span>(</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>      <span class="at">sex =</span> SEX,</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>      <span class="at">height =</span> HGTTMP,</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>      <span class="at">height_unit =</span> HGTTMPU,</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>      <span class="at">meta_criteria =</span> who_wt_for_lgth,</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>      <span class="at">parameter =</span> VSTESTCD <span class="sc">==</span> <span class="st">&quot;WEIGHT&quot;</span>,</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>      <span class="at">analysis_var =</span> AVAL,</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>      <span class="at">who_correction =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>      <span class="at">set_values_to_sds =</span> <span class="fu">exprs</span>(</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a>        <span class="at">PARAMCD =</span> <span class="st">&quot;WGTHSDS&quot;</span>,</span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a>        <span class="at">PARAM =</span> <span class="st">&quot;Weight-for-length/height Z-Score&quot;</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>      ),</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>      <span class="at">set_values_to_pctl =</span> <span class="fu">exprs</span>(</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>        <span class="at">PARAMCD =</span> <span class="st">&quot;WGTHPCTL&quot;</span>,</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>        <span class="at">PARAM =</span> <span class="st">&quot;Weight-for-length/height Percentile&quot;</span></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>      )</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a>    ),</span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>    <span class="at">filter =</span> AAGECUR <span class="sc">&lt;</span> <span class="fl">730.5</span></span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a>  )</span></code></pre></div>
<p>We consulted with a pediatrician with extensive experience working
with length and height data, who advised that analysts rarely know
whether standing height or recumbent length was measured. It depends
mainly on the age at which the child can stand (on average, two years)
and the preference of the measurer.</p>
<p>If you have strict CRF (case report form) guidelines that standing
height (rather than body length) was measured, you could add 0.7 cm to
these values to approximate the child’s body length.</p>
</div>
</div>
<div id="advs_end" class="section level2">
<h2>Remaining ADVS Set-up</h2>
<p>The <code>{admiral}</code> <a href="https://pharmaverse.github.io/admiral/articles/bds_finding.html">Creating
a BDS Finding ADaM vignette</a> covers all remaining steps, such as
merging the parameter-level values, variables, and analysis flags.</p>
</div>
</div>
<div id="example" class="section level1">
<h1>Example Scripts</h1>
<table>
<thead>
<tr class="header">
<th>ADaM</th>
<th>Sourcing Command</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ADVS</td>
<td><code>admiral::use_ad_template(&quot;ADVS&quot;, package = &quot;admiralpeds&quot;)</code></td>
</tr>
</tbody>
</table>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
